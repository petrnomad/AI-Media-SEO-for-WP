/*! For license information please see queue.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,r,t)=>{var n=t(609),o=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,r,t){var n,c={},l=null,u=null;for(n in void 0!==t&&(l=""+t),void 0!==r.key&&(l=""+r.key),void 0!==r.ref&&(u=r.ref),r)a.call(r,n)&&!s.hasOwnProperty(n)&&(c[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===c[n]&&(c[n]=r[n]);return{$$typeof:o,type:e,key:l,ref:u,props:c,_owner:i.current}}r.jsx=c,r.jsxs=c},609:e=>{e.exports=window.React},848:(e,r,t)=>{e.exports=t(20)}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);const n=window.wp.element,o=window.wp.apiFetch;var a=t.n(o);const i=window.wp.components;var s=t(848);function c(){var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,n,o,a){var c=n&&n.prototype instanceof s?n:s,u=Object.create(c.prototype);return l(u,"_invoke",function(t,n,o){var a,s,c,l=0,u=o||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(r,t){return a=r,s=0,c=e,p.n=t,i}};function f(t,n){for(s=t,c=n,r=0;!d&&l&&!o&&r<u.length;r++){var o,a=u[r],f=p.p,h=a[2];t>3?(o=h===n)&&(c=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=e):a[0]<=f&&((o=t<2&&f<a[1])?(s=0,p.v=n,p.n=a[1]):f<h&&(o=t<3||a[0]>n||n>h)&&(a[4]=t,a[5]=n,p.n=h,s=0))}if(o||t>1)return i;throw d=!0,n}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(r=s<2?e:c)||!d;){a||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(d=p.n<0)?c:t.call(n,p))!==i)break}catch(r){a=e,s=1,c=r}finally{l=1}}return{value:r,done:d}}}(t,o,a),!0),u}var i={};function s(){}function u(){}function d(){}r=Object.getPrototypeOf;var p=[][n]?r(r([][n]())):(l(r={},n,function(){return this}),r),f=d.prototype=s.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,l(f,"constructor",d),l(d,"constructor",u),u.displayName="GeneratorFunction",l(d,o,"GeneratorFunction"),l(f),l(f,o,"Generator"),l(f,n,function(){return this}),l(f,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:h}})()}function l(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,r,t,n){function a(r,t){l(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(a("next",0),a("throw",1),a("return",2))},l(e,r,t,n)}function u(e,r,t,n,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,o)}function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a,i,s=[],c=!0,l=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(s.push(n.value),s.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return s}}(e,r)||function(e,r){if(e){if("string"==typeof e)return p(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var f=function(){var e=d((0,n.useState)([]),2),r=e[0],t=e[1],o=d((0,n.useState)(!0),2),l=o[0],p=o[1],f=d((0,n.useState)(null),2),h=f[0],v=f[1],j=d((0,n.useState)("all"),2),m=j[0],x=j[1],y=d((0,n.useState)(!0),2),g=y[0],b=y[1];(0,n.useEffect)(function(){if(w(),g){var e=setInterval(w,5e3);return function(){return clearInterval(e)}}},[m,g]);var w=function(){var e,r=(e=c().m(function e(){var r,n;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,p(!0),e.n=1,a()({path:"/ai-media/v1/jobs?status=".concat(m,"&per_page=50"),method:"GET"});case 1:r=e.v,t(r.jobs||[]),v(null),e.n=3;break;case 2:e.p=2,n=e.v,v(n.message);case 3:return e.p=3,p(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}),function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function i(e){u(a,n,o,i,s,"next",e)}function s(e){u(a,n,o,i,s,"throw",e)}i(void 0)})});return function(){return r.apply(this,arguments)}}(),S=function(e){return e?new Date(e).toLocaleString():"N/A"};return h?(0,s.jsxs)("div",{className:"ai-media-queue-error",children:[(0,s.jsxs)("p",{children:["Error loading queue: ",h]}),(0,s.jsx)(i.Button,{onClick:w,variant:"primary",children:"Retry"})]}):(0,s.jsxs)("div",{className:"ai-media-queue",children:[(0,s.jsxs)("div",{className:"ai-media-queue-header",children:[(0,s.jsx)("div",{className:"ai-media-queue-filters",children:(0,s.jsx)(i.SelectControl,{label:"Filter by Status",value:m,options:[{label:"All",value:"all"},{label:"Pending",value:"pending"},{label:"Processing",value:"processing"},{label:"Processed",value:"processed"},{label:"Approved",value:"approved"},{label:"Failed",value:"failed"}],onChange:x,style:{minHeight:"38px"}})}),(0,s.jsxs)("div",{className:"ai-media-queue-actions",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"checkbox",checked:g,onChange:function(e){return b(e.target.checked)}}),"Auto-refresh (5s)"]}),(0,s.jsxs)(i.Button,{variant:"secondary",onClick:w,disabled:l,children:[(0,s.jsx)("span",{className:"dashicons dashicons-update"})," Refresh"]})]})]}),l&&0===r.length?(0,s.jsxs)("div",{className:"ai-media-queue-loading",children:[(0,s.jsx)(i.Spinner,{}),(0,s.jsx)("p",{children:"Loading queue..."})]}):(0,s.jsx)("div",{className:"ai-media-queue-table",children:(0,s.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"ID"}),(0,s.jsx)("th",{children:"Attachment"}),(0,s.jsx)("th",{children:"Language"}),(0,s.jsx)("th",{children:"Provider"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Score"}),(0,s.jsx)("th",{children:"Created"}),(0,s.jsx)("th",{children:"Processed"})]})}),(0,s.jsx)("tbody",{children:0===r.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:"8",style:{textAlign:"center",padding:"2em"},children:"No jobs found."})}):r.map(function(e){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:e.id}),(0,s.jsxs)("td",{children:[(0,s.jsxs)("strong",{children:["#",e.attachment_id]}),e.error_message&&(0,s.jsx)("div",{className:"error-message",style:{color:"#dc3232",fontSize:"12px"},children:e.error_message})]}),(0,s.jsx)("td",{children:e.language_code||"N/A"}),(0,s.jsxs)("td",{children:[e.provider||"N/A",e.model&&(0,s.jsx)("div",{style:{fontSize:"11px",color:"#666"},children:e.model})]}),(0,s.jsx)("td",{children:(r=e.status,(0,s.jsx)("span",{className:"ai-media-status ".concat({pending:"status-pending",processing:"status-processing",processed:"status-processed",approved:"status-approved",failed:"status-failed"}[r]||""),children:{pending:"Pending",processing:"Processing",processed:"Processed",approved:"Approved",failed:"Failed"}[r]||r}))}),(0,s.jsx)("td",{children:e.score?(0,s.jsxs)("span",{className:e.score>=.85?"score-high":"score-medium",children:[(100*e.score).toFixed(0),"%"]}):"N/A"}),(0,s.jsx)("td",{children:S(e.created_at)}),(0,s.jsx)("td",{children:S(e.processed_at)})]},e.id);var r})})]})}),(0,s.jsx)("div",{className:"ai-media-queue-footer",children:(0,s.jsxs)("p",{children:["Showing ",r.length," job",1!==r.length?"s":"",l&&(0,s.jsx)(i.Spinner,{style:{marginLeft:"10px"}})]})})]})};document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("ai-media-queue-root");e&&(0,n.render)((0,s.jsx)(f,{}),e)})})();
//# sourceMappingURL=queue.js.map
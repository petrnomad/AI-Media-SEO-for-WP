/*! For license information please see settings.js.LICENSE.txt */
(()=>{"use strict";var e={20:(e,t,n)=>{var r=n(609),o=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,l={},d=null,c=null;for(r in void 0!==n&&(d=""+n),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,r)&&!s.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===l[r]&&(l[r]=t[r]);return{$$typeof:o,type:e,key:d,ref:c,props:l,_owner:a.current}}t.jsx=l,t.jsxs=l},609:e=>{e.exports=window.React},848:(e,t,n)=>{e.exports=n(20)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=window.wp.element,o=window.wp.apiFetch;var i=n.n(o);const a=window.wp.components;var s=n(848);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t,n){return(t=function(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var l=r&&r.prototype instanceof s?r:s,d=Object.create(l.prototype);return h(d,"_invoke",function(n,r,o){var i,s,l,d=0,c=o||[],u=!1,p={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return i=t,s=0,l=e,p.n=n,a}};function h(n,r){for(s=n,l=r,t=0;!u&&d&&!o&&t<c.length;t++){var o,i=c[t],h=p.p,f=i[2];n>3?(o=f===r)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=h&&((o=n<2&&h<i[1])?(s=0,p.v=r,p.n=i[1]):h<f&&(o=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,p.n=f,s=0))}if(o||n>1)return a;throw u=!0,r}return function(o,c,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===c&&h(c,f),s=c,l=f;(t=s<2?e:l)||!u;){i||(s?s<3?(s>1&&(p.n=-1),h(s,l)):p.n=l:p.v=l);try{if(d=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(u=p.n<0)?l:n.call(r,p))!==a)break}catch(t){i=e,s=1,l=t}finally{d=1}}return{value:t,done:u}}}(n,o,i),!0),d}var a={};function s(){}function l(){}function d(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(h(t={},r,function(){return this}),t),u=d.prototype=s.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,h(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return l.prototype=d,h(u,"constructor",d),h(d,"constructor",l),l.displayName="GeneratorFunction",h(d,o,"GeneratorFunction"),h(u),h(u,o,"Generator"),h(u,r,function(){return this}),h(u,"toString",function(){return"[object Generator]"}),(p=function(){return{w:i,m:f}})()}function h(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}h=function(e,t,n,r){function i(t,n){h(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},h(e,t,n,r)}function f(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=function(){var e,t,n=m((0,r.useState)((null===(e=window.aiMediaSEO)||void 0===e?void 0:e.settings)||{}),2),o=n[0],l=n[1],d=m((0,r.useState)((null===(t=window.aiMediaSEO)||void 0===t?void 0:t.providers)||{}),2),c=d[0],u=d[1],h=m((0,r.useState)(!1),2),x=h[0],v=h[1],S=m((0,r.useState)(null),2),w=S[0],C=S[1],O=m((0,r.useState)("providers"),2),P=O[0],M=O[1],k=m((0,r.useState)(!1),2),I=k[0],A=k[1],T=m((0,r.useState)(""),2),E=T[0],R=T[1],z=function(){var e,t=(e=p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,v(!0),C(null),e.n=1,i()({path:"/ai-media/v1/settings",method:"POST",data:{settings:o,providers:c}});case 1:t=e.v,C({type:"success",text:t.message||"Settings saved successfully!"}),e.n=3;break;case 2:e.p=2,n=e.v,C({type:"error",text:"Error saving settings: "+n.message});case 3:return e.p=3,v(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){f(i,r,o,a,s,"next",e)}function s(e){f(i,r,o,a,s,"throw",e)}a(void 0)})});return function(){return t.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"ai-media-settings",children:[(0,s.jsx)("style",{children:"\n\t\t\t\t\t.ai-media-settings .components-form-toggle.is-checked .components-form-toggle__thumb {\n\t\t\t\t\t\tleft: 6px !important;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,s.jsxs)("div",{className:"ai-media-settings-header",children:[(0,s.jsx)("div",{className:"ai-media-settings-tabs",children:[{id:"providers",label:"Providers"},{id:"context",label:"Context"},{id:"processing",label:"Processing"},{id:"quality",label:"Quality Rules"},{id:"advanced",label:"Advanced"}].map(function(e){return(0,s.jsx)("button",{className:"ai-media-settings-tab ".concat(P===e.id?"active":""),onClick:function(){return M(e.id)},children:e.label},e.id)})}),(0,s.jsx)(a.Button,{variant:"primary",onClick:z,isBusy:x,disabled:x,children:x?"Saving...":"Save Settings"})]}),w&&(0,s.jsx)(a.Notice,{status:w.type,isDismissible:!0,onRemove:function(){return C(null)},children:w.text}),I&&(0,s.jsxs)(a.Modal,{title:"API Key Required",onRequestClose:function(){return A(!1)},children:[(0,s.jsx)("p",{children:E}),(0,s.jsx)(a.Button,{variant:"primary",onClick:function(){return A(!1)},children:"OK"})]}),(0,s.jsxs)("div",{className:"ai-media-settings-content",children:["providers"===P&&(0,s.jsx)(y,{providers:c,setProviders:u,setShowModal:A,setModalMessage:R}),"context"===P&&(0,s.jsx)(j,{settings:o,setSettings:l}),"processing"===P&&(0,s.jsx)(g,{settings:o,setSettings:l}),"quality"===P&&(0,s.jsx)(b,{settings:o,setSettings:l}),"advanced"===P&&(0,s.jsx)(_,{settings:o,setSettings:l})]})]})},y=function(e){var t,n,r,o=e.providers,i=e.setProviders,l=e.setShowModal,d=e.setModalMessage,p=function(e,t,n){var r;if("api_key"===t&&""===n.trim()&&null!==(r=o[e])&&void 0!==r&&r.primary)return d("Cannot remove API key from the active provider. Please select a different provider first."),void l(!0);i(c(c({},o),{},u({},e,c(c({},o[e]),{},u({},t,n)))))},h=Object.keys(o).find(function(e){var t;return null===(t=o[e])||void 0===t?void 0:t.primary})||"openai",f=[{id:"openai",name:"OpenAI (ChatGPT)",description:"GPT-4o Vision - Best for general image analysis",models:(null===(t=window.aiMediaSEO)||void 0===t||null===(t=t.provider_models)||void 0===t?void 0:t.openai)||{}},{id:"anthropic",name:"Anthropic (Claude)",description:"Claude 3.5 Sonnet - Advanced contextual understanding",models:(null===(n=window.aiMediaSEO)||void 0===n||null===(n=n.provider_models)||void 0===n?void 0:n.anthropic)||{}},{id:"google",name:"Google (Gemini)",description:"Gemini Pro Vision - Fast and accurate",models:(null===(r=window.aiMediaSEO)||void 0===r||null===(r=r.provider_models)||void 0===r?void 0:r.google)||{}}];return(0,s.jsxs)("div",{className:"ai-media-providers-tab",children:[(0,s.jsx)(a.Card,{style:{marginBottom:"20px",background:"#f0f6fc",borderLeft:"4px solid #2271b1"},children:(0,s.jsxs)(a.CardBody,{children:[(0,s.jsxs)("h3",{style:{marginTop:0,marginBottom:"8px"},children:[(0,s.jsx)("span",{className:"dashicons dashicons-info",style:{fontSize:"20px",marginRight:"8px"}}),"Select Your AI Provider"]}),(0,s.jsx)("p",{style:{margin:0,color:"#1d2327"},children:"Choose which AI service will analyze your images and generate metadata."})]})}),f.map(function(e){var t,n,r,u=h===e.id,f=(null===(t=o[e.id])||void 0===t||null===(t=t.api_key)||void 0===t?void 0:t.length)>0;return(0,s.jsxs)(a.Card,{style:{marginBottom:"16px",border:u?"2px solid #2271b1":"1px solid #dcdcde",position:"relative"},children:[(0,s.jsx)(a.CardHeader,{style:{background:u?"#f0f6fc":"transparent",borderBottom:u?"1px solid #2271b1":"1px solid #dcdcde"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,s.jsx)("style",{children:"\n\t\t\t\t\t\t\t\t\t\t\t.provider-radio-button:checked::before {\n\t\t\t\t\t\t\t\t\t\t\t\tmargin: 0.31rem !important;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t"}),(0,s.jsx)("input",{type:"radio",name:"primary_provider",value:e.id,checked:u,onChange:function(){return function(e){var t;if(null===(t=o[e])||void 0===t||!t.api_key||""===o[e].api_key.trim())return d("Please add an API key for this provider before selecting it as primary."),void l(!0);var n={};Object.keys(o).forEach(function(t){n[t]=c(c({},o[t]),{},{primary:t===e})}),i(n)}(e.id)},className:"provider-radio-button",style:{width:"20px",height:"20px",cursor:"pointer"}}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[e.name,u&&(0,s.jsx)("span",{style:{background:"#2271b1",color:"#fff",padding:"2px 8px",borderRadius:"3px",fontSize:"11px",fontWeight:"bold",textTransform:"uppercase"},children:"Active"})]}),(0,s.jsx)("p",{style:{margin:"4px 0 0 0",color:"#757575",fontSize:"13px"},children:e.description})]})]}),f&&(0,s.jsx)("span",{className:"dashicons dashicons-yes-alt",style:{color:"#00a32a",fontSize:"24px"},title:"API Key configured"})]})}),(0,s.jsxs)(a.CardBody,{children:[(0,s.jsx)(a.TextControl,{label:"API Key",type:"password",value:(null===(n=o[e.id])||void 0===n?void 0:n.api_key)||"",onChange:function(t){return p(e.id,"api_key",t)},help:"Get your API key from ".concat("OpenAI (ChatGPT)"===e.name?"platform.openai.com":"Anthropic (Claude)"===e.name?"console.anthropic.com":"console.cloud.google.com"),placeholder:"sk-..."}),Object.keys(e.models).length>1&&(0,s.jsx)(a.SelectControl,{label:"Model",value:(null===(r=o[e.id])||void 0===r?void 0:r.model)||Object.keys(e.models)[0],options:Object.entries(e.models).map(function(e){var t=m(e,2),n=t[0];return{label:t[1],value:n}}),onChange:function(t){return p(e.id,"model",t)},help:"Select which AI model to use for image analysis",style:{minHeight:"38px"}})]})]},e.id)})]})},g=function(e){var t=e.settings,n=e.setSettings;return(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsx)("h3",{children:"Processing Settings"})}),(0,s.jsxs)(a.CardBody,{children:[(0,s.jsx)(a.TextControl,{label:"Batch Size",type:"number",value:t.batch_size||50,onChange:function(e){return n(c(c({},t),{},{batch_size:parseInt(e)}))},help:"Number of images to process in each batch"}),(0,s.jsx)(a.TextControl,{label:"Max Concurrent Jobs",type:"number",value:t.max_concurrent||3,onChange:function(e){return n(c(c({},t),{},{max_concurrent:parseInt(e)}))},help:"Maximum number of concurrent processing jobs"}),(0,s.jsx)(a.TextControl,{label:"Rate Limit (requests/minute)",type:"number",value:t.rate_limit_rpm||120,onChange:function(e){return n(c(c({},t),{},{rate_limit_rpm:parseInt(e)}))},help:"API requests per minute limit"}),(0,s.jsx)(a.TextControl,{label:"Max Image Size (px)",type:"number",value:t.max_image_size||1600,onChange:function(e){return n(c(c({},t),{},{max_image_size:parseInt(e)}))},help:"Maximum image dimension before processing"}),(0,s.jsx)(a.ToggleControl,{label:"Enable Auto-processing",checked:t.enable_auto_process||!1,onChange:function(e){return n(c(c({},t),{},{enable_auto_process:e}))},help:"Automatically process new uploads"})]})]})},b=function(e){var t=e.settings,n=e.setSettings;return(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsx)("h3",{children:"Quality Rules"})}),(0,s.jsx)(a.CardBody,{children:(0,s.jsxs)("div",{style:{display:"flex",gap:"24px",flexWrap:"wrap"},children:[(0,s.jsxs)("div",{style:{flex:"1 1 calc(50% - 12px)",minWidth:"300px"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,s.jsx)("label",{style:{fontWeight:"600",fontSize:"13px",color:"#1e1e1e"},children:"Auto-approve Quality Threshold"}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"1",value:Math.round(100*(t.auto_approve_threshold||.85)),onChange:function(e){var r=Math.min(100,Math.max(0,parseInt(e.target.value)||0));n(c(c({},t),{},{auto_approve_threshold:r/100}))},style:{width:"60px",padding:"4px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px",textAlign:"right"}}),(0,s.jsx)("span",{style:{fontSize:"13px",fontWeight:"600",color:"#2271b1",minWidth:"20px"},children:"%"})]})]}),(0,s.jsx)("input",{type:"range",min:"0",max:"100",step:"1",value:Math.round(100*(t.auto_approve_threshold||.85)),onChange:function(e){var r=parseInt(e.target.value);n(c(c({},t),{},{auto_approve_threshold:r/100}))},style:{width:"100%",height:"6px",borderRadius:"3px",outline:"none",WebkitAppearance:"none",appearance:"none",background:"linear-gradient(to right,\n\t\t\t\t\t\t\t\t\t#dc3232 0%,\n\t\t\t\t\t\t\t\t\t#dc3232 ".concat(Math.round(100*(t.auto_approve_threshold||.85))<70?Math.round(100*(t.auto_approve_threshold||.85)):70,"%,\n\t\t\t\t\t\t\t\t\t#ffb900 70%,\n\t\t\t\t\t\t\t\t\t#ffb900 ").concat(Math.round(100*(t.auto_approve_threshold||.85))<85?Math.round(100*(t.auto_approve_threshold||.85)):85,"%,\n\t\t\t\t\t\t\t\t\t#46b450 85%,\n\t\t\t\t\t\t\t\t\t#46b450 100%)")}}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"8px",fontSize:"11px",color:"#646970"},children:[(0,s.jsx)("span",{children:"Low (0-70%)"}),(0,s.jsx)("span",{children:"Medium (70-85%)"}),(0,s.jsx)("span",{children:"High (85-100%)"})]}),(0,s.jsx)("p",{style:{margin:"12px 0 0 0",fontSize:"12px",color:"#646970",fontStyle:"italic"},children:Math.round(100*(t.auto_approve_threshold||.85))>=85?(0,s.jsxs)("span",{style:{color:"#46b450"},children:["✓ Metadata ≥ ",Math.round(100*(t.auto_approve_threshold||.85)),"% will be auto-approved."]}):Math.round(100*(t.auto_approve_threshold||.85))>=70?(0,s.jsxs)("span",{style:{color:"#ffb900"},children:["⚠ Metadata ≥ ",Math.round(100*(t.auto_approve_threshold||.85)),"% will be auto-approved (medium)."]}):(0,s.jsxs)("span",{style:{color:"#dc3232"},children:["⚠ Low threshold (",Math.round(100*(t.auto_approve_threshold||.85)),"%). Recommended: 85%+."]})})]}),(0,s.jsx)("div",{style:{flex:"1 1 calc(50% - 12px)",minWidth:"300px"},children:(0,s.jsx)(a.TextControl,{label:"ALT Max Length",type:"number",value:t.alt_max_length||125,onChange:function(e){return n(c(c({},t),{},{alt_max_length:parseInt(e)}))},help:"Maximum characters for ALT text"})})]})})]})},j=function(e){var t=e.settings,n=e.setSettings;return(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsx)("h3",{children:"AI Context & Role"})}),(0,s.jsxs)(a.CardBody,{children:[(0,s.jsx)(a.TextControl,{label:"AI Role",value:t.ai_role||"SEO expert",onChange:function(e){return n(c(c({},t),{},{ai_role:e}))},help:"Define the role of the AI (e.g., 'SEO expert', 'Marketing specialist', 'Content writer')",placeholder:"SEO expert"}),(0,s.jsxs)("div",{style:{marginTop:"20px"},children:[(0,s.jsx)("label",{htmlFor:"site-context",style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:"Site Context & Information"}),(0,s.jsx)("textarea",{id:"site-context",value:t.site_context||"",onChange:function(e){return n(c(c({},t),{},{site_context:e.target.value}))},rows:"6",style:{width:"100%",padding:"8px",fontSize:"13px",lineHeight:"1.5",border:"1px solid #dcdcde",borderRadius:"4px",fontFamily:"inherit"},placeholder:"Provide general context about your website, target audience, brand voice, and any specific requirements for image metadata..."}),(0,s.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",fontStyle:"italic",color:"#646970"},children:"This context will be included in all AI prompts to ensure metadata aligns with your site's purpose and audience."})]})]})]})},_=function(e){var t=e.settings,n=e.setSettings;return(0,s.jsxs)(a.Card,{children:[(0,s.jsx)(a.CardHeader,{children:(0,s.jsx)("h3",{children:"Advanced Settings"})}),(0,s.jsx)(a.CardBody,{children:(0,s.jsx)(a.TextControl,{label:"Primary Language",value:t.primary_language||"en",onChange:function(e){return n(c(c({},t),{},{primary_language:e}))},help:"Primary language code (e.g., en, cs, de)"})})]})};document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("ai-media-settings-root");e&&(0,r.render)((0,s.jsx)(v,{}),e)})})();
//# sourceMappingURL=settings.js.map
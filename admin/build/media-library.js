/*! For license information please see media-library.js.LICENSE.txt */
(()=>{"use strict";var t={20:(t,e,n)=>{var r=n(609),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(u=e.ref),e)a.call(e,r)&&!s.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===i[r]&&(i[r]=e[r]);return{$$typeof:o,type:t,key:c,ref:u,props:i,_owner:l.current}}e.Fragment=i,e.jsx=c,e.jsxs=c},609:t=>{t.exports=window.React},848:(t,e,n)=>{t.exports=n(20)}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const r=window.wp.element,o=window.wp.apiFetch;var i=n.n(o);function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var a=r&&r.prototype instanceof c?r:c,u=Object.create(a.prototype);return l(u,"_invoke",function(n,r,o){var i,a,l,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,a=0,l=t,p.n=n,s}};function f(n,r){for(a=n,l=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(l=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(a=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,a=0))}if(o||n>1)return s;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),a=u,l=h;(e=a<2?t:l)||!d;){i||(a?a<3?(a>1&&(p.n=-1),f(a,l)):p.n=l:p.v=l);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(d=p.n<0)?l:n.call(r,p))!==s)break}catch(e){i=t,a=1,l=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),u}var s={};function c(){}function u(){}function d(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(l(e={},r,function(){return this}),e),f=d.prototype=c.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=d,l(f,"constructor",d),l(d,"constructor",u),u.displayName="GeneratorFunction",l(d,o,"GeneratorFunction"),l(f),l(f,o,"Generator"),l(f,r,function(){return this}),l(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:h}})()}function l(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}l=function(t,e,n,r){function i(e,n){l(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},l(t,e,n,r)}function s(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}var c=function(t){if(!t)return"";var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function f(t,e,n){return(e=function(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return m(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(m(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,m(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,m(d,"constructor",c),m(c,"constructor",s),s.displayName="GeneratorFunction",m(c,o,"GeneratorFunction"),m(d),m(d,o,"Generator"),m(d,r,function(){return this}),m(d,"toString",function(){return"[object Generator]"}),(h=function(){return{w:i,m:p}})()}function m(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}m=function(t,e,n,r){function i(e,n){m(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},m(t,e,n,r)}function y(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function g(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){y(i,r,o,a,l,"next",t)}function l(t){y(i,r,o,a,l,"throw",t)}a(void 0)})}}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function j(t,e,n){return(e=function(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var S="pending",w="processing",O="processed",k="approved",C="failed",A=[{label:"All",value:"all"},{label:"Pending",value:S},{label:"Processed",value:O},{label:"Approved",value:k},{label:"Failed",value:C}],T=[{label:"All Images",value:"all"},{label:"Attached to Posts",value:"attached"},{label:"Not Attached",value:"unattached"}],P=(j(j(j(j(j({},S,"ai-media-status-pending"),w,"ai-media-status-processing"),O,"ai-media-status-processed"),k,"ai-media-status-approved"),C,"ai-media-status-failed"),function(){var t=["Analyzing image...","Processing with AI...","Generating metadata...","Optimizing for SEO...","Almost there..."];return t[Math.floor(Math.random()*t.length)]});function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function z(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return D(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(D(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,D(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,D(d,"constructor",c),D(c,"constructor",s),s.displayName="GeneratorFunction",D(c,o,"GeneratorFunction"),D(d),D(d,o,"Generator"),D(d,r,function(){return this}),D(d,"toString",function(){return"[object Generator]"}),(z=function(){return{w:i,m:p}})()}function D(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}D=function(t,e,n,r){function i(e,n){D(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},D(t,e,n,r)}function M(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=L(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function B(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function F(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){B(i,r,o,a,l,"next",t)}function l(t){B(i,r,o,a,l,"throw",t)}a(void 0)})}}function R(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||L(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){if(t){if("string"==typeof t)return G(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,e):void 0}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function U(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return W(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(W(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,W(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,W(d,"constructor",c),W(c,"constructor",s),s.displayName="GeneratorFunction",W(c,o,"GeneratorFunction"),W(d),W(d,o,"Generator"),W(d,r,function(){return this}),W(d,"toString",function(){return"[object Generator]"}),(U=function(){return{w:i,m:p}})()}function W(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}W=function(t,e,n,r){function i(e,n){W(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},W(t,e,n,r)}function H(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=K(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function q(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||K(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){if(t){if("string"==typeof t)return V(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=$((0,r.useState)({}),2),o=n[0],a=n[1],l=$((0,r.useState)([]),2),s=l[0],c=l[1],u=(0,r.useRef)(null),d=(0,r.useRef)(new Set);return(0,r.useEffect)(function(){var n=function(){var n,r=(n=U().m(function n(){var r,o,l,s,c,p,f,h,m,y;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:if(r=t.filter(function(t){var e,n=(null===(e=t.meta)||void 0===e?void 0:e._ai_media_status)||"pending";return"pending"===n||"processing"===n}),0!==r.length){n.n=1;break}return u.current&&(clearInterval(u.current),u.current=null),n.a(2);case 1:return n.p=1,o=r.map(function(t){return t.id}).join(","),n.n=2,i()({path:"/ai-media/v1/queue-status?attachment_ids=".concat(o),method:"GET"});case 2:l=n.v,a(l),s=[],c=H(r);try{for(c.s();!(p=c.n()).done;)h=p.value,m=null===(f=h.meta)||void 0===f?void 0:f._ai_media_status,y=l[h.id],"processing"!==m&&"pending"!==m||null!=y&&y.in_queue||d.current.has(h.id)||(d.current.add(h.id),e&&s.push(e(h.id)))}catch(t){c.e(t)}finally{c.f()}if(!(s.length>0)){n.n=3;break}return n.n=3,Promise.all(s);case 3:n.n=5;break;case 4:n.p=4,n.v;case 5:return n.a(2)}},n,null,[[1,4]])}),function(){var t=this,e=arguments;return new Promise(function(r,o){var i=n.apply(t,e);function a(t){q(i,r,o,a,l,"next",t)}function l(t){q(i,r,o,a,l,"throw",t)}a(void 0)})});return function(){return r.apply(this,arguments)}}();return t.filter(function(t){var e,n=(null===(e=t.meta)||void 0===e?void 0:e._ai_media_status)||"pending";return"pending"===n||"processing"===n}).length>0?(n(),u.current||(u.current=setInterval(n,3e3))):(u.current&&(clearInterval(u.current),u.current=null),d.current.clear()),function(){u.current&&(clearInterval(u.current),u.current=null)}},[t,e]),{queueStatus:o,processingIds:s,addProcessingId:function(t){c(function(e){return[].concat(function(t){if(Array.isArray(t))return V(t)}(n=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||K(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[t]);var n})},removeProcessingId:function(t){c(function(e){return e.filter(function(e){return e!==t})})}}};function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function X(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return J(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(J(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,J(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,J(d,"constructor",c),J(c,"constructor",s),s.displayName="GeneratorFunction",J(c,o,"GeneratorFunction"),J(d),J(d,o,"Generator"),J(d,r,function(){return this}),J(d,"toString",function(){return"[object Generator]"}),(X=function(){return{w:i,m:p}})()}function J(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}J=function(t,e,n,r){function i(e,n){J(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},J(t,e,n,r)}function Z(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function tt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Z(i,r,o,a,l,"next",t)}function l(t){Z(i,r,o,a,l,"throw",t)}a(void 0)})}}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach(function(e){rt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Q(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return it(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.refreshAttachment,o=void 0===n?null:n,a=e.isAttachmentProcessing,l=void 0===a?null:a,s=ot((0,r.useState)(null),2),u=s[0],d=s[1],p=ot((0,r.useState)(!1),2),f=p[0],h=p[1],m=function(t,e){d({id:t,value:e,isDraft:arguments.length>2&&void 0!==arguments[2]&&arguments[2]})},y=function(){d(null)},g=function(){var t=tt(X().m(function t(e){return X().w(function(t){for(;;)switch(t.p=t.n){case 0:if(u&&!f){t.n=1;break}return t.a(2);case 1:return h(!0),t.p=2,t.n=3,e(u);case 3:d(null),t.n=5;break;case 4:throw t.p=4,t.v;case 5:return t.p=5,h(!1),t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=tt(X().m(function e(){return X().w(function(e){for(;;)switch(e.n){case 0:if(t&&o){e.n=1;break}return e.a(2);case 1:return e.n=2,g(function(){var e=tt(X().m(function e(n){var r,a,l,s,c,u;return X().w(function(e){for(;;)switch(e.n){case 0:u=t,e.n="alt"===u?1:"caption"===u?4:"title"===u?7:"status"===u?10:15;break;case 1:return e.n=2,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{alt_text:n.value}});case 2:if(!n.isDraft){e.n=3;break}return e.n=3,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{meta:{_ai_media_draft_alt:""}}});case 3:case 6:case 9:case 14:case 15:return e.a(3,16);case 4:return e.n=5,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{caption:n.value}});case 5:if(!n.isDraft){e.n=6;break}return e.n=6,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{meta:{_ai_media_draft_caption:""}}});case 7:return e.n=8,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{title:n.value}});case 8:if(!n.isDraft){e.n=9;break}return e.n=9,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{meta:{_ai_media_draft_title:""}}});case 10:if("pending"!==n.value){e.n=13;break}return e.n=11,i()({path:"/wp/v2/media/".concat(n.id),method:"GET"});case 11:return a=e.v,l=(null===(r=a.title)||void 0===r?void 0:r.rendered)||"",a.source_url&&(s=a.source_url.split("/").pop(),c=s.replace(/\.[^/.]+$/,""),l=c.replace(/[-_]/g," ")),e.n=12,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{alt_text:"",caption:"",title:l,meta:{_ai_media_status:"pending",_ai_media_draft_alt:"",_ai_media_draft_title:"",_ai_media_draft_caption:""}}});case 12:e.n=14;break;case 13:return e.n=14,i()({path:"/wp/v2/media/".concat(n.id),method:"POST",data:{meta:{_ai_media_status:n.value}}});case 16:return e.n=17,o(n.id);case 17:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return nt({editing:u,saving:f,startEditing:m,updateValue:function(t){d(function(e){return nt(nt({},e),{},{value:t})})},cancelEditing:y,save:g,setSaving:h},t&&{handleClick:function(e){if(t&&(!l||!l(e)))switch(t){case"alt":var n,r,o="processed"===(null===(n=e.meta)||void 0===n?void 0:n._ai_media_status)&&(null===(r=e.meta)||void 0===r?void 0:r._ai_media_draft_alt),i=o?e.meta._ai_media_draft_alt:e.alt_text||"";m(e.id,i,o);break;case"caption":var a,s,u,d="processed"===(null===(a=e.meta)||void 0===a?void 0:a._ai_media_status)&&(null===(s=e.meta)||void 0===s?void 0:s._ai_media_draft_caption),p="";d?p=e.meta._ai_media_draft_caption:"string"==typeof e.caption?p=c(e.caption):null!==(u=e.caption)&&void 0!==u&&u.rendered&&(p=c(e.caption.rendered)),m(e.id,p,d);break;case"title":var f,h,y,g="processed"===(null===(f=e.meta)||void 0===f?void 0:f._ai_media_status)&&(null===(h=e.meta)||void 0===h?void 0:h._ai_media_draft_title),v="";g?v=e.meta._ai_media_draft_title:"string"==typeof e.title?v=c(e.title):null!==(y=e.title)&&void 0!==y&&y.rendered&&(v=c(e.title.rendered)),m(e.id,v,g);break;case"status":var x,b=(null===(x=e.meta)||void 0===x?void 0:x._ai_media_status)||"pending";m(e.id,b,!1)}},handleKeyDown:function(e){t&&("Escape"===e.key?y():"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v()))},handleSave:v})};function lt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return st(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(st(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,st(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,st(d,"constructor",c),st(c,"constructor",s),s.displayName="GeneratorFunction",st(c,o,"GeneratorFunction"),st(d),st(d,o,"Generator"),st(d,r,function(){return this}),st(d,"toString",function(){return"[object Generator]"}),(lt=function(){return{w:i,m:p}})()}function st(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}st=function(t,e,n,r){function i(e,n){st(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},st(t,e,n,r)}function ct(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function ut(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){ct(i,r,o,a,l,"next",t)}function l(t){ct(i,r,o,a,l,"throw",t)}a(void 0)})}}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ft=function(){var t=dt((0,r.useState)(0),2),e=t[0],n=t[1],o=dt((0,r.useState)(!1),2),a=o[0],l=o[1],s=dt((0,r.useState)(!1),2),c=s[0],u=s[1],d=dt((0,r.useState)(null),2),p=d[0],f=d[1],h=dt((0,r.useState)(null),2),m=h[0],y=h[1],g=function(){var t=ut(lt().m(function t(){var e;return lt().w(function(t){for(;;)switch(t.p=t.n){case 0:return l(!0),t.p=1,t.n=2,i()({path:"/ai-media/v1/costs/total",method:"GET"});case 2:e=t.v,n(e.total_cost||0),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.p=4,l(!1),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),v=function(){var t=ut(lt().m(function t(){var e,n,r,o;return lt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Promise.all([i()({path:"/ai-media/v1/costs/stats",method:"GET"}),i()({path:"/ai-media/v1/costs/breakdown",method:"GET"})]);case 1:e=t.v,n=dt(e,2),r=n[0],o=n[1],f(r),y(o),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)(function(){g()},[]),{totalCost:e,loadingCosts:a,showCostModal:c,setShowCostModal:u,costStats:p,costBreakdown:m,loadTotalCost:g,loadCostStats:v,addCost:function(t){n(function(e){return e+t})}}};function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function yt(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(mt(t)+" is not iterable")}function gt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return vt(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(vt(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,vt(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,vt(d,"constructor",c),vt(c,"constructor",s),s.displayName="GeneratorFunction",vt(c,o,"GeneratorFunction"),vt(d),vt(d,o,"Generator"),vt(d,r,function(){return this}),vt(d,"toString",function(){return"[object Generator]"}),(gt=function(){return{w:i,m:p}})()}function vt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}vt=function(t,e,n,r){function i(e,n){vt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},vt(t,e,n,r)}function xt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ct(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function bt(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jt(Object(n),!0).forEach(function(e){wt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function wt(t,e,n){return(e=function(t){var e=function(t){if("object"!=mt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=mt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ot(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ct(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||Ct(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){if(t){if("string"==typeof t)return At(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(t,e):void 0}}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function Pt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ft(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach(function(e){Nt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Nt(t,e,n){return(e=function(t){var e=function(t){if("object"!=Tt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Et(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return zt(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(zt(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,zt(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,zt(d,"constructor",c),zt(c,"constructor",s),s.displayName="GeneratorFunction",zt(c,o,"GeneratorFunction"),zt(d),zt(d,o,"Generator"),zt(d,r,function(){return this}),zt(d,"toString",function(){return"[object Generator]"}),(Et=function(){return{w:i,m:p}})()}function zt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}zt=function(t,e,n,r){function i(e,n){zt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},zt(t,e,n,r)}function Dt(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function Mt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Dt(i,r,o,a,l,"next",t)}function l(t){Dt(i,r,o,a,l,"throw",t)}a(void 0)})}}function Bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||Ft(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){if(t){if("string"==typeof t)return Rt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(t,e):void 0}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Lt=function(t){switch(t){case"easy":return{maxRetries:1,baseDelay:2e3,jitterMs:500};case"optimal":default:return{maxRetries:2,baseDelay:1e3,jitterMs:300};case"extreme":return{maxRetries:3,baseDelay:500,jitterMs:200}}},Gt=function(t){switch(t){case"easy":return 500;case"optimal":default:return 200;case"extreme":return 0}},Ut=function(t){return new Promise(function(e){return setTimeout(e,t)})};function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Ht(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Wt(t)+" is not iterable")}function qt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return $t(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):($t(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,$t(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,$t(d,"constructor",c),$t(c,"constructor",s),s.displayName="GeneratorFunction",$t(c,o,"GeneratorFunction"),$t(d),$t(d,o,"Generator"),$t(d,r,function(){return this}),$t(d,"toString",function(){return"[object Generator]"}),(qt=function(){return{w:i,m:p}})()}function $t(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}$t=function(t,e,n,r){function i(e,n){$t(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},$t(t,e,n,r)}function Kt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Jt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Vt(t){return function(t){if(Array.isArray(t))return Zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yt(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function Qt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Yt(i,r,o,a,l,"next",t)}function l(t){Yt(i,r,o,a,l,"throw",t)}a(void 0)})}}function Xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||Jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){if(t){if("string"==typeof t)return Zt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zt(t,e):void 0}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ee=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(null===(e=t.meta)||void 0===e?void 0:e._ai_media_status)||S,i=(null===(n=r[t.id])||void 0===n?void 0:n.in_queue)||!1;return o===w||o===S&&i},ne=n(848);const re=function(t){var e=t.notice,n=t.onDismiss;return e?(0,ne.jsxs)("div",{className:"notice notice-".concat(e.type," is-dismissible"),style:{margin:"0 0 20px 0"},children:[(0,ne.jsx)("p",{children:e.message}),(0,ne.jsx)("button",{type:"button",className:"notice-dismiss",onClick:n,children:(0,ne.jsx)("span",{className:"screen-reader-text",children:"Dismiss this notice."})})]}):null};function oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const ie=function(t){var e,n,o=t.hoveredImage,i=(e=(0,r.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return oe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return o?(0,ne.jsx)("div",{className:"ai-media-thumbnail-hover",style:{left:"".concat(o.x,"px"),top:"".concat(o.y-150,"px")},children:a?(0,ne.jsx)("div",{style:{padding:"20px",background:"#f5f5f5",border:"1px solid #ddd",borderRadius:"4px",color:"#999",textAlign:"center"},children:"Image not available"}):(0,ne.jsx)("img",{src:o.imageUrl,alt:"Preview",onError:function(){l(!0)}})}):null};function ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return le(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const se=function(t){var e=t.message,n=void 0===e?"Loading media library...":e,o=t.showTips,i=void 0===o||o,a=ae((0,r.useState)(0),2),l=a[0],s=a[1],c=ae((0,r.useState)(0),2),u=c[0],d=c[1],p=ae((0,r.useState)(0),2),f=p[0],h=p[1],m=[" Optimizing your media library for blazing fast performance..."," Preparing your images with AI-powered metadata..."," Loading smart filters and search capabilities..."," Organizing thousands of images for instant access..."," Indexing image metadata for lightning-fast search..."," Building your visual content dashboard..."," Calculating quality scores and AI insights..."," Almost there! Your media library is loading..."];return(0,r.useEffect)(function(){if(i){var t=setInterval(function(){s(function(t){return(t+1)%m.length})},2e3);return function(){return clearInterval(t)}}},[i,m.length]),(0,r.useEffect)(function(){var t=setInterval(function(){d(function(t){return t<60?t+15*Math.random():t<80?t+5*Math.random():t<90?t+2*Math.random():t})},300);return function(){return clearInterval(t)}},[]),(0,r.useEffect)(function(){var t=setInterval(function(){h(function(t){return(t+1)%4})},500);return function(){return clearInterval(t)}},[]),(0,ne.jsxs)("div",{className:"ai-media-loading-screen",children:[(0,ne.jsxs)("div",{className:"loading-container",children:[(0,ne.jsx)("div",{className:"loading-animation",children:(0,ne.jsx)("svg",{viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg",fill:"hsl(228, 97%, 42%)",className:"audio-bars",children:(0,ne.jsxs)("g",{transform:"matrix(1 0 0 -1 0 80)",children:[(0,ne.jsx)("rect",{width:"10",height:"20",rx:"3",children:(0,ne.jsx)("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})}),(0,ne.jsx)("rect",{x:"15",width:"10",height:"80",rx:"3",children:(0,ne.jsx)("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})}),(0,ne.jsx)("rect",{x:"30",width:"10",height:"50",rx:"3",children:(0,ne.jsx)("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})}),(0,ne.jsx)("rect",{x:"45",width:"10",height:"30",rx:"3",children:(0,ne.jsx)("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"})})]})})}),(0,ne.jsx)("div",{className:"loading-message",children:(0,ne.jsxs)("h2",{children:[n,(0,ne.jsx)("span",{className:"loading-dots",children:".".repeat(f||1)})]})}),(0,ne.jsxs)("div",{className:"loading-progress-container",children:[(0,ne.jsx)("div",{className:"loading-progress-bar",children:(0,ne.jsx)("div",{className:"loading-progress-fill",style:{width:"".concat(Math.min(u,90),"%")},children:(0,ne.jsx)("div",{className:"loading-progress-shimmer"})})}),(0,ne.jsxs)("div",{className:"loading-progress-text",children:[Math.round(Math.min(u,90)),"%"]})]}),i&&(0,ne.jsx)("div",{className:"loading-tips",children:(0,ne.jsx)("div",{className:"loading-tip",children:m[l]},l)}),(0,ne.jsxs)("div",{className:"loading-stats",children:[(0,ne.jsxs)("div",{className:"loading-stat",children:[(0,ne.jsx)("span",{className:"loading-stat-icon",children:""}),(0,ne.jsx)("span",{className:"loading-stat-label",children:"Fast Loading"})]}),(0,ne.jsxs)("div",{className:"loading-stat",children:[(0,ne.jsx)("span",{className:"loading-stat-icon",children:""}),(0,ne.jsx)("span",{className:"loading-stat-label",children:"Secure"})]}),(0,ne.jsxs)("div",{className:"loading-stat",children:[(0,ne.jsx)("span",{className:"loading-stat-icon",children:""}),(0,ne.jsx)("span",{className:"loading-stat-label",children:"Optimized"})]})]})]}),(0,ne.jsx)("style",{children:"\n\t\t\t\t.ai-media-loading-screen {\n\t\t\t\t\tposition: fixed;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n\t\t\t\t\tz-index: 9999;\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t}\n\n\t\t\t\t.loading-container {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmax-width: 600px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t}\n\n\t\t\t\t/* Audio bars animation */\n\t\t\t\t.loading-animation {\n\t\t\t\t\tmargin: 0 auto 30px;\n\t\t\t\t\twidth: 80px;\n\t\t\t\t\theight: 80px;\n\t\t\t\t\tanimation: pulse 2s ease-in-out infinite;\n\t\t\t\t}\n\n\t\t\t\t.audio-bars {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tfilter: drop-shadow(0 4px 12px rgba(34, 113, 177, 0.3));\n\t\t\t\t}\n\n\t\t\t\t@keyframes pulse {\n\t\t\t\t\t0%, 100% {\n\t\t\t\t\t\ttransform: scale(1);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\ttransform: scale(1.1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* Main message */\n\t\t\t\t.loading-message h2 {\n\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\tcolor: #1e1e1e;\n\t\t\t\t\tmargin: 0 0 30px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tgap: 4px;\n\t\t\t\t}\n\n\t\t\t\t.loading-dots {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tmin-width: 12px;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\tcolor: #2271b1;\n\t\t\t\t}\n\n\t\t\t\t/* Progress bar */\n\t\t\t\t.loading-progress-container {\n\t\t\t\t\tmargin: 30px 0;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tgap: 15px;\n\t\t\t\t}\n\n\t\t\t\t.loading-progress-bar {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\theight: 8px;\n\t\t\t\t\tbackground: rgba(255, 255, 255, 0.5);\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\tbox-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n\t\t\t\t}\n\n\t\t\t\t.loading-progress-fill {\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground: linear-gradient(90deg, #2271b1 0%, #72aee6 100%);\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\ttransition: width 0.3s ease-out;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\n\t\t\t\t.loading-progress-shimmer {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: -100%;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);\n\t\t\t\t\tanimation: shimmer 1.5s infinite;\n\t\t\t\t}\n\n\t\t\t\t@keyframes shimmer {\n\t\t\t\t\t0% {\n\t\t\t\t\t\tleft: -100%;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\tleft: 100%;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.loading-progress-text {\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tcolor: #2271b1;\n\t\t\t\t\tmin-width: 45px;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t/* Rotating tips */\n\t\t\t\t.loading-tips {\n\t\t\t\t\tmargin: 30px 0;\n\t\t\t\t\tmin-height: 50px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\n\t\t\t\t.loading-tip {\n\t\t\t\t\tfont-size: 15px;\n\t\t\t\t\tcolor: #50575e;\n\t\t\t\t\tline-height: 1.6;\n\t\t\t\t\tanimation: fadeInUp 0.5s ease-out;\n\t\t\t\t\tbackground: rgba(255, 255, 255, 0.7);\n\t\t\t\t\tpadding: 12px 20px;\n\t\t\t\t\tborder-radius: 8px;\n\t\t\t\t\tborder-left: 3px solid #2271b1;\n\t\t\t\t\tbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n\t\t\t\t}\n\n\t\t\t\t@keyframes fadeInUp {\n\t\t\t\t\tfrom {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: translateY(10px);\n\t\t\t\t\t}\n\t\t\t\t\tto {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\ttransform: translateY(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* Activity stats */\n\t\t\t\t.loading-stats {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tgap: 40px;\n\t\t\t\t\tmargin-top: 40px;\n\t\t\t\t\tpadding-top: 30px;\n\t\t\t\t\tborder-top: 1px solid rgba(0, 0, 0, 0.1);\n\t\t\t\t}\n\n\t\t\t\t.loading-stat {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tgap: 8px;\n\t\t\t\t\topacity: 0;\n\t\t\t\t\tanimation: fadeIn 0.6s ease-out forwards;\n\t\t\t\t}\n\n\t\t\t\t.loading-stat:nth-child(1) {\n\t\t\t\t\tanimation-delay: 0.2s;\n\t\t\t\t}\n\n\t\t\t\t.loading-stat:nth-child(2) {\n\t\t\t\t\tanimation-delay: 0.4s;\n\t\t\t\t}\n\n\t\t\t\t.loading-stat:nth-child(3) {\n\t\t\t\t\tanimation-delay: 0.6s;\n\t\t\t\t}\n\n\t\t\t\t@keyframes fadeIn {\n\t\t\t\t\tfrom {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\ttransform: scale(0.8);\n\t\t\t\t\t}\n\t\t\t\t\tto {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\ttransform: scale(1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.loading-stat-icon {\n\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\tanimation: bounce 2s ease-in-out infinite;\n\t\t\t\t}\n\n\t\t\t\t.loading-stat:nth-child(2) .loading-stat-icon {\n\t\t\t\t\tanimation-delay: 0.3s;\n\t\t\t\t}\n\n\t\t\t\t.loading-stat:nth-child(3) .loading-stat-icon {\n\t\t\t\t\tanimation-delay: 0.6s;\n\t\t\t\t}\n\n\t\t\t\t@keyframes bounce {\n\t\t\t\t\t0%, 100% {\n\t\t\t\t\t\ttransform: translateY(0);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\ttransform: translateY(-5px);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.loading-stat-label {\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tcolor: #646970;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\ttext-transform: uppercase;\n\t\t\t\t\tletter-spacing: 0.5px;\n\t\t\t\t}\n\n\t\t\t\t/* Responsive adjustments */\n\t\t\t\t@media (max-width: 600px) {\n\t\t\t\t\t.loading-message h2 {\n\t\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.loading-stats {\n\t\t\t\t\t\tgap: 20px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.loading-tip {\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t"})]})};function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const ue=function(t){var e,n,o=t.batchProgress,i=t.processingStatus,a=t.onCancel,l=t.onClose,s=t.cancelledRef,c=(e=(0,r.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return ce(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1];return(0,ne.jsx)("div",{className:"batch-processing-overlay",children:(0,ne.jsxs)("div",{className:"batch-processing-modal",children:[(0,ne.jsx)("h2",{children:"AI Processing in Progress"}),(0,ne.jsxs)("p",{className:"batch-processing-description",children:["Processing ",o.total," images with AI. This may take a few minutes. ",(0,ne.jsx)("strong",{children:"Please do not close this window"}),"."]}),u&&(0,ne.jsx)("div",{className:"cancelling-notice",style:{margin:"15px 0",padding:"12px",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"3px",color:"#856404",fontWeight:"600",textAlign:"center"},children:" Cancelling batch processing... finishing current requests."}),i&&(0,ne.jsx)("div",{className:"processing-status-message",children:i}),(0,ne.jsx)("div",{className:"progress-bar-container",children:(0,ne.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(o.current/o.total*100,"%")}})}),(0,ne.jsxs)("div",{className:"progress-stats",children:[(0,ne.jsxs)("div",{className:"progress-percentage",children:[Math.round(o.current/o.total*100),"%"]}),(0,ne.jsxs)("div",{className:"progress-text",children:[o.current," / ",o.total," images"]})]}),(0,ne.jsxs)("div",{className:"batch-results",children:[(0,ne.jsxs)("div",{className:"batch-result-item",children:[(0,ne.jsx)("div",{className:"result-label",children:"Successful"}),(0,ne.jsx)("div",{className:"success-count",children:o.success.length})]}),(0,ne.jsxs)("div",{className:"batch-result-item",children:[(0,ne.jsx)("div",{className:"result-label",children:"Failed"}),(0,ne.jsx)("div",{className:"failed-count",children:o.failed.length})]}),o.retried>0&&(0,ne.jsxs)("div",{className:"batch-result-item",children:[(0,ne.jsx)("div",{className:"result-label",children:"Retried"}),(0,ne.jsx)("div",{className:"retried-count",style:{color:"#f0b849"},children:o.retried})]})]}),(0,ne.jsx)("div",{className:"modal-actions",children:(0,ne.jsx)("button",{type:"button",onClick:function(){o.current===o.total?l():(d(!0),s&&(s.current=!0),a())},disabled:u,children:o.current===o.total?"Close":"Cancel Processing"})})]})})},de=function(t){var e=t.recentlyProcessed,n=(0,r.useRef)(null);return(0,r.useEffect)(function(){n.current&&e.length>0&&n.current.scrollTo({left:0,behavior:"smooth"})},[e.length]),0===e.length?(0,ne.jsxs)("div",{className:"live-feed-empty",children:[(0,ne.jsx)("div",{className:"empty-icon",children:""}),(0,ne.jsx)("div",{className:"empty-text",children:"Waiting for first image..."})]}):(0,ne.jsxs)("div",{className:"live-image-feed",children:[(0,ne.jsxs)("div",{className:"feed-header",children:[(0,ne.jsx)("span",{className:"feed-icon",children:""}),(0,ne.jsx)("span",{className:"feed-title",children:"Live Feed"}),(0,ne.jsxs)("span",{className:"feed-count",children:[e.length," recent"]})]}),(0,ne.jsx)("div",{className:"feed-scroll-container",ref:n,children:e.map(function(t,e){return(0,ne.jsxs)("div",{className:"feed-item",style:{animationDelay:"".concat(.05*e,"s")},children:[(0,ne.jsxs)("div",{className:"feed-item-image",children:[(0,ne.jsx)("img",{src:t.thumbnail,alt:t.alt,loading:"lazy"}),(0,ne.jsx)("div",{className:"feed-item-overlay",children:(0,ne.jsx)("span",{className:"success-check",children:""})})]}),(0,ne.jsxs)("div",{className:"feed-item-badge",children:["openai"===t.provider&&(0,ne.jsx)("span",{className:"provider-badge openai",title:"OpenAI",children:" GPT"}),"google"===t.provider&&(0,ne.jsx)("span",{className:"provider-badge google",title:"Google",children:" Gemini"})]}),(0,ne.jsx)("div",{className:"feed-item-alt",title:t.alt,children:t.alt.length>30?t.alt.substring(0,30)+"...":t.alt})]},"".concat(t.id,"-").concat(t.timestamp))})})]})};function pe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return fe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var he=[{text:"Teaching AI the difference between a cat and a muffin... ",icon:""},{text:"Converting pixels to poetry... almost there! ",icon:""},{text:"GPU go brrr... ",icon:""},{text:"Training neural networks to appreciate your aesthetic! ",icon:""},{text:"Beep boop... analyzing image... beep boop! ",icon:""},{text:"Your images are now 47% more intelligent! (that's how it works, right?) ",icon:""},{text:"AI is having an existential crisis... just kidding, it's fine! ",icon:""},{text:"Making search engines jealous with these alt texts! ",icon:""},{text:"Breaking: Local AI becomes sentient, still can't spell 'restaurant' ",icon:""},{text:"Your SEO is about to level up! ",icon:""},{text:"Convincing algorithms that your content is THE content! ",icon:""},{text:"AI is working harder than your morning coffee ",icon:""},{text:"Processing at the speed of... well, pretty fast actually! ",icon:""},{text:"Making metadata great again! ",icon:""},{text:"Your images called, they want better descriptions! ",icon:""},{text:"Asking AI nicely to describe your images... please? ",icon:""},{text:"Plot twist: AI thinks all your photos are art! ",icon:""},{text:"Turning jpgs into Shakespeare... kind of! ",icon:""},{text:"AI is consulting its favorite thesaurus... ",icon:""},{text:"Google's crawlers are gonna LOVE this! ",icon:""},{text:"Meanwhile, in the neural network... *dramatic music* ",icon:""},{text:"Warning: AI may over-describe your lunch photos ",icon:""},{text:"Generating descriptions that would make a poet cry... ",icon:""},{text:"AI is definitely not just making stuff up... probably ",icon:""},{text:"Your images are getting their PhDs in metadata! ",icon:""},{text:"Bandwidth called, it's exhausted but committed! ",icon:""},{text:"Teaching machines to see... it's going surprisingly well! ",icon:""},{text:"AI is throwing shade at your old alt texts right now ",icon:""},{text:"Metadata magic in progress... do not disturb! ",icon:""},{text:"Your accessibility score just entered the chat! ",icon:""},{text:"AI working overtime (it doesn't actually need sleep though) ",icon:""},{text:"Summoning the ancient spirits of SEO optimization... ",icon:""},{text:"Error 404: Boring alt texts not found! ",icon:""},{text:"AI is writing captions your grandma could understand! ",icon:""},{text:"Turning 'IMG_1234.jpg' into literary genius... ",icon:""},{text:"Machine learning: because humans are too slow at this ",icon:""},{text:"AI says your images deserve better... fixing now! ",icon:""},{text:"Translating visual vibes into actual words... ",icon:""},{text:"Your website's accessibility just got a promotion! ",icon:""},{text:"AI is channeling its inner poet... results may vary ",icon:""},{text:"Breaking news: Images can now explain themselves! ",icon:""},{text:"Convincing search bots that your site is legendary! ",icon:""},{text:"AI wondering why humans didn't do this sooner... ",icon:""},{text:"Sprinkling some algorithmic pixie dust here... ",icon:""},{text:"Plot twist: The AI actually loves your design choices! ",icon:""}],me={5:{text:" First 5 done! Baby steps to greatness!",icon:""},10:{text:" First 10 done! You're on a roll!",icon:""},25:{text:" Quarter way there! AI is warming up!",icon:""},35:{text:" 35 images! Momentum building nicely!",icon:""},50:{text:" Half century! You're a processing machine!",icon:""},60:{text:" 60 done! Like a rock concert of metadata!",icon:""},75:{text:" Three quarters! Finish line in sight!",icon:""},90:{text:" 90 images! Almost at triple digits!",icon:""},100:{text:" CENTURY! Triple digits baby!",icon:""},125:{text:" 125 strong! Your dedication is showing!",icon:""},150:{text:" 150 images! That's some serious work!",icon:""},175:{text:" 175 processed! What a ride!",icon:""},200:{text:" TWO HUNDRED! Legendary status unlocked!",icon:""},250:{text:" 250 images! This train ain't stopping!",icon:""},300:{text:" THREE HUNDRED! Absolute unit!",icon:""},350:{text:" 350 done! Somewhere over the rainbow!",icon:""},400:{text:" FOUR HUNDRED! Bullseye after bullseye!",icon:""},500:{text:" FIVE HUNDRED! Are you even human?!",icon:""},600:{text:" 600 IMAGES! Diamond hands right here!",icon:""},750:{text:" 750 processed! Definitely alien technology!",icon:""},1e3:{text:" ONE THOUSAND! ABSOLUTE LEGEND!",icon:""},1500:{text:" 1500! You've transcended mortal limits!",icon:""},2e3:{text:" TWO THOUSAND! Is this real life?!",icon:""}};const ye=function(t){var e=t.currentProgress,n=(t.totalImages,pe((0,r.useState)(he[0]),2)),o=n[0],i=n[1],a=pe((0,r.useState)(!1),2),l=a[0],s=a[1];return(0,r.useEffect)(function(){me[e]&&(s(!0),setTimeout(function(){i(me[e]),s(!1)},300),setTimeout(function(){var t=he[Math.floor(Math.random()*he.length)];s(!0),setTimeout(function(){i(t),s(!1)},300)},5e3))},[e]),(0,r.useEffect)(function(){var t=setInterval(function(){s(!0),setTimeout(function(){var t=he[Math.floor(Math.random()*he.length)];i(t),s(!1)},300)},5e3);return function(){return clearInterval(t)}},[]),(0,ne.jsx)("div",{className:"message-rotator",children:(0,ne.jsxs)("div",{className:"message-content ".concat(l?"fade-out":"fade-in"),children:[(0,ne.jsx)("span",{className:"message-icon",children:o.icon}),(0,ne.jsx)("span",{className:"message-text",children:o.text})]})})};function ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ve(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const xe=function(t){var e=t.batchProgress,n=ge((0,r.useState)(0),2),o=n[0],i=n[1],a=ge((0,r.useState)(0),2),l=a[0],s=a[1],c=ge((0,r.useState)(0),2),u=c[0],d=c[1];(0,r.useEffect)(function(){var t=setInterval(function(){if(e.startTime){var t=Math.floor((Date.now()-e.startTime)/1e3);if(i(t),t>0&&e.current>0){var n=e.current/t;s(n);var r=e.total-e.current;d(r/n)}}},1e3);return function(){return clearInterval(t)}},[e.startTime,e.current,e.total]);var p=function(t){if(t<60)return"".concat(Math.round(t),"s");var e=Math.floor(t/60),n=Math.round(t%60);if(e<60)return"".concat(e,":").concat(n.toString().padStart(2,"0"));var r=Math.floor(e/60),o=e%60;return"".concat(r,":").concat(o.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))},f=e.current>0?e.totalCost/e.current:0;return(0,ne.jsx)("div",{className:"live-stats-dashboard",children:(0,ne.jsxs)("div",{className:"stats-grid",children:[(0,ne.jsxs)("div",{className:"stat-card",children:[(0,ne.jsx)("div",{className:"stat-icon",children:""}),(0,ne.jsxs)("div",{className:"stat-content",children:[(0,ne.jsx)("div",{className:"stat-value",children:l.toFixed(2)}),(0,ne.jsx)("div",{className:"stat-label",children:"img/sec"})]})]}),(0,ne.jsxs)("div",{className:"stat-card",children:[(0,ne.jsx)("div",{className:"stat-icon",children:""}),(0,ne.jsxs)("div",{className:"stat-content",children:[(0,ne.jsxs)("div",{className:"stat-value",children:["$",e.totalCost.toFixed(4)]}),(0,ne.jsx)("div",{className:"stat-label",children:"Total Cost"}),(0,ne.jsxs)("div",{className:"stat-sublabel",children:["$",f.toFixed(5),"/img"]})]})]}),(0,ne.jsxs)("div",{className:"stat-card",children:[(0,ne.jsx)("div",{className:"stat-icon",children:""}),(0,ne.jsxs)("div",{className:"stat-content",children:[(0,ne.jsx)("div",{className:"stat-value",children:p(o)}),(0,ne.jsx)("div",{className:"stat-label",children:"Elapsed"})]})]}),(0,ne.jsxs)("div",{className:"stat-card",children:[(0,ne.jsx)("div",{className:"stat-icon",children:""}),(0,ne.jsxs)("div",{className:"stat-content",children:[(0,ne.jsx)("div",{className:"stat-value",children:p(u)}),(0,ne.jsx)("div",{className:"stat-label",children:"ETA"})]})]})]})})};function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const je=function(t){var e,n,o=t.batchProgress,i=(t.processingStatus,t.onCancel),a=t.onClose,l=t.cancelledRef,s=(e=(0,r.useState)(!1),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return be(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],u=s[1];return(0,ne.jsx)("div",{className:"batch-processing-overlay enhanced",children:(0,ne.jsxs)("div",{className:"batch-processing-modal enhanced",children:[(0,ne.jsxs)("div",{className:"modal-header",children:[(0,ne.jsx)("h2",{children:" AI Processing Cinema"}),(0,ne.jsx)("div",{className:"header-subtitle",children:"Sit back, relax, and watch the magic happen "})]}),c&&(0,ne.jsx)("div",{className:"cancelling-notice",children:" Cancelling batch processing... finishing current requests."}),(0,ne.jsx)(de,{recentlyProcessed:o.recentlyProcessed||[]}),(0,ne.jsx)(ye,{currentProgress:o.current,totalImages:o.total}),(0,ne.jsxs)("div",{className:"enhanced-progress-section",children:[(0,ne.jsx)("div",{className:"progress-bar-container enhanced",children:(0,ne.jsx)("div",{className:"progress-bar-fill enhanced",style:{width:"".concat(o.current/o.total*100,"%")}})}),(0,ne.jsxs)("div",{className:"progress-stats-row",children:[(0,ne.jsxs)("div",{className:"progress-percentage",children:[Math.round(o.current/o.total*100),"%"]}),(0,ne.jsxs)("div",{className:"progress-text",children:[o.current," / ",o.total," images"]})]})]}),(0,ne.jsx)(xe,{batchProgress:o}),(0,ne.jsxs)("div",{className:"batch-results enhanced",children:[(0,ne.jsxs)("div",{className:"batch-result-item success",children:[(0,ne.jsxs)("div",{className:"result-value",children:[o.success.length," ",(0,ne.jsx)("span",{className:"result-icon",children:""})]}),(0,ne.jsx)("div",{className:"result-label",children:"Successful"})]}),(0,ne.jsxs)("div",{className:"batch-result-item failed",children:[(0,ne.jsxs)("div",{className:"result-value",children:[o.failed.length," ",(0,ne.jsx)("span",{className:"result-icon",children:""})]}),(0,ne.jsx)("div",{className:"result-label",children:"Failed"})]}),o.retried>0&&(0,ne.jsxs)("div",{className:"batch-result-item retried",children:[(0,ne.jsxs)("div",{className:"result-value",children:[o.retried," ",(0,ne.jsx)("span",{className:"result-icon",children:""})]}),(0,ne.jsx)("div",{className:"result-label",children:"Retried"})]})]}),(0,ne.jsx)("div",{className:"modal-actions",children:(0,ne.jsx)("button",{type:"button",className:"action-button",onClick:function(){o.current===o.total?a():(u(!0),l&&(l.current=!0),i())},disabled:c,children:o.current===o.total?" Close":" Cancel Processing"})})]})})},Se=function(t){var e=t.batchProgress,n=t.processingStatus,r=t.onCancel,o=t.onClose,i=t.cancelledRef;return null!=e&&e.active?e.total>20?(0,ne.jsx)(je,{batchProgress:e,processingStatus:n,onCancel:r,onClose:o,cancelledRef:i}):(0,ne.jsx)(ue,{batchProgress:e,processingStatus:n,onCancel:r,onClose:o,cancelledRef:i}):null},we=window.wp.components,Oe=function(t){var e=t.isOpen,n=t.onClose,r=t.search,o=t.onSearchChange,i=t.onSearch,a=t.onClearSearch,l=t.searching,s=t.results,c=void 0===s?[]:s,u=t.selected,d=t.onSelect,p=t.onConfirm;return e?(0,ne.jsxs)(we.Modal,{title:"Attach to existing content",onRequestClose:n,className:"ai-media-attach-modal",style:{maxWidth:"720px",width:"90%"},children:[(0,ne.jsx)("div",{className:"find-box-search",style:{padding:"20px",background:"#fff",borderBottom:"1px solid #dcdcde"},children:(0,ne.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[(0,ne.jsxs)("div",{style:{position:"relative",flex:"1",minWidth:"0"},children:[(0,ne.jsx)("input",{type:"text",value:r,onChange:function(t){return o(t.target.value)},onKeyDown:function(t){return"Enter"===t.key&&i()},placeholder:"Search posts, pages, and custom post types...",style:{width:"100%",padding:"8px 12px",paddingRight:r?"32px":"12px",fontSize:"14px",border:"1px solid #8c8f94",borderRadius:"3px",boxSizing:"border-box",minHeight:"38px",transition:"border-color 0.2s ease"},onFocus:function(t){return t.target.style.borderColor="#2271b1"},onBlur:function(t){return t.target.style.borderColor="#8c8f94"}}),r&&(0,ne.jsx)("button",{type:"button",onClick:a,style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",padding:"4px",color:"#646970",fontSize:"18px",lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"3px"},onMouseEnter:function(t){return t.target.style.background="#f0f0f1"},onMouseLeave:function(t){return t.target.style.background="none"},title:"Clear search",children:""})]}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:i,isBusy:l,disabled:l,style:{minHeight:"38px",whiteSpace:"nowrap"},children:"Search"})]})}),(0,ne.jsx)("div",{className:"find-box-response",style:{padding:"0"},children:0===c.length?(0,ne.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"#646970",minHeight:"400px"},children:l?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{style:{width:"20px",height:"20px",border:"3px solid #f0f0f1",borderTop:"3px solid #2271b1",borderRadius:"50%",animation:"spin 0.8s linear infinite",marginBottom:"16px"}}),(0,ne.jsx)("p",{style:{margin:"0",fontSize:"14px",fontWeight:"500"},children:"Searching content..."})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("span",{style:{fontSize:"48px",marginBottom:"16px",opacity:"0.3"},children:""}),(0,ne.jsx)("p",{style:{margin:"0",fontSize:"14px",fontWeight:"500",color:"#1d2327"},children:"No content found"}),(0,ne.jsx)("p",{style:{margin:"8px 0 0",fontSize:"13px"},children:"Try searching for posts, pages, or other content types"})]})}):(0,ne.jsxs)("table",{className:"widefat",style:{marginBottom:"100px"},children:[(0,ne.jsx)("thead",{children:(0,ne.jsxs)("tr",{children:[(0,ne.jsx)("th",{style:{width:"40px"}}),(0,ne.jsx)("th",{children:"Title"}),(0,ne.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Type"}),(0,ne.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Date"}),(0,ne.jsx)("th",{style:{whiteSpace:"nowrap"},children:"Status"})]})}),(0,ne.jsx)("tbody",{children:c.map(function(t,e){return(0,ne.jsxs)("tr",{className:e%2==0?"":"alternate",children:[(0,ne.jsx)("td",{style:{textAlign:"center"},children:(0,ne.jsx)("input",{type:"radio",name:"found_post_id",value:t.id,checked:(null==u?void 0:u.id)===t.id,onChange:function(){return d(t)},id:"found-".concat(t.id)})}),(0,ne.jsx)("td",{children:(0,ne.jsx)("label",{htmlFor:"found-".concat(t.id),style:{cursor:"pointer"},children:t.title})}),(0,ne.jsx)("td",{style:{whiteSpace:"nowrap"},children:t.typeName||t.type}),(0,ne.jsx)("td",{style:{whiteSpace:"nowrap"},children:(n=t.date,r=new Date(n),o=r.getDate(),i=r.getMonth()+1,a=r.getFullYear(),"".concat(i,"/").concat(o,"/").concat(a))}),(0,ne.jsx)("td",{style:{whiteSpace:"nowrap"},children:t.status})]},t.id);var n,r,o,i,a})})]})}),(0,ne.jsxs)("div",{className:"find-box-buttons",style:{padding:"20px",borderTop:"1px solid #dcdcde",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px",background:"#fff"},children:[(0,ne.jsx)("div",{style:{flex:"1",minWidth:"0"},children:u&&(0,ne.jsxs)("div",{style:{fontSize:"13px",color:"#646970",display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{style:{display:"inline-block",width:"6px",height:"6px",borderRadius:"50%",background:"#00a32a"}}),(0,ne.jsx)("span",{style:{fontWeight:"500",color:"#1d2327"},children:"Selected:"}),(0,ne.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u.title})]})}),(0,ne.jsxs)("div",{style:{display:"flex",gap:"8px",flexShrink:"0"},children:[(0,ne.jsx)(we.Button,{variant:"secondary",onClick:n,children:"Close"}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:p,disabled:!u,children:"Select"})]})]})]}):null},ke=function(t){var e=t.isOpen,n=t.onClose,r=t.fileInputRef,o=t.onFileSelect,i=t.isDragging,a=t.onDragEnter,l=t.onDragLeave,s=t.onDragOver,c=t.onDrop,u=t.uploading,d=t.uploadFiles,p=t.onStartUpload,f=t.uploadProgress,h=t.onRemoveFile;return e?(0,ne.jsx)(we.Modal,{title:"Drop files to upload",onRequestClose:n,className:"ai-media-upload-modal",children:(0,ne.jsxs)("div",{className:"upload-modal-content",children:[(0,ne.jsx)("input",{ref:r,type:"file",multiple:!0,accept:"image/*",style:{display:"none"},onChange:o}),(0,ne.jsx)("div",{className:"upload-drop-zone ".concat(i?"dragging":""),onDragEnter:a,onDragLeave:l,onDragOver:s,onDrop:c,onClick:function(){var t;return!u&&(null===(t=r.current)||void 0===t?void 0:t.click())},children:(0,ne.jsxs)("div",{className:"upload-drop-zone-content",children:[(0,ne.jsx)("span",{className:"dashicons dashicons-upload",style:{fontSize:"80px",color:"#c3c4c7",marginBottom:"55px",marginLeft:"-55px"}}),(0,ne.jsx)("p",{style:{fontSize:"18px",margin:"0 0 8px 0",color:"#1d2327"},children:i?"Drop files here":"Drop images here"}),(0,ne.jsx)("p",{style:{fontSize:"14px",margin:"0 0 16px 0",color:"#646970"},children:"or"}),(0,ne.jsx)(we.Button,{variant:"primary",disabled:u,children:"Select Files"}),(0,ne.jsx)("p",{style:{fontSize:"13px",margin:"16px 0 0 0",color:"#646970",fontStyle:"italic"},children:"Maximum upload file size: 128 MB"})]})}),d.length>0&&(0,ne.jsxs)("div",{className:"upload-modal-actions",style:{display:"flex",justifyContent:"center",gap:"12px",marginTop:"20px",paddingTop:"20px",borderTop:"1px solid #dcdcde"},children:[(0,ne.jsx)(we.Button,{variant:"secondary",onClick:n,disabled:u,children:"Close"}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:p,disabled:0===d.length||u,isBusy:u,children:u?"Uploading...":"Upload (".concat(d.length,")")})]}),d.length>0&&(0,ne.jsxs)("div",{className:"upload-file-list",children:[(0,ne.jsx)("h3",{style:{fontSize:"14px",fontWeight:"600",margin:"24px 0 12px 0",color:"#1d2327"},children:"Upload Progress"}),(0,ne.jsx)("div",{className:"upload-files",children:d.map(function(t,e){var n=f[t.name]||{status:"pending",progress:0};return(0,ne.jsxs)("div",{className:"upload-file-item",children:[(0,ne.jsxs)("div",{className:"upload-file-info",children:[(0,ne.jsx)("span",{className:"upload-file-name",children:t.name}),(0,ne.jsxs)("span",{className:"upload-file-size",children:[(t.size/1024/1024).toFixed(2)," MB"]})]}),(0,ne.jsxs)("div",{className:"upload-file-status",children:["pending"===n.status&&(0,ne.jsx)("button",{type:"button",className:"upload-file-remove",onClick:function(){return h(t.name)},disabled:u,children:(0,ne.jsx)("span",{className:"dashicons dashicons-no-alt"})}),"uploading"===n.status&&(0,ne.jsx)(we.Spinner,{}),"completed"===n.status&&(0,ne.jsx)("span",{className:"dashicons dashicons-yes-alt",style:{color:"#00a32a",fontSize:"20px"}}),"failed"===n.status&&(0,ne.jsx)("span",{className:"dashicons dashicons-warning",style:{color:"#d63638",fontSize:"20px"},title:n.error})]})]},e)})})]})]})}):null};function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Ae=function(t){var e=t.isOpen,n=t.onClose,r=t.costStats,o=t.costBreakdown,i=t.liveTotalCost;return e?(0,ne.jsx)(we.Modal,{title:"Cost Statistics",onRequestClose:n,style:{maxWidth:"800px"},children:(0,ne.jsx)("div",{children:r&&o?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsxs)("div",{style:{background:"#f0f6fc",padding:"20px",borderRadius:"8px",marginBottom:"24px",border:"1px solid #c3e7ff"},children:[(0,ne.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#1d2327",display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-chart-bar",style:{color:"#2271b1"}}),"Overall Statistics"]}),(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[(0,ne.jsxs)("div",{children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:"Total Cost"}),(0,ne.jsxs)("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2271b1"},children:["$",(void 0!==i?i:r.total_cost).toFixed(4)]})]}),(0,ne.jsxs)("div",{children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:"Images Processed"}),(0,ne.jsx)("div",{style:{fontSize:"24px",fontWeight:"600",color:"#1d2327"},children:r.total_images_processed.toLocaleString()})]}),(0,ne.jsxs)("div",{children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:"Avg Cost/Image"}),(0,ne.jsxs)("div",{style:{fontSize:"24px",fontWeight:"600",color:"#1d2327"},children:["$",r.average_cost_per_image.toFixed(6)]})]})]}),(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginTop:"16px"},children:[(0,ne.jsxs)("div",{children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:"Total Tokens Used"}),(0,ne.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1d2327"},children:r.total_tokens_used.toLocaleString()})]}),(0,ne.jsxs)("div",{style:{gridColumn:"3"},children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#646970",marginBottom:"4px"},children:"Most Expensive Model"}),(0,ne.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#1d2327"},children:r.most_expensive_model||"N/A"})]})]}),r.last_sync&&(0,ne.jsxs)("div",{style:{marginTop:"16px",fontSize:"12px",color:"#646970"},children:["Last pricing update: ",r.last_sync]})]}),(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",color:"#1d2327",display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-performance",style:{color:"#2271b1"}}),"Cost Breakdown by Model"]}),(0,ne.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #c3c4c7",background:"#fff"},children:[(0,ne.jsx)("thead",{children:(0,ne.jsxs)("tr",{style:{background:"#f6f7f7",borderBottom:"2px solid #c3c4c7"},children:[(0,ne.jsx)("th",{style:{padding:"12px",textAlign:"left",fontSize:"13px",fontWeight:"600"},children:"Model"}),(0,ne.jsx)("th",{style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"600"},children:"Images"}),(0,ne.jsx)("th",{style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"600"},children:"Input Tokens"}),(0,ne.jsx)("th",{style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"600"},children:"Output Tokens"}),(0,ne.jsx)("th",{style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"600"},children:"Total Cost"})]})}),(0,ne.jsx)("tbody",{children:0===Object.keys(o.by_model).length?(0,ne.jsx)("tr",{children:(0,ne.jsx)("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#646970"},children:"No cost data available yet. Process some images to see statistics."})}):Object.entries(o.by_model).map(function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Ce(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];return(0,ne.jsxs)("tr",{style:{borderBottom:"1px solid #c3c4c7"},children:[(0,ne.jsx)("td",{style:{padding:"12px",fontSize:"13px",fontWeight:"500"},children:o}),(0,ne.jsx)("td",{style:{padding:"12px",textAlign:"right",fontSize:"13px"},children:i.jobs.toLocaleString()}),(0,ne.jsx)("td",{style:{padding:"12px",textAlign:"right",fontSize:"13px",color:"#646970"},children:i.input_tokens.toLocaleString()}),(0,ne.jsx)("td",{style:{padding:"12px",textAlign:"right",fontSize:"13px",color:"#646970"},children:i.output_tokens.toLocaleString()}),(0,ne.jsxs)("td",{style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"600",color:"#2271b1"},children:["$",i.total_cost.toFixed(6)]})]},o)})}),Object.keys(o.by_model).length>0&&(0,ne.jsx)("tfoot",{children:(0,ne.jsxs)("tr",{style:{background:"#f6f7f7",borderTop:"2px solid #c3c4c7"},children:[(0,ne.jsx)("td",{style:{padding:"12px",fontSize:"13px",fontWeight:"600"},children:"Total"}),(0,ne.jsx)("td",{style:{padding:"12px",textAlign:"right",fontSize:"13px",fontWeight:"600"},children:o.total_jobs.toLocaleString()}),(0,ne.jsx)("td",{colSpan:"2"}),(0,ne.jsxs)("td",{style:{padding:"12px",textAlign:"right",fontSize:"14px",fontWeight:"700",color:"#2271b1"},children:["$",o.total_cost.toFixed(6)]})]})})]})]}),(0,ne.jsxs)("div",{style:{marginTop:"20px",padding:"12px",background:"#f9f9f9",border:"1px solid #c3c4c7",borderRadius:"4px",fontSize:"12px",color:"#646970"},children:[(0,ne.jsx)("strong",{children:"Note:"})," Costs are calculated based on current model pricing and actual token usage. Pricing is updated daily from external sources."]})]}):(0,ne.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(0,ne.jsx)(we.Spinner,{})})})}):null};function Te(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Pe=function(t){var e,n,r=t.provider,o=t.isPrimary,i=t.hasApiKey,a=t.providers,l=t.onUpdateProvider,s=t.onSetPrimary;return(0,ne.jsxs)(we.Card,{style:{flex:"0 0 calc(50% - 8px)",maxWidth:"calc(50% - 8px)",marginBottom:"0",border:o?"2px solid #2271b1":"1px solid #dcdcde",position:"relative",boxSizing:"border-box"},children:[(0,ne.jsx)(we.CardHeader,{style:{background:o?"#f0f6fc":"transparent",borderBottom:o?"1px solid #2271b1":"1px solid #dcdcde"},children:(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,ne.jsx)("style",{children:"\n\t\t\t\t\t\t\t\t.provider-radio-button:checked::before {\n\t\t\t\t\t\t\t\t\tmargin: 0.31rem !important;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t"}),(0,ne.jsx)("input",{type:"radio",name:"primary_provider",value:r.id,checked:o,onChange:function(){return s(r.id)},className:"provider-radio-button",style:{width:"20px",height:"20px",cursor:"pointer"}}),(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[r.name,o&&(0,ne.jsx)("span",{style:{background:"#2271b1",color:"#fff",padding:"2px 8px",borderRadius:"3px",fontSize:"11px",fontWeight:"bold",textTransform:"uppercase"},children:"Active"})]}),(0,ne.jsx)("p",{style:{margin:"4px 0 0 0",color:"#757575",fontSize:"13px"},children:r.description})]})]}),i&&(0,ne.jsx)("span",{className:"dashicons dashicons-yes-alt",style:{color:"#00a32a",fontSize:"24px"},title:"API Key configured"})]})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsx)(we.TextControl,{label:"API Key",type:"password",value:(null===(e=a[r.id])||void 0===e?void 0:e.api_key)||"",onChange:function(t){return l(r.id,"api_key",t)},help:"Get your API key from ".concat(r.helpUrl||("OpenAI (ChatGPT)"===r.name?"platform.openai.com":"Anthropic (Claude)"===r.name?"console.anthropic.com":"console.cloud.google.com")),placeholder:"sk-..."}),Object.keys(r.models).length>1&&(0,ne.jsx)(we.SelectControl,{label:"Model",value:(null===(n=a[r.id])||void 0===n?void 0:n.model)||Object.keys(r.models)[0],options:Object.entries(r.models).map(function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Te(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Te(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0];return{label:r[1],value:o}}),onChange:function(t){return l(r.id,"model",t)},help:"Select which AI model to use for image analysis",style:{minHeight:"38px"}})]})]})};function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(n),!0).forEach(function(e){Ee(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ee(t,e,n){return(e=function(t){var e=function(t){if("object"!=_e(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_e(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const ze=function(t){var e,n,r,o=t.providers,i=t.setProviders,a=t.setShowModal,l=t.setModalMessage,s=function(t,e,n){var r;if("api_key"===e&&""===n.trim()&&null!==(r=o[t])&&void 0!==r&&r.primary)return l("Cannot remove API key from the active provider. Please select a different provider first."),void a(!0);i(Ne(Ne({},o),{},Ee({},t,Ne(Ne({},o[t]),{},Ee({},e,n)))))},c=function(t){var e;if(null===(e=o[t])||void 0===e||!e.api_key||""===o[t].api_key.trim())return l("Please add an API key for this provider before selecting it as primary."),void a(!0);var n={};Object.keys(o).forEach(function(e){n[e]=Ne(Ne({},o[e]),{},{primary:e===t})}),i(n)},u=Object.keys(o).find(function(t){var e;return null===(e=o[t])||void 0===e?void 0:e.primary})||"openai",d=[{id:"openai",name:"OpenAI (ChatGPT)",description:"GPT-4o Vision - Best for general image analysis",models:(null===(e=window.aiMediaSEO)||void 0===e||null===(e=e.provider_models)||void 0===e?void 0:e.openai)||{},helpUrl:"platform.openai.com"},{id:"google",name:"Google (Gemini)",description:"Gemini Pro Vision - Fast and accurate",models:(null===(n=window.aiMediaSEO)||void 0===n||null===(n=n.provider_models)||void 0===n?void 0:n.google)||{},helpUrl:"console.cloud.google.com"},{id:"anthropic",name:"Anthropic (Claude)",description:"Claude 3.5 Sonnet - Advanced contextual understanding",models:(null===(r=window.aiMediaSEO)||void 0===r||null===(r=r.provider_models)||void 0===r?void 0:r.anthropic)||{},helpUrl:"console.anthropic.com"}];return(0,ne.jsxs)("div",{className:"ai-media-providers-tab",children:[(0,ne.jsx)(we.Card,{style:{marginBottom:"20px",background:"#f0f6fc",borderLeft:"4px solid #2271b1"},children:(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsxs)("h3",{style:{marginTop:0,marginBottom:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-info",style:{fontSize:"20px",marginRight:"8px"}}),"Select Your AI Provider"]}),(0,ne.jsx)("p",{style:{margin:0,color:"#1d2327"},children:"Choose which AI service will analyze your images and generate metadata."})]})}),(0,ne.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"},children:d.map(function(t){var e,n=u===t.id,r=(null===(e=o[t.id])||void 0===e||null===(e=e.api_key)||void 0===e?void 0:e.length)>0;return(0,ne.jsx)(Pe,{provider:t,isPrimary:n,hasApiKey:r,providers:o,onUpdateProvider:s,onSetPrimary:c},t.id)})})]})},De=function(t){var e=t.variant,n=t.onShowPreview;return(0,ne.jsxs)(we.Card,{style:{background:"#f0f6fc",borderLeft:"4px solid ".concat(e.color)},children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsxs)("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-admin-generic",style:{fontSize:"20px",color:e.color}}),e.name," Variant"]})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsx)("div",{style:{background:e.color,color:"#fff",padding:"8px 12px",borderRadius:"4px",marginBottom:"16px",fontSize:"13px",fontWeight:"600",textAlign:"center"},children:e.description}),(0,ne.jsxs)("div",{style:{background:"#fff",border:"1px solid #dcdcde",borderRadius:"4px",padding:"12px",marginBottom:"16px"},children:[(0,ne.jsxs)("h4",{style:{fontSize:"12px",fontWeight:"600",marginTop:0,marginBottom:"10px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-chart-bar",style:{fontSize:"16px",color:e.color}}),"Estimated Token Usage per Image:"]}),(0,ne.jsxs)("div",{style:{fontSize:"12px",lineHeight:"1.8"},children:[(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"},children:[(0,ne.jsx)("span",{style:{color:"#646970"},children:"Text prompt:"}),(0,ne.jsxs)("strong",{children:[e.promptTokens," tokens"]})]}),(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0",borderBottom:"1px solid #dcdcde"},children:[(0,ne.jsx)("span",{style:{color:"#646970"},children:"Image file:"}),(0,ne.jsxs)("strong",{children:[e.imageTokens," tokens"]})]}),(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0 4px 0",fontSize:"13px",fontWeight:"600",color:e.color},children:[(0,ne.jsx)("span",{children:"Total:"}),(0,ne.jsxs)("span",{children:[e.totalTokens," tokens"]})]})]}),(0,ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"11px",color:"#646970",fontStyle:"italic"},children:"Image token count varies by file size, resolution, and format. Higher resolution images consume more tokens."})]}),(0,ne.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,ne.jsx)("h4",{style:{fontSize:"12px",fontWeight:"600",marginBottom:"12px",color:e.color},children:"What AI Receives:"}),(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("div",{style:{fontSize:"11px",fontWeight:"600",marginBottom:"6px",color:"#00a32a",display:"flex",alignItems:"center",gap:"4px"},children:[(0,ne.jsx)("span",{children:""})," Included"]}),(0,ne.jsx)("ul",{style:{margin:0,paddingLeft:"16px",fontSize:"11px",lineHeight:"1.7"},children:e.included.map(function(t,e){return(0,ne.jsx)("li",{style:{marginBottom:"2px"},children:t},e)})})]}),(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("div",{style:{fontSize:"11px",fontWeight:"600",marginBottom:"6px",color:"#d63638",display:"flex",alignItems:"center",gap:"4px"},children:[(0,ne.jsx)("span",{children:""})," Not Included"]}),(0,ne.jsx)("ul",{style:{margin:0,paddingLeft:"16px",fontSize:"11px",lineHeight:"1.7",color:"#646970"},children:e.notIncluded.map(function(t,e){return(0,ne.jsx)("li",{style:{marginBottom:"2px"},children:t},e)})})]})]})]}),(0,ne.jsxs)("div",{style:{background:"#fff",border:"1px solid ".concat(e.color,"33"),borderRadius:"4px",padding:"12px",marginBottom:"12px"},children:[(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-thumbs-up",style:{color:e.color,fontSize:"16px"}}),(0,ne.jsx)("strong",{style:{fontSize:"12px"},children:"Best For:"})]}),(0,ne.jsx)("p",{style:{margin:0,fontSize:"12px",lineHeight:"1.6",color:"#3c434a"},children:e.bestFor})]}),(0,ne.jsxs)(we.Button,{variant:"secondary",onClick:n,style:{width:"100%"},children:[" Preview ",e.name," Prompt"]})]})]})};function Me(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return Be(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Be(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Be(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Be(d,"constructor",c),Be(c,"constructor",s),s.displayName="GeneratorFunction",Be(c,o,"GeneratorFunction"),Be(d),Be(d,o,"Generator"),Be(d,r,function(){return this}),Be(d,"toString",function(){return"[object Generator]"}),(Me=function(){return{w:i,m:p}})()}function Be(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Be=function(t,e,n,r){function i(e,n){Be(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Be(t,e,n,r)}function Fe(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function Re(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Le(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Ge=function(t){var e,n=t.isOpen,o=t.onClose,a=t.variant,l=t.settings,s=t.selectedVariant,c=Re((0,r.useState)(""),2),u=c[0],d=c[1],p=Re((0,r.useState)(!1),2),f=p[0],h=p[1],m=Re((0,r.useState)(null),2),y=m[0],g=m[1];return(0,r.useEffect)(function(){if(n){var t=function(){var t,e=(t=Me().m(function t(){var e,n;return Me().w(function(t){for(;;)switch(t.p=t.n){case 0:return h(!0),g(null),t.p=1,t.n=2,i()({path:"/ai-media/v1/settings/prompt-preview",method:"POST",data:{variant:s,language:l.primary_language||"en"}});case 2:e=t.v,d(e.prompt),t.n=4;break;case 3:t.p=3,n=t.v,g(n.message||"Failed to load prompt preview");case 4:return t.p=4,h(!1),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Fe(i,r,o,a,l,"next",t)}function l(t){Fe(i,r,o,a,l,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}();t()}},[n,s,l.primary_language,l.ai_role,l.site_context,l.alt_max_length]),n?(0,ne.jsxs)(we.Modal,{title:"".concat(a.name," Prompt Structure Preview"),onRequestClose:o,style:{maxWidth:"800px",width:"90vw"},shouldCloseOnClickOutside:!1,isDismissible:!0,children:[(0,ne.jsxs)("div",{style:{fontFamily:"monospace",fontSize:"12px",lineHeight:"1.6"},children:[(0,ne.jsxs)("div",{style:{background:a.color,color:"#fff",padding:"8px 16px",borderRadius:"4px",marginBottom:"16px",fontSize:"13px",fontWeight:"600",textAlign:"center"},children:[a.name," Variant  ",a.totalTokens]}),(0,ne.jsxs)("div",{style:{background:"#f0f0f0",padding:"16px",borderRadius:"4px",marginBottom:"16px",overflowX:"auto",minHeight:"200px"},children:[f&&(0,ne.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,ne.jsx)(we.Spinner,{}),(0,ne.jsx)("p",{style:{marginTop:"12px",color:"#646970"},children:"Loading actual prompt from PromptBuilder..."})]}),y&&(0,ne.jsxs)("div",{style:{color:"#dc3232",padding:"12px"},children:[(0,ne.jsx)("strong",{children:"Error:"})," ",y]}),!f&&!y&&(0,ne.jsx)("pre",{style:{margin:0,whiteSpace:"pre-wrap",wordWrap:"break-word"},children:u})]}),(0,ne.jsxs)("div",{style:{background:"#f0f6fc",padding:"12px",borderRadius:"4px",borderLeft:"4px solid ".concat(a.color)},children:[(0,ne.jsxs)("strong",{style:{display:"block",marginBottom:"8px",fontSize:"13px"},children:[" Included in ",a.name,":"]}),(0,ne.jsx)("ul",{style:{margin:0,paddingLeft:"20px",fontSize:"12px",lineHeight:"1.8"},children:null===(e=a.included)||void 0===e?void 0:e.map(function(t,e){return(0,ne.jsx)("li",{children:t},e)})})]})]}),(0,ne.jsxs)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"},children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#646970"},children:"Switch variants in settings to compare"}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:o,children:"Close"})]})]}):null};var Ue={minimal:{name:"Minimal",description:"Fast & Cost-Effective",promptTokens:"~100-150",imageTokens:"~1,500-2,500",totalTokens:"~1,600-2,650",color:"#00a32a",included:["Site context","Page title","Categories & tags","Filename hint","Image format/orientation"],notIncluded:["Page description","Post type","Image dimensions","Current ALT text","Author metadata","EXIF data","Analysis strategy"],bestFor:"High-volume processing, tight budgets, simple sites"},standard:{name:"Standard",description:"Balanced (Recommended)",promptTokens:"~200-300",imageTokens:"~1,500-2,500",totalTokens:"~1,700-2,800",color:"#2271b1",included:["Site context","Page title & description","Categories & tags","Filename, format & dimensions","Current ALT text","Author metadata (title, caption, description)","EXIF title & caption"],notIncluded:["Post type","Full EXIF (camera, date, location)","Analysis strategy section"],bestFor:"Most websites - optimal balance of quality and cost"},advanced:{name:"Advanced",description:"Maximum Context",promptTokens:"~400-500",imageTokens:"~1,500-2,500",totalTokens:"~1,900-3,000",color:"#d63638",included:["Site context","Page title & description","Categories, tags & post type","Filename, format & dimensions","Current ALT text","Author metadata (full)","Complete EXIF data (camera, date, location, copyright)","Analysis strategy & pattern detection"],notIncluded:["(All available context included)"],bestFor:"Premium sites, landing pages, where quality is paramount"}};function We(t){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},We(t)}function He(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?He(Object(n),!0).forEach(function(e){$e(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function $e(t,e,n){return(e=function(t){var e=function(t){if("object"!=We(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==We(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ve(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Ye=function(t){var e=t.settings,n=t.setSettings,o=Ke((0,r.useState)(!1),2),i=o[0],a=o[1],l=Ke((0,r.useState)("standard"),2),s=l[0],c=l[1],u=e.prompt_variant||"standard",d=function(t){c(t),a(!0)};return(0,ne.jsxs)("div",{children:[(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsx)("h3",{children:"Prompt Detail Level"})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsxs)("p",{style:{marginBottom:"20px",color:"#646970"},children:["Control how much text context is sent to the AI. More context = better quality but higher cost.",(0,ne.jsx)("br",{}),(0,ne.jsx)("strong",{children:"Note:"})," Image file size adds ~1,500-2,500 tokens regardless of variant selected."]}),(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"30px"},children:[(0,ne.jsxs)("label",{style:{display:"flex",flexDirection:"column",padding:"16px",border:"minimal"===u?"3px solid #d63638":"2px solid #dcdcde",borderRadius:"8px",cursor:"pointer",backgroundColor:"minimal"===u?"#fff5f5":"white",transition:"all 0.2s"},children:[(0,ne.jsx)("input",{type:"radio",value:"minimal",checked:"minimal"===u,onChange:function(t){return n(qe(qe({},e),{},{prompt_variant:t.target.value}))},style:{marginBottom:"12px"}}),(0,ne.jsx)("div",{style:{textAlign:"center",marginBottom:"12px"},children:(0,ne.jsx)("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:700,backgroundColor:"#d63638",color:"white",textTransform:"uppercase",display:"inline-block"},children:" Minimal"})}),(0,ne.jsxs)("div",{style:{textAlign:"center",marginBottom:"8px"},children:[(0,ne.jsx)("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"4px"},children:Ue.minimal.description}),(0,ne.jsxs)("div",{style:{fontSize:"12px",color:"#646970"},children:[Ue.minimal.promptTokens," text tokens"]})]})]}),(0,ne.jsxs)("label",{style:{display:"flex",flexDirection:"column",padding:"16px",border:"standard"===u?"3px solid #2271b1":"2px solid #dcdcde",borderRadius:"8px",cursor:"pointer",backgroundColor:"standard"===u?"#f0f6fc":"white",transition:"all 0.2s"},children:[(0,ne.jsx)("input",{type:"radio",value:"standard",checked:"standard"===u,onChange:function(t){return n(qe(qe({},e),{},{prompt_variant:t.target.value}))},style:{marginBottom:"12px"}}),(0,ne.jsx)("div",{style:{textAlign:"center",marginBottom:"12px"},children:(0,ne.jsx)("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:700,backgroundColor:"#2271b1",color:"white",textTransform:"uppercase",display:"inline-block"},children:" Standard"})}),(0,ne.jsxs)("div",{style:{textAlign:"center",marginBottom:"8px"},children:[(0,ne.jsx)("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"4px"},children:Ue.standard.description}),(0,ne.jsxs)("div",{style:{fontSize:"12px",color:"#646970"},children:[Ue.standard.promptTokens," text tokens"]})]})]}),(0,ne.jsxs)("label",{style:{display:"flex",flexDirection:"column",padding:"16px",border:"advanced"===u?"3px solid #00a32a":"2px solid #dcdcde",borderRadius:"8px",cursor:"pointer",backgroundColor:"advanced"===u?"#f0f9f4":"white",transition:"all 0.2s"},children:[(0,ne.jsx)("input",{type:"radio",value:"advanced",checked:"advanced"===u,onChange:function(t){return n(qe(qe({},e),{},{prompt_variant:t.target.value}))},style:{marginBottom:"12px"}}),(0,ne.jsx)("div",{style:{textAlign:"center",marginBottom:"12px"},children:(0,ne.jsx)("span",{style:{padding:"4px 12px",borderRadius:"4px",fontSize:"12px",fontWeight:700,backgroundColor:"#00a32a",color:"white",textTransform:"uppercase",display:"inline-block"},children:" Advanced"})}),(0,ne.jsxs)("div",{style:{textAlign:"center",marginBottom:"8px"},children:[(0,ne.jsx)("div",{style:{fontSize:"13px",fontWeight:600,marginBottom:"4px"},children:Ue.advanced.description}),(0,ne.jsxs)("div",{style:{fontSize:"12px",color:"#646970"},children:[Ue.advanced.promptTokens," text tokens"]})]})]})]})]})]}),(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginTop:"20px"},children:[(0,ne.jsx)(De,{variant:Ue.minimal,onShowPreview:function(){return d("minimal")}}),(0,ne.jsx)(De,{variant:Ue.standard,onShowPreview:function(){return d("standard")}}),(0,ne.jsx)(De,{variant:Ue.advanced,onShowPreview:function(){return d("advanced")}})]}),(0,ne.jsx)(Ge,{isOpen:i,onClose:function(){return a(!1)},variant:Ue[s],settings:e,selectedVariant:s})]})};function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function Xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Je(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(n),!0).forEach(function(e){Ze(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ze(t,e,n){return(e=function(t){var e=function(t){if("object"!=Qe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qe(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tn=function(t){var e,n,r=t.settings,o=t.setSettings,i=((null===(e=window.aiMediaSEO)||void 0===e?void 0:e.image_sizes)||[]).map(function(t){return{label:t.label,value:t.value}});return(0,ne.jsx)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:(0,ne.jsx)("div",{style:{flex:"1 1 calc(50% - 10px)",minWidth:"400px"},children:(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsxs)("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-admin-settings",style:{fontSize:"20px"}}),"Processing Settings"]})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ne.jsx)(we.SelectControl,{label:"Image Size for AI Analysis",value:r.image_size_for_ai||"large",options:i,onChange:function(t){return o(Je(Je({},r),{},{image_size_for_ai:t}))},help:""}),(0,ne.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#646970",fontStyle:"italic",lineHeight:"1.5"},children:["Choose which WordPress image size to send to AI providers for analysis. Smaller sizes reduce API costs and processing time, while larger sizes may provide more detailed analysis. Recommended: ",(0,ne.jsx)("strong",{children:"Large"})," (typically 1024px) for best balance between quality and cost."]})]}),(0,ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ne.jsx)(we.ToggleControl,{label:"Enable Image Size Fallback",checked:null===(n=r.enable_image_size_fallback)||void 0===n||n,onChange:function(t){return o(Je(Je({},r),{},{enable_image_size_fallback:t}))},help:""}),(0,ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#646970",fontStyle:"italic",lineHeight:"1.5"},children:"If enabled and your selected image size doesn't exist for a particular image, the plugin will automatically try to find another available size. If disabled, the original full-size image will be used instead, which may increase API costs."})]}),(0,ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ne.jsx)(we.ToggleControl,{label:"Enable Auto-processing",checked:r.enable_auto_process||!1,onChange:function(t){return o(Je(Je({},r),{},{enable_auto_process:t}))},help:""}),(0,ne.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#646970",fontStyle:"italic",lineHeight:"1.5"},children:["When enabled, newly uploaded images will be automatically processed by AI to generate SEO metadata (ALT text, caption, title). This is convenient but will consume your API credits automatically. ",(0,ne.jsx)("strong",{children:"Recommended:"})," Leave disabled and process images manually or in batches to maintain better control over API costs."]})]}),(0,ne.jsxs)("div",{children:[(0,ne.jsx)(we.TextControl,{label:"ALT Text Maximum Length",type:"number",value:r.alt_max_length||125,onChange:function(t){return o(Je(Je({},r),{},{alt_max_length:parseInt(t)}))},help:""}),(0,ne.jsx)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#646970",fontStyle:"italic",lineHeight:"1.5"},children:"Maximum number of characters allowed in ALT text. Google recommends keeping ALT text concise (typically under 125 characters) for optimal accessibility and SEO. The AI will generate ALT text that respects this limit while remaining descriptive and keyword-rich."})]})]})]})})})};function en(t){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},en(t)}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach(function(e){on(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function on(t,e,n){return(e=function(t){var e=function(t){if("object"!=en(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==en(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const an=function(t){var e=t.settings,n=t.setSettings,r=e.site_context||"",o=r.length,i=1500,a=i-o,l=o>i;return(0,ne.jsx)("div",{children:(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsx)("h3",{children:"AI Context & Role"})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsx)(we.TextControl,{label:"AI Role",value:e.ai_role||"SEO expert",onChange:function(t){return n(rn(rn({},e),{},{ai_role:t}))},help:"Define the role of the AI (e.g., 'SEO expert', 'Marketing specialist', 'Content writer')",placeholder:"SEO expert"}),(0,ne.jsxs)("div",{style:{marginTop:"20px"},children:[(0,ne.jsx)("label",{htmlFor:"site-context",style:{display:"block",marginBottom:"8px",fontSize:"13px",fontWeight:"500"},children:"Site Context & Information"}),(0,ne.jsx)("textarea",{id:"site-context",value:r,onChange:function(t){return n(rn(rn({},e),{},{site_context:t.target.value}))},maxLength:i,rows:"6",style:{width:"100%",padding:"8px",fontSize:"13px",lineHeight:"1.5",border:l?"1px solid #d63638":"1px solid #dcdcde",borderRadius:"4px",fontFamily:"inherit",boxShadow:l?"0 0 0 1px #d63638":"none"},placeholder:"Provide general context about your website, target audience, brand voice, and any specific requirements for image metadata..."}),(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[(0,ne.jsx)("p",{style:{margin:0,fontSize:"12px",fontStyle:"italic",color:"#646970"},children:"This context will be included in all AI prompts to ensure metadata aligns with your site's purpose and audience."}),(0,ne.jsxs)("div",{style:{fontSize:"12px",fontWeight:"500",color:l?"#d63638":a<100?"#dba617":"#646970",whiteSpace:"nowrap",marginLeft:"16px"},children:[o," / ",i,!l&&(0,ne.jsxs)("span",{style:{fontWeight:"normal",marginLeft:"8px"},children:["(",a," remaining)"]}),l&&(0,ne.jsx)("span",{style:{fontWeight:"normal",marginLeft:"8px"},children:"(over limit!)"})]})]})]})]})]})})},ln=function(t){var e=t.preset,n=t.presetId,r=t.isActive,o=t.onApply;return(0,ne.jsxs)("button",{onClick:function(){return o(n)},style:{padding:"16px 12px",border:r?"2px solid ".concat(e.color):"1px solid #dcdcde",borderRadius:"6px",background:r?"".concat(e.color,"10"):"#fff",cursor:"pointer",textAlign:"center",transition:"all 0.2s"},children:[(0,ne.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:e.icon}),(0,ne.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"4px",color:r?e.color:"#1d2327"},children:e.name}),(0,ne.jsx)("div",{style:{fontSize:"11px",color:"#646970",lineHeight:"1.4"},children:e.description}),r&&(0,ne.jsx)("div",{style:{marginTop:"8px",padding:"4px 8px",background:e.color,color:"#fff",borderRadius:"3px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase"},children:"Active"})]})},sn=function(t){var e=t.field,n=t.value,r=t.onChange,o=t.labels[e],i=Math.round(n);return(0,ne.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,ne.jsxs)("label",{style:{fontSize:"14px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{style:{fontSize:"18px"},children:o.emoji}),o.name," Importance",(0,ne.jsx)("span",{style:{fontSize:"10px",padding:"2px 6px",background:"".concat(o.color,"20"),color:o.color,borderRadius:"3px",fontWeight:"bold",textTransform:"uppercase"},children:o.importance})]}),(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("input",{type:"number",min:"0",max:"100",step:"1",value:i,onChange:function(t){var e=Math.min(100,Math.max(0,parseInt(t.target.value)||0));r(e)},style:{width:"60px",padding:"4px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px",textAlign:"right"}}),(0,ne.jsx)("span",{style:{fontSize:"11px",fontWeight:"600",color:"#646970",minWidth:"35px"},children:"points"})]})]}),(0,ne.jsx)("input",{type:"range",min:"0",max:"100",step:"1",value:i,onChange:function(t){var e=parseInt(t.target.value);r(e)},style:{width:"100%",height:"8px",borderRadius:"4px",outline:"none",WebkitAppearance:"none",appearance:"none",background:"linear-gradient(to right, ".concat(o.color," 0%, ").concat(o.color," ").concat(i,"%, #dcdcde ").concat(i,"%, #dcdcde 100%)")}}),(0,ne.jsx)("div",{style:{marginTop:"6px",fontSize:"11px",color:"#646970",fontStyle:"italic"},children:"Higher values = more important for overall quality score"})]})};function cn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return un(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const dn=function(t){var e=t.scenarios,n=t.qualityWeights,r=t.autoApproveThreshold,o=t.calculateScore;return(0,ne.jsxs)(we.Card,{style:{marginBottom:"20px",position:"sticky",top:"20px"},children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsxs)("h3",{style:{margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-visibility",style:{fontSize:"20px"}}),"Quality Score Preview"]})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsxs)("div",{style:{marginTop:0,marginBottom:"16px",padding:"12px",background:"#f0f6fc",borderRadius:"4px",border:"1px solid #2271b1",fontSize:"12px",textAlign:"center"},children:[(0,ne.jsx)("strong",{children:"Auto-Approve Threshold:"})," ",Math.round(100*r),"%"]}),(0,ne.jsx)("p",{style:{marginTop:0,marginBottom:"16px",fontSize:"13px",color:"#646970"},children:"See how quality affects your total score with current importance settings:"}),(0,ne.jsxs)("div",{style:{padding:"8px 12px",background:"#f0f6fc",borderRadius:"4px",fontSize:"11px",color:"#646970",marginBottom:"16px",borderLeft:"3px solid #2271b1"},children:[(0,ne.jsx)("strong",{children:" How to read:"}),(0,ne.jsx)("br",{}),(0,ne.jsx)("span",{style:{color:"#1d2327"},children:"If ALT is perfect (100%)"}),"  adds ",(0,ne.jsx)("strong",{children:"45%"})," to total score",(0,ne.jsx)("br",{}),(0,ne.jsx)("span",{style:{color:"#1d2327"},children:"If ALT is good (75%)"}),"  adds ",(0,ne.jsx)("strong",{children:"34%"})," to total score"]}),Object.entries(e).map(function(t){var e=cn(t,2),i=e[0],a=e[1],l=o(a),s=Math.round(100*l),c=s>=100*r,u="#dc3232",d="Draft";return l>=r?(u="#46b450",d="Auto-Approve"):l>=.7&&(u="#ffb900",d="Review"),(0,ne.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"#f6f7f7",borderRadius:"4px",border:c?"2px solid ".concat(u):"1px solid #dcdcde"},children:[(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,ne.jsxs)("div",{style:{fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[(0,ne.jsx)("span",{style:{fontSize:"16px"},children:a.emoji}),a.label]}),(0,ne.jsxs)("div",{style:{fontSize:"16px",fontWeight:"bold",color:u},children:[s,"%"]})]}),(0,ne.jsx)("div",{style:{height:"6px",background:"#dcdcde",borderRadius:"3px",overflow:"hidden",marginBottom:"8px"},children:(0,ne.jsx)("div",{style:{height:"100%",width:"".concat(s,"%"),background:u,transition:"width 0.3s"}})}),(0,ne.jsx)("div",{style:{fontSize:"11px",color:"#646970",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:Object.entries(a).filter(function(t){var e=cn(t,1)[0];return"label"!==e&&"emoji"!==e}).map(function(t){var e=cn(t,2),r=e[0],o=e[1];return(0,ne.jsxs)("div",{children:[r.toUpperCase(),": ",Math.round(100*o),"%  ",(0,ne.jsxs)("span",{style:{color:"#2271b1",fontWeight:"600"},children:["+",Math.round(o*n[r]*100),"%"]})]},r)})}),(0,ne.jsxs)("div",{style:{marginTop:"8px",padding:"4px 8px",background:u,color:"#fff",borderRadius:"3px",fontSize:"11px",fontWeight:"bold",textAlign:"center",textTransform:"uppercase"},children:[" ",d]})]},i)})]})]})};var pn={beginner:{name:"Beginner Friendly",description:"Balanced settings with lower threshold - good for learning",importance:{alt:40,title:30,caption:20,keywords:10},autoApprove:.75,color:"#00a32a",icon:""},balanced:{name:"Balanced (Recommended)",description:"SEO-optimized with standard quality requirements",importance:{alt:50,title:30,caption:15,keywords:5},autoApprove:.8,color:"#2271b1",icon:""},expert:{name:"Expert / E-commerce",description:"Maximum quality - prioritizes ALT text heavily",importance:{alt:80,title:15,caption:4,keywords:1},autoApprove:.9,color:"#d63638",icon:""}},fn={excellent:{alt:1,title:1,caption:1,keywords:1,label:"Perfect Metadata",emoji:""},good:{alt:.9,title:.85,caption:.8,keywords:.9,label:"Good Quality",emoji:""},badAlt:{alt:.3,title:1,caption:1,keywords:1,label:"Poor ALT (Critical)",emoji:""},average:{alt:.7,title:.6,caption:.7,keywords:.5,label:"Average Quality",emoji:""}},hn={alt:{name:"ALT Text",emoji:"",color:"#dc3232",importance:"Critical"},title:{name:"Title",emoji:"",color:"#d63638",importance:"High"},caption:{name:"Caption",emoji:"",color:"#ffb900",importance:"Medium"},keywords:{name:"Keywords",emoji:"",color:"#46b450",importance:"Low"}};function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function yn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(n),!0).forEach(function(e){vn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function vn(t,e,n){return(e=function(t){var e=function(t){if("object"!=mn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return bn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const jn=function(t){var e=t.settings,n=t.setSettings,o=t.qualityWeights,i=t.setQualityWeights,a=xn((0,r.useState)(function(){return{alt:Math.round(100*o.alt),title:Math.round(100*o.title),caption:Math.round(100*o.caption),keywords:Math.round(100*o.keywords)}}),2),l=a[0],s=a[1];(0,r.useEffect)(function(){s({alt:Math.round(100*o.alt),title:Math.round(100*o.title),caption:Math.round(100*o.caption),keywords:Math.round(100*o.keywords)})},[o]);var c=function(t){var e=Object.values(t).reduce(function(t,e){return t+e},0);if(0===e)return{alt:.25,title:.25,caption:.25,keywords:.25};var n={};return Object.keys(t).forEach(function(r){n[r]=t[r]/e}),n},u=xn((0,r.useState)("custom"),2),d=u[0],p=u[1],f=xn((0,r.useState)(!1),2),h=f[0],m=f[1],y=function(t){if(pn[t]){var r=pn[t];s(r.importance);var o=c(r.importance);i(o),n(gn(gn({},e),{},{auto_approve_threshold:r.autoApprove})),p(t)}},g=function(){for(var t,n=function(){var t=xn(o[r],2),n=t[0],i=t[1],a=Object.keys(i.importance).every(function(t){return Math.abs(l[t]-i.importance[t])<2}),s=Math.abs((e.auto_approve_threshold||.85)-i.autoApprove)<.01;if(a&&s)return{v:n}},r=0,o=Object.entries(pn);r<o.length;r++)if(t=n())return t.v;return"custom"};return(0,r.useEffect)(function(){var t=g();p(t)},[]),(0,ne.jsxs)("div",{style:{display:"flex",gap:"20px",flexWrap:"wrap"},children:[(0,ne.jsxs)("div",{style:{flex:"1 1 calc(60% - 10px)",minWidth:"500px"},children:[(0,ne.jsx)(we.Card,{style:{marginBottom:"20px",background:"#f0f6fc",borderLeft:"4px solid #2271b1"},children:(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsxs)("h3",{style:{marginTop:0,marginBottom:"8px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-info",style:{fontSize:"20px"}}),"Quality Scoring System"]}),(0,ne.jsxs)("p",{style:{margin:0,color:"#1d2327",lineHeight:"1.6"},children:["The quality score determines whether AI-generated metadata is automatically approved or requires review. Each field (ALT, Title, Caption, Keywords) contributes to the final score based on its ",(0,ne.jsx)("strong",{children:"SEO importance weight"}),"."]}),(0,ne.jsxs)(we.Button,{variant:"link",onClick:function(){return m(!h)},style:{marginTop:"8px",padding:0},children:[h?" Hide":" Learn"," why these weights matter for SEO"]}),h&&(0,ne.jsxs)("div",{style:{marginTop:"12px",padding:"12px",background:"#fff",borderRadius:"4px",fontSize:"13px",lineHeight:"1.6"},children:[(0,ne.jsx)("strong",{children:" ALT Text (40%):"})," Most critical for Google Image Search and accessibility. Screen readers rely on ALT text.",(0,ne.jsx)("br",{}),(0,ne.jsx)("strong",{children:" Title (30%):"})," Important for social sharing, file organization, and structured data.",(0,ne.jsx)("br",{}),(0,ne.jsx)("strong",{children:" Caption (20%):"})," Adds context for users, improves engagement and time-on-page.",(0,ne.jsx)("br",{}),(0,ne.jsx)("strong",{children:" Keywords (10%):"})," Helps organize media library, minimal direct SEO impact."]})]})}),(0,ne.jsxs)(we.Card,{style:{marginBottom:"20px"},children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsx)("h3",{style:{margin:0},children:"Quick Presets"})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsx)("p",{style:{marginTop:0,marginBottom:"16px",color:"#646970"},children:"Choose a preset configuration or customize your own weights below."}),(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"12px",marginBottom:"16px"},children:[Object.entries(pn).map(function(t){var e=xn(t,2),n=e[0],r=e[1];return(0,ne.jsx)(ln,{preset:r,presetId:n,isActive:d===n,onApply:y},n)}),(0,ne.jsxs)("button",{onClick:function(){return p("custom")},style:{padding:"16px 12px",border:"custom"===d?"2px solid #8c8f94":"1px solid #dcdcde",borderRadius:"6px",background:"custom"===d?"#f6f7f7":"#fff",cursor:"pointer",textAlign:"center"},children:[(0,ne.jsx)("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),(0,ne.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"4px"},children:"Custom"}),(0,ne.jsx)("div",{style:{fontSize:"11px",color:"#646970",lineHeight:"1.4"},children:"Configure your own weights"})]})]})]})]}),(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsx)("h3",{style:{margin:0},children:"Field Importance"})}),(0,ne.jsx)(we.CardBody,{children:["alt","title","caption","keywords"].map(function(t){return(0,ne.jsx)(sn,{field:t,value:l[t],onChange:function(e){return function(t,e){var n=gn(gn({},l),{},vn({},t,e));s(n);var r=c(n);i(r),p(g())}(t,e)},labels:hn},t)})})]}),(0,ne.jsx)(we.Card,{style:{background:"#f0f6fc",borderLeft:"4px solid #2271b1"},children:(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsx)("h4",{style:{marginTop:0,marginBottom:"12px",fontSize:"14px"},children:" SEO Impact Guide"}),(0,ne.jsxs)("div",{style:{fontSize:"12px",lineHeight:"1.6",color:"#1d2327"},children:[(0,ne.jsxs)("p",{style:{marginTop:0},children:[(0,ne.jsx)("strong",{children:"ALT Text"})," is the most important field because:"]}),(0,ne.jsxs)("ul",{style:{marginLeft:"20px",marginBottom:"12px"},children:[(0,ne.jsx)("li",{children:"Primary ranking factor for Google Image Search"}),(0,ne.jsx)("li",{children:"Required for web accessibility (WCAG compliance)"}),(0,ne.jsx)("li",{children:"Screen readers rely on it exclusively"})]}),(0,ne.jsxs)("p",{children:[(0,ne.jsx)("strong",{children:"Title"})," matters for:"]}),(0,ne.jsxs)("ul",{style:{marginLeft:"20px",marginBottom:"12px"},children:[(0,ne.jsx)("li",{children:"Social media sharing (Open Graph)"}),(0,ne.jsx)("li",{children:"Structured data (Schema.org)"}),(0,ne.jsx)("li",{children:"Image filename SEO"})]}),(0,ne.jsxs)("p",{style:{marginBottom:0},children:[(0,ne.jsx)("strong",{children:"Caption"})," and ",(0,ne.jsx)("strong",{children:"Keywords"})," provide supplementary value through content enrichment and internal organization."]})]})]})})]}),(0,ne.jsx)("div",{style:{flex:"1 1 calc(40% - 10px)",minWidth:"350px"},children:(0,ne.jsx)(dn,{scenarios:fn,qualityWeights:o,autoApproveThreshold:e.auto_approve_threshold||.85,calculateScore:function(t){for(var e=0,n=0,r=["alt","title","caption","keywords"];n<r.length;n++){var i=r[n];void 0!==t[i]&&(e+=t[i]*(o[i]||0))}return e}})})]})};function Sn(t){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(t)}function wn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return On(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(On(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,On(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,On(d,"constructor",c),On(c,"constructor",s),s.displayName="GeneratorFunction",On(c,o,"GeneratorFunction"),On(d),On(d,o,"Generator"),On(d,r,function(){return this}),On(d,"toString",function(){return"[object Generator]"}),(wn=function(){return{w:i,m:p}})()}function On(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}On=function(t,e,n,r){function i(e,n){On(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},On(t,e,n,r)}function kn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kn(Object(n),!0).forEach(function(e){An(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function An(t,e,n){return(e=function(t){var e=function(t){if("object"!=Sn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tn(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function Pn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Tn(i,r,o,a,l,"next",t)}function l(t){Tn(i,r,o,a,l,"throw",t)}a(void 0)})}}function _n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return In(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?In(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function In(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(t)}function En(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function zn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(e){Dn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Dn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Nn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Nn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Bn=function(t){var e,n,o=t.context,i=(e=(0,r.useState)({}),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Mn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1],s=function(t){l(function(e){return zn(zn({},e),{},Dn({},t,!e[t]))})},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null==t)return(0,ne.jsx)("span",{style:{color:"#999"},children:"null"});if("boolean"==typeof t)return(0,ne.jsx)("span",{style:{color:"#0066cc"},children:t.toString()});if("number"==typeof t)return(0,ne.jsx)("span",{style:{color:"#990000"},children:t});if("string"==typeof t)return(0,ne.jsxs)("span",{style:{color:"#008000"},children:['"',t,'"']});if(Array.isArray(t)){if(0===t.length)return(0,ne.jsx)("span",{style:{color:"#999"},children:"[]"});var r=a[e];return(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("span",{onClick:function(){return s(e)},style:{cursor:"pointer",userSelect:"none"},children:[r?"":""," [",t.length," items]"]}),!r&&(0,ne.jsx)("div",{style:{marginLeft:"20px"},children:t.map(function(t,r){return(0,ne.jsxs)("div",{children:[r,": ",c(t,"".concat(e,".").concat(r),n+1)]},r)})})]})}if("object"===Nn(t)){var o=Object.keys(t);if(0===o.length)return(0,ne.jsx)("span",{style:{color:"#999"},children:"{}"});var i=a[e];return(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("span",{onClick:function(){return s(e)},style:{cursor:"pointer",userSelect:"none"},children:[i?"":""," ","{","...","}"]}),!i&&(0,ne.jsx)("div",{style:{marginLeft:"20px"},children:o.map(function(r){return(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("span",{style:{color:"#881391"},children:['"',r,'"']}),": ",c(t[r],"".concat(e,".").concat(r),n+1)]},r)})})]})}return(0,ne.jsx)("span",{children:String(t)})};return(0,ne.jsx)("div",{style:{background:"#f6f7f7",border:"1px solid #dcdcde",borderRadius:"4px",padding:"15px",fontFamily:"Consolas, Monaco, monospace",fontSize:"13px",lineHeight:"1.6",maxHeight:"600px",overflow:"auto"},children:(0,ne.jsxs)("div",{children:[o.global_settings&&(0,ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ne.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#2271b1"},children:" Global Settings:"}),(0,ne.jsx)("div",{style:{marginLeft:"20px"},children:c(o.global_settings,"global_settings")})]}),o.context&&(0,ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ne.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#2271b1"},children:" Context Data:"}),(0,ne.jsx)("div",{style:{marginLeft:"20px"},children:c(o.context,"context")})]}),void 0!==o.context_score&&(0,ne.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,ne.jsx)("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#2271b1"},children:" Context Score:"}),(0,ne.jsx)("div",{style:{marginLeft:"20px"},children:(0,ne.jsx)("span",{style:{color:"#990000"},children:o.context_score.toFixed(2)})})]}),o.final_prompt&&(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#2271b1"},children:[" Final Prompt (",o.used_variant||"standard"," variant):"]}),(0,ne.jsx)("pre",{style:{background:"#fff",border:"1px solid #dcdcde",borderRadius:"4px",padding:"12px",marginTop:"8px",marginLeft:"20px",overflow:"auto",whiteSpace:"pre-wrap",fontSize:"12px",maxHeight:"400px"},children:o.final_prompt})]})]})})};function Fn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Rn=function(t){var e,n,o,i,a,l,s=t.result,c=(a=(0,r.useState)(!1),l=2,function(t){if(Array.isArray(t))return t}(a)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(a,l)||function(t,e){if(t){if("string"==typeof t)return Fn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(t,e):void 0}}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],p=(null===(e=window.aiMediaSEO)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.auto_approve_threshold)||.85,f=function(t){return"$".concat(t.toFixed(6))};return(0,ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{style:{background:"#f0f6fc",borderBottom:"1px solid #2271b1"},children:(0,ne.jsx)("h4",{style:{margin:0},children:" Generated Metadata"})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr",gap:"10px"},children:[(0,ne.jsx)("strong",{children:"Provider:"}),(0,ne.jsx)("span",{children:s.provider||"N/A"}),(0,ne.jsx)("strong",{children:"Model:"}),(0,ne.jsx)("span",{children:s.model||"N/A"}),(0,ne.jsx)("strong",{children:"Quality Score:"}),(0,ne.jsx)("span",{style:{color:s.score?(i=s.score,i>=p?"#46b450":i>=.7?"#ffb900":"#dc3232"):"#999",fontWeight:"bold"},children:s.score?"".concat(Math.round(100*s.score),"%"):"N/A"}),(0,ne.jsx)("strong",{children:"Status:"}),(0,ne.jsx)("span",{children:s.status||"N/A"})]}),s.metadata&&(0,ne.jsxs)("div",{style:{marginTop:"20px"},children:[(0,ne.jsx)("h5",{children:"Generated Content:"}),s.metadata.alt&&(0,ne.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,ne.jsx)("strong",{children:"ALT Text:"}),(0,ne.jsx)("div",{style:{padding:"10px",background:"#f6f7f7",borderLeft:"3px solid #2271b1",marginTop:"5px"},children:s.metadata.alt})]}),s.metadata.caption&&(0,ne.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,ne.jsx)("strong",{children:"Caption:"}),(0,ne.jsx)("div",{style:{padding:"10px",background:"#f6f7f7",borderLeft:"3px solid #2271b1",marginTop:"5px"},children:s.metadata.caption})]}),s.metadata.title&&(0,ne.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,ne.jsx)("strong",{children:"Title:"}),(0,ne.jsx)("div",{style:{padding:"10px",background:"#f6f7f7",borderLeft:"3px solid #2271b1",marginTop:"5px"},children:s.metadata.title})]}),s.metadata.keywords&&s.metadata.keywords.length>0&&(0,ne.jsxs)("div",{children:[(0,ne.jsx)("strong",{children:"Keywords:"}),(0,ne.jsx)("div",{style:{marginTop:"5px"},children:s.metadata.keywords.map(function(t,e){return(0,ne.jsx)("span",{style:{display:"inline-block",padding:"4px 8px",margin:"2px",background:"#f0f6fc",border:"1px solid #2271b1",borderRadius:"3px",fontSize:"12px"},children:t},e)})})]})]})]})]}),s.costs&&(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{style:{background:"#f0f6fc",borderBottom:"1px solid #2271b1"},children:(0,ne.jsx)("h4",{style:{margin:0},children:" Cost Analysis"})}),(0,ne.jsx)(we.CardBody,{children:(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"200px 1fr",gap:"10px"},children:[(0,ne.jsx)("strong",{children:"Input Tokens:"}),(0,ne.jsxs)("span",{children:[(null===(n=s.costs.input_tokens)||void 0===n?void 0:n.toLocaleString())||"N/A",s.costs.estimated_input&&" (estimated)"]}),(0,ne.jsx)("strong",{children:"Output Tokens:"}),(0,ne.jsx)("span",{children:(null===(o=s.costs.output_tokens)||void 0===o?void 0:o.toLocaleString())||"N/A"}),(0,ne.jsx)("strong",{children:"Input Cost:"}),(0,ne.jsx)("span",{children:s.costs.input_cost?f(s.costs.input_cost):"N/A"}),(0,ne.jsx)("strong",{children:"Output Cost:"}),(0,ne.jsx)("span",{children:s.costs.output_cost?f(s.costs.output_cost):"N/A"}),(0,ne.jsx)("strong",{style:{fontSize:"16px"},children:"Total Cost:"}),(0,ne.jsx)("span",{style:{fontSize:"16px",fontWeight:"bold",color:"#2271b1"},children:s.costs.total_cost?f(s.costs.total_cost):"N/A"})]})})]}),(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{style:{background:"#f6f7f7"},children:(0,ne.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,ne.jsx)("h4",{style:{margin:0},children:" Raw Response"}),(0,ne.jsxs)("button",{onClick:function(){return d(!u)},style:{padding:"4px 12px",border:"1px solid #2271b1",background:"white",borderRadius:"3px",cursor:"pointer"},children:[u?"Hide":"Show"," JSON"]})]})}),u&&(0,ne.jsx)(we.CardBody,{children:(0,ne.jsx)("pre",{style:{background:"#f6f7f7",padding:"15px",borderRadius:"4px",overflow:"auto",maxHeight:"400px",fontSize:"12px",fontFamily:"Consolas, Monaco, monospace"},children:JSON.stringify(s,null,2)})})]})]})};function Ln(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Gn=function(t){var e=t.image,n=t.onClick,r=t.isSelected,o=void 0!==r&&r;return(0,ne.jsxs)("div",{className:"image-thumbnail ".concat(o?"selected":""),onClick:function(){return n(e)},style:{position:"relative",aspectRatio:"1",borderRadius:"4px",overflow:"hidden",cursor:"pointer",border:o?"3px solid #00a32a":"2px solid #dcdcde",boxShadow:o?"0 0 0 2px rgba(0, 163, 42, 0.2)":"none",transition:"all 0.2s ease",backgroundColor:"#f6f7f7"},onMouseEnter:function(t){o||(t.currentTarget.style.borderColor="#007cba",t.currentTarget.style.transform="scale(1.05)")},onMouseLeave:function(t){o||(t.currentTarget.style.borderColor="#dcdcde",t.currentTarget.style.transform="scale(1)")},children:[(0,ne.jsx)("img",{src:e.url,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"}}),o&&(0,ne.jsx)("div",{style:{position:"absolute",top:"4px",right:"4px",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"#00a32a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"bold",boxShadow:"0 1px 3px rgba(0,0,0,0.3)"},children:""}),(0,ne.jsx)("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"4px 6px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"white",fontSize:"11px",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.filename})]})},Un=function(t){var e=t.image,n=t.onClick,r=t.isSelected,o=void 0!==r&&r;return(0,ne.jsxs)("div",{className:"search-result-item ".concat(o?"selected":""),onClick:function(){return n(e)},style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",borderRadius:"4px",cursor:"pointer",border:o?"2px solid #00a32a":"1px solid #dcdcde",backgroundColor:o?"#f0f6fc":"#fff",transition:"all 0.15s ease",marginBottom:"6px"},onMouseEnter:function(t){o||(t.currentTarget.style.backgroundColor="#f6f7f7",t.currentTarget.style.borderColor="#007cba")},onMouseLeave:function(t){o||(t.currentTarget.style.backgroundColor="#fff",t.currentTarget.style.borderColor="#dcdcde")},children:[(0,ne.jsxs)("div",{style:{width:"50px",height:"50px",flexShrink:0,borderRadius:"3px",overflow:"hidden",backgroundColor:"#f0f0f1",position:"relative"},children:[(0,ne.jsx)("img",{src:e.url,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"}}),o&&(0,ne.jsx)("div",{style:{position:"absolute",top:"2px",right:"2px",width:"18px",height:"18px",borderRadius:"50%",backgroundColor:"#00a32a",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"11px",fontWeight:"bold",boxShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:""})]}),(0,ne.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,ne.jsx)("div",{style:{fontWeight:500,fontSize:"13px",color:"#1e1e1e",marginBottom:"3px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),(0,ne.jsxs)("div",{style:{fontSize:"12px",color:"#646970",display:"flex",gap:"8px",alignItems:"center"},children:[(0,ne.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px"},children:[(0,ne.jsx)("span",{style:{color:"#787c82"},children:"ID:"}),(0,ne.jsx)("strong",{children:e.id})]}),(0,ne.jsx)("span",{style:{color:"#dcdcde"},children:""}),(0,ne.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.filename})]})]}),(0,ne.jsx)("div",{style:{flexShrink:0,color:"#646970",fontSize:"16px",opacity:o?1:0,transition:"opacity 0.15s ease"},children:""})]})};function Wn(t){return Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wn(t)}function Hn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return qn(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(qn(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,qn(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,qn(d,"constructor",c),qn(c,"constructor",s),s.displayName="GeneratorFunction",qn(c,o,"GeneratorFunction"),qn(d),qn(d,o,"Generator"),qn(d,r,function(){return this}),qn(d,"toString",function(){return"[object Generator]"}),(Hn=function(){return{w:i,m:p}})()}function qn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qn=function(t,e,n,r){function i(e,n){qn(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},qn(t,e,n,r)}function $n(t){return function(t){if(Array.isArray(t))return tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Zn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Vn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kn(Object(n),!0).forEach(function(e){Yn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Yn(t,e,n){return(e=function(t){var e=function(t){if("object"!=Wn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Wn(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qn(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function Xn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Qn(i,r,o,a,l,"next",t)}function l(t){Qn(i,r,o,a,l,"throw",t)}a(void 0)})}}function Jn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||Zn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(t,e){if(t){if("string"==typeof t)return tr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tr(t,e):void 0}}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const er=function(t){var e=t.onSelect,n=t.selectedImage,o=void 0===n?null:n,a=t.preselectedImageId,l=void 0===a?null:a,s=t.autoLoadPreselected,c=void 0!==s&&s,u=Jn((0,r.useState)(""),2),d=u[0],p=u[1],f=Jn((0,r.useState)([]),2),h=f[0],m=f[1],y=Jn((0,r.useState)([]),2),g=y[0],v=y[1],x=Jn((0,r.useState)(0),2),b=x[0],j=x[1],S=Jn((0,r.useState)(!0),2),w=S[0],O=S[1],k=Jn((0,r.useState)({search:!1,quick:!1,loadMore:!1}),2),C=k[0],A=k[1],T=Jn((0,r.useState)(null),2),P=T[0],_=T[1],I=function(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,i=(e=(0,r.useState)(t),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Ln(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return(0,r.useEffect)(function(){var e=setTimeout(function(){l(t)},o);return function(){clearTimeout(e)}},[t,o]),a}(d,300);(0,r.useEffect)(function(){N()},[]),(0,r.useEffect)(function(){I.length>=2?E(I):m([])},[I]),(0,r.useEffect)(function(){c&&l&&z({id:l})},[l,c]);var N=function(){var t=Xn(Hn().m(function t(){var e,n,r,o,a,l,s=arguments;return Hn().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=(e=s.length>0&&void 0!==s[0]&&s[0])?"loadMore":"quick",A(function(t){return Vn(Vn({},t),{},Yn({},n,!0))}),_(null),r=e?b:0,t.p=1,t.n=2,i()({path:"/ai-media/v1/playground/images?limit=".concat(12,"&offset=").concat(r),method:"GET"});case 2:(o=t.v).success&&(a=o.images||[],v(e?function(t){return[].concat($n(t),$n(a))}:a),j(r+a.length),O(12===a.length)),t.n=4;break;case 3:t.p=3,l=t.v,_("Failed to load recent images: "+l.message);case 4:return t.p=4,A(function(t){return Vn(Vn({},t),{},Yn({},n,!1))}),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Xn(Hn().m(function t(e){var n,r;return Hn().w(function(t){for(;;)switch(t.p=t.n){case 0:return A(function(t){return Vn(Vn({},t),{},{search:!0})}),_(null),t.p=1,t.n=2,i()({path:"/ai-media/v1/playground/search?q=".concat(encodeURIComponent(e),"&limit=10"),method:"GET"});case 2:(n=t.v).success&&m(n.images||[]),t.n=4;break;case 3:t.p=3,r=t.v,_("Search failed: "+r.message),m([]);case 4:return t.p=4,A(function(t){return Vn(Vn({},t),{},{search:!1})}),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(e){return t.apply(this,arguments)}}(),z=function(t){e(t),p(""),m([])};return(0,ne.jsxs)("div",{className:"image-selector",style:{display:"flex",flexDirection:"column",gap:"24px"},children:[l&&(0,ne.jsx)("div",{style:{padding:"12px",backgroundColor:"#f0f6fc",border:"1px solid #0783be",borderRadius:"4px"},children:(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[(0,ne.jsxs)("div",{style:{flex:1},children:[(0,ne.jsx)("div",{style:{fontSize:"12px",color:"#0783be",fontWeight:600,marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Quick Access"}),(0,ne.jsx)("div",{style:{fontSize:"13px",color:"#1e1e1e"},children:"Use the image you selected in Media Library"})]}),(0,ne.jsxs)(we.Button,{variant:"primary",onClick:function(){return z({id:l})},style:{whiteSpace:"nowrap"},children:[" Use Selected Image (ID: ",l,")"]})]})}),(0,ne.jsxs)("div",{className:"quick-picks-section",children:[(0,ne.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:600,color:"#1e1e1e"},children:"Recent Uploads"}),C.quick?(0,ne.jsx)("div",{style:{padding:"20px",textAlign:"center"},children:(0,ne.jsx)(we.Spinner,{})}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("div",{className:"thumbnail-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"10px"},children:g.map(function(t){return(0,ne.jsx)(Gn,{image:t,onClick:z,isSelected:(null==o?void 0:o.id)===t.id},t.id)})}),w&&g.length>0&&(0,ne.jsxs)("div",{style:{marginTop:"16px",textAlign:"center"},children:[(0,ne.jsx)(we.Button,{variant:"secondary",onClick:function(){N(!0)},disabled:C.loadMore,isBusy:C.loadMore,children:C.loadMore?"Loading...":"Load More"}),(0,ne.jsxs)("p",{style:{margin:"8px 0 0 0",fontSize:"12px",color:"#646970"},children:["Showing ",g.length," images"]})]})]})]}),(0,ne.jsxs)("div",{className:"search-section",children:[(0,ne.jsx)("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:600,color:"#1e1e1e"},children:"Search Images"}),(0,ne.jsxs)("div",{style:{position:"relative"},children:[(0,ne.jsx)(we.TextControl,{placeholder:"Search by filename, title, or ID...",value:d,onChange:p,help:"Start typing to search (minimum 2 characters)"}),C.search&&(0,ne.jsx)("div",{style:{position:"absolute",right:"8px",top:"8px"},children:(0,ne.jsx)(we.Spinner,{style:{margin:0}})})]}),h.length>0&&(0,ne.jsx)("div",{className:"search-results",style:{marginTop:"12px",maxHeight:"300px",overflowY:"auto",border:"1px solid #dcdcde",borderRadius:"4px",padding:"8px",backgroundColor:"#f6f7f7"},children:h.map(function(t){return(0,ne.jsx)(Un,{image:t,onClick:z,isSelected:(null==o?void 0:o.id)===t.id},t.id)})}),I.length>=2&&!C.search&&0===h.length&&(0,ne.jsxs)("div",{style:{marginTop:"12px",padding:"12px",textAlign:"center",color:"#646970",fontSize:"13px",backgroundColor:"#f6f7f7",borderRadius:"4px"},children:['No images found for "',I,'"']})]}),P&&(0,ne.jsx)("div",{style:{padding:"12px",backgroundColor:"#fcf0f1",border:"1px solid #dc3232",borderRadius:"4px",color:"#dc3232",fontSize:"13px"},children:P})]})};function nr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return rr(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(rr(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,rr(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,rr(d,"constructor",c),rr(c,"constructor",s),s.displayName="GeneratorFunction",rr(c,o,"GeneratorFunction"),rr(d),rr(d,o,"Generator"),rr(d,r,function(){return this}),rr(d,"toString",function(){return"[object Generator]"}),(nr=function(){return{w:i,m:p}})()}function rr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}rr=function(t,e,n,r){function i(e,n){rr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},rr(t,e,n,r)}function or(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function ir(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){or(i,r,o,a,l,"next",t)}function l(t){or(i,r,o,a,l,"throw",t)}a(void 0)})}}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const lr=function(t){var e,n,o=t.preselectedImageId,a=void 0===o?null:o,l=function(){var t=_n((0,r.useState)(null),2),e=t[0],n=t[1],o=_n((0,r.useState)(null),2),a=o[0],l=o[1],s=_n((0,r.useState)(null),2),c=s[0],u=s[1],d=_n((0,r.useState)({context:!1,analysis:!1}),2),p=d[0],f=d[1],h=_n((0,r.useState)(null),2),m=h[0],y=h[1],g=(0,r.useCallback)(function(){var t=Pn(wn().m(function t(e,n){var r,o,a,s,c=arguments;return wn().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:null,f(function(t){return Cn(Cn({},t),{},{context:!0})}),y(null),l(null),u(null),t.p=1,o={attachment_id:e},n&&(o.language=n),r&&(o.prompt_variant=r),t.n=2,i()({path:"/ai-media/v1/playground/context",method:"POST",data:o});case 2:a=t.v,l(a),t.n=4;break;case 3:t.p=3,s=t.v,y("Failed to load context: "+s.message);case 4:return t.p=4,f(function(t){return Cn(Cn({},t),{},{context:!1})}),t.f(4);case 5:return t.a(2)}},t,null,[[1,3,4,5]])}));return function(e,n){return t.apply(this,arguments)}}(),[]),v=(0,r.useCallback)(function(){var t=Pn(wn().m(function t(e){var n,r;return wn().w(function(t){for(;;)switch(t.p=t.n){case 0:return f(function(t){return Cn(Cn({},t),{},{analysis:!0})}),y(null),t.p=1,t.n=2,i()({path:"/ai-media/v1/analyze",method:"POST",data:{attachment_ids:[e]}});case 2:if(!((n=t.v).success&&n.results&&n.results[0])){t.n=3;break}return u(n.results[0]),t.a(2,n.results[0]);case 3:if(!n.errors||!n.errors[0]){t.n=4;break}throw new Error(n.errors[0].errors[0]||"Analysis failed");case 4:throw new Error("No results returned from analysis");case 5:t.n=7;break;case 6:throw t.p=6,r=t.v,y("Failed to analyze image: "+r.message),r;case 7:return t.p=7,f(function(t){return Cn(Cn({},t),{},{analysis:!1})}),t.f(7);case 8:return t.a(2)}},t,null,[[1,6,7,8]])}));return function(e){return t.apply(this,arguments)}}(),[]);return{selectedImage:e,setSelectedImage:n,context:a,analysisResult:c,loading:p,error:m,loadContext:g,analyzeImage:v}}(),s=l.selectedImage,c=l.setSelectedImage,u=l.context,d=l.analysisResult,p=l.loading,f=l.error,h=l.loadContext,m=l.analyzeImage,y=ft().addCost,g=(e=(0,r.useState)("standard"),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return ar(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=g[0],x=g[1],b=function(){var t=ir(nr().m(function t(){return nr().w(function(t){for(;;)switch(t.n){case 0:if(s){t.n=1;break}return t.a(2);case 1:return t.n=2,h(s.id,s.language,v);case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),j=function(){var t=ir(nr().m(function t(){var e;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(s){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,m(s.id);case 2:(e=t.v).costs&&e.costs.total_cost&&y(e.costs.total_cost),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}();return(0,ne.jsx)("div",{className:"ai-media-playground",children:(0,ne.jsxs)(we.Card,{children:[(0,ne.jsx)(we.CardHeader,{children:(0,ne.jsx)("h3",{style:{margin:0},children:"AI Context & Analysis Playground"})}),(0,ne.jsxs)(we.CardBody,{children:[(0,ne.jsx)("p",{style:{marginBottom:"20px",color:"#646970"},children:"Test and debug the AI analysis pipeline. Select an image to inspect the context data sent to AI and analyze it to see the full response."}),(0,ne.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,ne.jsx)("h4",{style:{marginBottom:"16px"},children:"Select Image"}),(0,ne.jsx)(er,{onSelect:c,selectedImage:s,preselectedImageId:a,autoLoadPreselected:!1}),s&&(0,ne.jsxs)("div",{style:{marginTop:"20px",padding:"16px",backgroundColor:"#f6f7f7",border:"1px solid #dcdcde",borderRadius:"4px"},children:[(0,ne.jsx)("div",{style:{fontSize:"12px",fontWeight:600,color:"#1e1e1e",marginBottom:"12px",textTransform:"uppercase",letterSpacing:"0.3px"},children:"Selected Image"}),(0,ne.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"flex-start"},children:[(0,ne.jsx)("img",{src:s.url,alt:s.title,style:{width:"120px",height:"120px",objectFit:"cover",borderRadius:"4px",border:"2px solid #00a32a",flexShrink:0}}),(0,ne.jsxs)("div",{style:{flex:1},children:[(0,ne.jsxs)("p",{style:{margin:"0 0 6px 0"},children:[(0,ne.jsx)("strong",{style:{color:"#1e1e1e"},children:"Title:"})," ",(0,ne.jsx)("span",{style:{color:"#646970"},children:s.title})]}),(0,ne.jsxs)("p",{style:{margin:"0 0 6px 0"},children:[(0,ne.jsx)("strong",{style:{color:"#1e1e1e"},children:"ID:"})," ",(0,ne.jsx)("span",{style:{color:"#646970"},children:s.id})]}),(0,ne.jsxs)("p",{style:{margin:"0 0 6px 0"},children:[(0,ne.jsx)("strong",{style:{color:"#1e1e1e"},children:"File:"})," ",(0,ne.jsx)("span",{style:{color:"#646970"},children:s.filename})]}),s.language&&(0,ne.jsxs)("p",{style:{margin:"0 0 6px 0"},children:[(0,ne.jsx)("strong",{style:{color:"#1e1e1e"},children:"Language:"})," ",(0,ne.jsx)("span",{style:{color:"#646970"},children:s.language})]}),s.date&&(0,ne.jsxs)("p",{style:{margin:"0"},children:[(0,ne.jsx)("strong",{style:{color:"#1e1e1e"},children:"Uploaded:"})," ",(0,ne.jsx)("span",{style:{color:"#646970"},children:new Date(s.date).toLocaleDateString()})]})]})]})]}),(0,ne.jsxs)("div",{style:{marginTop:"20px"},children:[(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[(0,ne.jsx)("label",{style:{fontWeight:500,fontSize:"13px",color:"#1e1e1e"},children:"Prompt Variant"}),(0,ne.jsx)("span",{style:{padding:"2px 8px",borderRadius:"3px",fontSize:"11px",fontWeight:600,backgroundColor:"advanced"===v?"#00a32a":"minimal"===v?"#d63638":"#2271b1",color:"white",textTransform:"uppercase",letterSpacing:"0.5px"},children:"advanced"===v?" Advanced":"minimal"===v?" Minimal":" Standard"})]}),(0,ne.jsx)(we.SelectControl,{help:"Choose which prompt template to test",value:v,options:[{label:" Minimal (Fast & Cheap)",value:"minimal"},{label:" Standard (Recommended)",value:"standard"},{label:" Advanced (Maximum Context)",value:"advanced"}],onChange:x})]}),(0,ne.jsx)(we.Button,{variant:"secondary",onClick:b,disabled:!s||p.context,isBusy:p.context,style:{marginTop:"15px"},children:p.context?"Loading...":"Load Context"})]}),u&&(0,ne.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,ne.jsx)("h4",{children:"Context Preview"}),(0,ne.jsx)("p",{style:{fontSize:"12px",color:"#646970",marginBottom:"10px"},children:"This is the context data that will be sent to the AI provider for analysis."}),(0,ne.jsx)(Bn,{context:u}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:j,disabled:p.analysis,isBusy:p.analysis,style:{marginTop:"15px"},children:p.analysis?"Analyzing...":"Analyze with AI"})]}),d&&(0,ne.jsxs)("div",{children:[(0,ne.jsx)("h4",{children:"AI Analysis Results"}),(0,ne.jsx)(Rn,{result:d})]}),f&&(0,ne.jsx)("div",{style:{padding:"12px",background:"#fcf0f1",border:"1px solid #dc3232",borderRadius:"4px",color:"#dc3232",marginTop:"15px"},children:f})]})]})})},sr=function(t){var e=t.tabs,n=t.activeTab,r=t.onTabChange,o=t.onSave,i=t.saving,a=void 0!==i&&i,l=t.disabled,s=void 0!==l&&l,c=t.disabledTitle,u=void 0===c?"":c;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("style",{children:"\n\t\t\t\t\t.ai-media-settings-tab {\n\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\tborder-bottom: 2px solid transparent;\n\t\t\t\t\t\tpadding: 12px 20px;\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\t\tcolor: #646970;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\ttransition: all 0.2s ease;\n\t\t\t\t\t}\n\t\t\t\t\t.ai-media-settings-tab:hover {\n\t\t\t\t\t\tcolor: #2271b1;\n\t\t\t\t\t\tbackground: #f0f6fc;\n\t\t\t\t\t}\n\t\t\t\t\t.ai-media-settings-tab.active {\n\t\t\t\t\t\tcolor: #2271b1;\n\t\t\t\t\t\tborder-bottom-color: #2271b1;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,ne.jsxs)("div",{className:"ai-media-settings-header",style:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #dcdcde"},children:[(0,ne.jsx)("div",{className:"ai-media-settings-tabs",style:{display:"flex"},children:e.map(function(t){return(0,ne.jsx)("button",{className:"ai-media-settings-tab ".concat(n===t.id?"active":""),onClick:function(){return r(t.id)},children:t.label},t.id)})}),(0,ne.jsx)("div",{style:{paddingRight:"20px"},children:(0,ne.jsx)(we.Button,{variant:"primary",onClick:o,isBusy:a,disabled:s||a,title:u,children:a?"Saving...":"Save Settings"})})]})]})};var cr=[{id:"providers",label:"Providers"},{id:"prompt",label:"Prompt"},{id:"context",label:"Context"},{id:"configuration",label:"Configuration"},{id:"quality",label:"Quality Scoring"},{id:"playground",label:"Playground"}],ur=function(t){var e=t.alt+t.title+t.caption+t.keywords;return Math.abs(e-1)<=.01};function dr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return pr(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(pr(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,pr(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,pr(d,"constructor",c),pr(c,"constructor",s),s.displayName="GeneratorFunction",pr(c,o,"GeneratorFunction"),pr(d),pr(d,o,"Generator"),pr(d,r,function(){return this}),pr(d,"toString",function(){return"[object Generator]"}),(dr=function(){return{w:i,m:p}})()}function pr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}pr=function(t,e,n,r){function i(e,n){pr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},pr(t,e,n,r)}function fr(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function hr(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){fr(i,r,o,a,l,"next",t)}function l(t){fr(i,r,o,a,l,"throw",t)}a(void 0)})}}function mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return yr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const gr=function(t){var e=t.isOpen,n=t.onClose,o=t.preselectedImageId,a=void 0===o?null:o,l=mr((0,r.useState)({}),2),s=l[0],c=l[1],u=mr((0,r.useState)({}),2),d=u[0],p=u[1],f=mr((0,r.useState)({alt:.4,title:.3,caption:.2,keywords:.1}),2),h=f[0],m=f[1],y=mr((0,r.useState)(!1),2),g=y[0],v=y[1],x=mr((0,r.useState)(!0),2),b=x[0],j=x[1],S=mr((0,r.useState)(null),2),w=S[0],O=S[1],k=mr((0,r.useState)("providers"),2),C=k[0],A=k[1],T=mr((0,r.useState)(!1),2),P=T[0],_=T[1],I=mr((0,r.useState)(""),2),N=I[0],E=I[1],z=(s.site_context||"").length>1500;(0,r.useEffect)(function(){e&&D()},[e]);var D=function(){var t=hr(dr().m(function t(){var e,n;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,j(!0),t.n=1,i()({path:"/ai-media/v1/settings",method:"GET"});case 1:e=t.v,c(e.settings||{}),p(e.providers||{}),m(e.quality_weights||{alt:.4,title:.3,caption:.2,keywords:.1}),t.n=3;break;case 2:t.p=2,n=t.v,O({type:"error",message:"Error loading settings: "+n.message});case 3:return t.p=3,j(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),M=function(){var t=hr(dr().m(function t(){var e,n;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,v(!0),O(null),t.n=1,i()({path:"/ai-media/v1/settings",method:"POST",data:{settings:s,providers:d,quality_weights:h}});case 1:e=t.v,O({type:"success",message:e.message||"Settings saved successfully!"}),t.n=3;break;case 2:t.p=2,n=t.v,O({type:"error",message:"Error saving settings: "+n.message});case 3:return t.p=3,v(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}();return e?(0,ne.jsxs)(we.Modal,{title:"",onRequestClose:n,className:"ai-media-settings-modal",style:{maxWidth:"95vw",maxHeight:"95vh",width:"95vw",height:"95vh"},__experimentalHideHeader:!0,children:[(0,ne.jsx)("style",{children:"\n\t\t\t\t\t.ai-media-settings-modal .components-modal__content {\n\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t}\n\t\t\t\t\t.ai-media-settings-modal .components-modal__header {\n\t\t\t\t\t\tdisplay: none !important;\n\t\t\t\t\t}\n\t\t\t\t\t.ai-media-settings .components-form-toggle.is-checked .components-form-toggle__thumb {\n\t\t\t\t\t\tleft: 2px !important;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,ne.jsxs)("div",{className:"ai-media-settings",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,ne.jsxs)("div",{style:{padding:"20px 24px 16px",borderBottom:"1px solid #dcdcde",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,ne.jsx)("h1",{style:{margin:0,fontSize:"23px",fontWeight:400,lineHeight:1.3},children:"Plugin Settings"}),(0,ne.jsx)("button",{type:"button",onClick:n,style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"2px",color:"#646970"},onMouseEnter:function(t){t.currentTarget.style.background="#f0f0f1"},onMouseLeave:function(t){t.currentTarget.style.background="transparent"},"aria-label":"Close",children:(0,ne.jsx)("span",{className:"dashicons dashicons-no-alt",style:{fontSize:"20px",width:"20px",height:"20px"}})})]}),(0,ne.jsx)(sr,{tabs:cr,activeTab:C,onTabChange:A,onSave:M,saving:g,disabled:b||z||"quality"===C&&!ur(h),disabledTitle:z?"Site Context exceeds 1500 character limit":ur(h)||"quality"!==C?"":"Quality weights must total 100% before saving"}),w&&(0,ne.jsx)("div",{style:{padding:"0 20px",paddingTop:"16px"},children:(0,ne.jsx)(re,{notice:w,onDismiss:function(){return O(null)}})}),P&&(0,ne.jsxs)(we.Modal,{title:"API Key Required",onRequestClose:function(){return _(!1)},children:[(0,ne.jsx)("p",{children:N}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:function(){return _(!1)},children:"OK"})]}),b?(0,ne.jsx)("div",{style:{padding:"40px",textAlign:"center"},children:(0,ne.jsx)("p",{children:"Loading settings..."})}):(0,ne.jsxs)("div",{className:"ai-media-settings-content",style:{flex:1,overflow:"auto",padding:"20px"},children:["providers"===C&&(0,ne.jsx)(ze,{providers:d,setProviders:p,setShowModal:_,setModalMessage:E}),"prompt"===C&&(0,ne.jsx)(Ye,{settings:s,setSettings:c}),"context"===C&&(0,ne.jsx)(an,{settings:s,setSettings:c}),"configuration"===C&&(0,ne.jsx)(tn,{settings:s,setSettings:c}),"quality"===C&&(0,ne.jsx)(jn,{settings:s,setSettings:c,qualityWeights:h,setQualityWeights:m}),"playground"===C&&(0,ne.jsx)(lr,{preselectedImageId:a})]})]})]}):null};function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function xr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function br(t,e,n){return(e=function(t){var e=function(t){if("object"!=vr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=vr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return Sr(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Sr(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Sr(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,Sr(d,"constructor",c),Sr(c,"constructor",s),s.displayName="GeneratorFunction",Sr(c,o,"GeneratorFunction"),Sr(d),Sr(d,o,"Generator"),Sr(d,r,function(){return this}),Sr(d,"toString",function(){return"[object Generator]"}),(jr=function(){return{w:i,m:p}})()}function Sr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Sr=function(t,e,n,r){function i(e,n){Sr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Sr(t,e,n,r)}function wr(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function Or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return kr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Cr={easy:{label:"Easy (Safe)",description:"Maximum stability, minimal rate limit risk",icon:"",riskLevel:"low"},optimal:{label:"Optimal (Balanced)",description:"Optimal balance between speed and safety",icon:"",riskLevel:"medium",recommended:!0},extreme:{label:"Extreme (Maximum)",description:"Maximum speed, high rate limit risk",icon:"",riskLevel:"high",warning:"Only for dedicated API keys and enterprise tiers"}};const Ar=function(t){var e=t.selectedMode,n=void 0===e?"optimal":e,o=t.onModeChange,a=t.imageCount,l=void 0===a?0:a,s=Or((0,r.useState)({google:{tier:"tier_1",tier_name:"Detecting...",rpm:15,confidence:.5,description:"Detecting your API tier..."}}),2),c=s[0],u=s[1],d=Or((0,r.useState)({easy:1,optimal:2,extreme:3}),2),p=d[0],f=d[1],h=Or((0,r.useState)(!1),2),m=h[0],y=h[1];(0,r.useEffect)(function(){v()},[]);var g,v=function(){var t,e=(t=jr().m(function t(){var e,n,r;return jr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,i()({path:"/ai-media/v1/settings/detect-tiers",method:"POST",data:{force_refresh:!1}});case 1:(e=t.v).success&&e.tiers&&(u(e.tiers),(n=Object.keys(e.tiers)[0])&&e.tiers[n].recommended_concurrency&&f(e.tiers[n].recommended_concurrency)),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Failed to detect API tiers:",r),f({easy:3,optimal:8,extreme:12});case 3:return t.p=3,y(!1),t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){wr(i,r,o,a,l,"next",t)}function l(t){wr(i,r,o,a,l,"throw",t)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),x=function(){if(!c)return null;var t=Object.keys(c)[0];return t?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(n),!0).forEach(function(e){br(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({name:t},c[t]):null}();return m?(0,ne.jsx)("div",{className:"speed-mode-selector loading",children:(0,ne.jsx)("p",{children:"Detecting API tier..."})}):(0,ne.jsxs)("div",{className:"speed-mode-selector",children:[(0,ne.jsx)("h3",{children:"Processing Speed"}),x&&(0,ne.jsx)("div",{className:"tier-info",children:(0,ne.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",alignItems:"start"},children:[(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("p",{children:[(0,ne.jsx)("strong",{children:"Detected API Tier:"})," ",x.tier_name,x.description&&(0,ne.jsxs)(ne.Fragment,{children:[" - ",(0,ne.jsx)("span",{style:{fontStyle:"italic",fontSize:"12px",color:"#787c82"},children:x.description})]})]}),(0,ne.jsxs)("p",{className:"tier-details",children:["Rate Limit: ",x.rpm," Requests/min  Confidence: ",(100*x.confidence).toFixed(0),"%"]})]}),(0,ne.jsxs)("div",{className:"tier-recommendation",style:{borderRadius:"3px",fontSize:"12px",color:"#0066cc",fontWeight:"500",height:"100%",display:"flex",alignItems:"flex-start"},children:[" ",(g=x.rpm,g>=1e3?"Your tier supports Extreme mode for maximum performance. Feel free to push the limits!":g>=300?"With your tier, you can safely use Extreme mode for fast processing.":g>=50?"Optimal mode is perfect for your tier":"We recommend Easy mode for your tier to avoid hitting rate limits.")]})]})}),(0,ne.jsx)("div",{className:"speed-modes",children:Object.entries(Cr).map(function(t){var e=Or(t,2),r=e[0],i=e[1],a=p[r]||3,s=l>0?function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return"N/A";if(!n){var r=t/e*3.5;return r<60?"~".concat(Math.round(r),"s"):"~".concat(Math.round(r/60),"min")}var o=60/3.5*e,i=t/Math.min(o,n)*1.15,a=60*i;if(a<60)return"~".concat(Math.round(a),"s");if(a<3600)return"~".concat(Math.round(i),"min");var l=Math.floor(i/60),s=Math.round(i%60);return"~".concat(l,"h ").concat(s,"min")}(l,a,null==x?void 0:x.rpm):"N/A",c=n===r,u=x&&a>x.rpm/3;return(0,ne.jsxs)("div",{className:"speed-mode ".concat(c?"active":""," ").concat(i.riskLevel),onClick:function(){return o(r)},role:"button",tabIndex:0,onKeyPress:function(t){"Enter"!==t.key&&" "!==t.key||o(r)},children:[(0,ne.jsxs)("div",{className:"mode-header",children:[(0,ne.jsx)("span",{className:"icon",children:i.icon}),(0,ne.jsx)("span",{className:"label",children:i.label}),i.recommended&&(0,ne.jsx)("span",{className:"badge",children:"Recommended"})]}),(0,ne.jsx)("p",{className:"description",children:i.description}),(0,ne.jsxs)("div",{className:"mode-stats",children:[(0,ne.jsxs)("div",{className:"stat",children:[(0,ne.jsx)("span",{className:"stat-label",children:"Concurrency:"}),(0,ne.jsxs)("span",{className:"stat-value",children:[a," simultaneous"]})]}),l>0&&(0,ne.jsxs)("div",{className:"stat",children:[(0,ne.jsxs)("span",{className:"stat-label",children:["Time (",l," images):"]}),(0,ne.jsx)("span",{className:"stat-value",children:s})]}),(0,ne.jsxs)("div",{className:"stat",children:[(0,ne.jsx)("span",{className:"stat-label",children:"Risk:"}),(0,ne.jsxs)("span",{className:"stat-value risk-".concat(i.riskLevel),children:["low"===i.riskLevel&&"Low","medium"===i.riskLevel&&"Medium","high"===i.riskLevel&&"High"]})]})]}),i.warning&&(0,ne.jsxs)("div",{className:"warning",children:[" ",i.warning]}),u&&(0,ne.jsxs)("div",{className:"warning",style:{background:"#fff3cd",color:"#856404",border:"1px solid #ffc107"},children:[" Note: With your rate limit (",x.rpm," RPM), concurrency above ",Math.floor(x.rpm/3)," won't significantly improve speed."]})]},r)})}),(0,ne.jsx)("div",{className:"speed-mode-help",children:(0,ne.jsxs)("p",{className:"help-text",children:[(0,ne.jsx)("strong",{children:"Tip:"})," Optimal mode is recommended for most users. Use Extreme mode only if you have a dedicated API key and high tier."]})})]})};function Tr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Pr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pr(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const _r=function(t){var e=t.isOpen,n=t.imageCount,o=t.onConfirm,i=t.onCancel,a=Tr((0,r.useState)("optimal"),2),l=a[0],s=a[1],c=Tr((0,r.useState)(8),2),u=c[0];return c[1],e?(0,ne.jsx)("div",{className:"speed-mode-setup-overlay",children:(0,ne.jsxs)("div",{className:"speed-mode-setup-modal",children:[(0,ne.jsx)("h2",{children:"Batch Processing Setup"}),(0,ne.jsxs)("p",{className:"modal-description",children:["Select processing speed for batch processing ",n," images. The plugin has automatically detected your API tier and recommends optimal settings."]}),(0,ne.jsx)(Ar,{selectedMode:l,onModeChange:function(t){s(t)},imageCount:n}),(0,ne.jsxs)("div",{className:"modal-actions",children:[(0,ne.jsx)("button",{type:"button",className:"button button-secondary",onClick:i,children:"Cancel"}),(0,ne.jsx)("button",{type:"button",className:"button button-primary",onClick:function(){o(l,u)},style:{marginLeft:"8px"},children:"Start Processing"})]})]})}):null},Ir=function(t){var e=t.onAddImage;return(0,ne.jsxs)("div",{className:"ai-media-library-header",style:{display:"flex",alignItems:"center",marginBottom:"20px",gap:"20px"},children:[(0,ne.jsx)("h1",{style:{margin:0,fontSize:"23px",fontWeight:"400",lineHeight:"1.3"},children:"AI Media Library"}),(0,ne.jsxs)(we.Button,{variant:"primary",onClick:e,style:{display:"inline-flex",alignItems:"center",gap:"6px"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-plus-alt2",style:{fontSize:"18px"}}),"Add Image"]})]})};function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Er(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Er(Object(n),!0).forEach(function(e){Dr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Dr(t,e,n){return(e=function(t){var e=function(t){if("object"!=Nr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nr(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Br(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Br(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Fr=function(t){var e,n=t.label,o=t.value,i=t.options,a=t.onChange,l=Mr((0,r.useState)(!1),2),s=l[0],c=l[1],u=Mr((0,r.useState)(!1),2),d=u[0],p=u[1];return(0,ne.jsxs)("div",{className:"components-base-control",children:[(0,ne.jsx)("label",{className:"components-base-control__label",style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#1d2327",lineHeight:"1.4"},children:n}),(0,ne.jsx)("select",{value:o,onChange:function(t){return a(t.target.value)},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},onFocus:function(){return p(!0)},onBlur:function(){return p(!1)},style:(e={minHeight:"38px",padding:"8px 32px 8px 12px",fontSize:"14px",lineHeight:"1.4",border:"1px solid #8c8f94",borderRadius:"3px",background:"#fff",color:"#1d2327",boxSizing:"border-box",appearance:"none",backgroundImage:"url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D%2220%22%20height%3D%2220%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M5%206l5%205%205-5%202%201-7%207-7-7%202-1z%22%20fill%3D%22%232c3338%22%2F%3E%3C%2Fsvg%3E')",backgroundRepeat:"no-repeat",backgroundPosition:"right 8px top 50%",backgroundSize:"20px 20px",transition:"all 0.2s ease",cursor:"pointer",width:"100%"},d?zr(zr({},e),{},{borderColor:"#2271b1",outline:"2px solid transparent",boxShadow:"0 0 0 1px #2271b1, 0 2px 4px rgba(34, 113, 177, 0.1)",backgroundColor:"#fff"}):s?zr(zr({},e),{},{borderColor:"#2271b1",backgroundColor:"#f9f9f9"}):e),children:i.map(function(t){return(0,ne.jsx)("option",{value:t.value,children:t.label},t.value)})})]})},Rr=function(t){var e=t.searchInput,n=t.onSearchChange,r=t.onSearch,o=t.onSearchKeyDown,i=t.onClearSearch,a=t.statusFilter,l=t.onStatusFilterChange,s=t.statusFilterOptions,c=t.attachmentFilter,u=t.onAttachmentFilterChange,d=t.attachmentFilterOptions;return(0,ne.jsx)("div",{className:"ai-media-library-toolbar",children:(0,ne.jsxs)("div",{className:"ai-media-library-filters",style:{alignItems:"baseline"},children:[(0,ne.jsxs)("div",{className:"search-control-wrapper",children:[(0,ne.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,ne.jsx)(we.TextControl,{label:"Search",value:e,onChange:n,onKeyDown:o,placeholder:"Search filename, ALT text, caption..."}),e&&(0,ne.jsx)("button",{type:"button",className:"search-clear-button",onClick:i,"aria-label":"Clear search",title:"Clear search",children:""})]}),(0,ne.jsx)(we.Button,{variant:"primary",onClick:r,className:"search-button",style:{marginBottom:"9px"},children:"Search"})]}),(0,ne.jsx)("div",{style:{flex:"0 0 auto",minWidth:"200px"},children:(0,ne.jsx)(Fr,{label:"Status",value:a,options:s,onChange:l})}),(0,ne.jsx)("div",{style:{flex:"0 0 auto",minWidth:"200px"},children:(0,ne.jsx)(Fr,{label:"Attachment",value:c,options:d,onChange:u})})]})})};function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Gr=function(t){var e,n,o=t.selectedIds,i=t.batchProcessing,a=t.onBatchAnalyze,l=t.onBulkDelete,s=t.onBulkStatusChange,c=t.totalCost,u=t.loadingCosts,d=t.onShowCostModal,p=t.onLoadCostStats,f=t.onShowSettingsModal,h=t.onClearOpcache,m=(e=(0,r.useState)(""),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return Lr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],g=m[1];return(0,ne.jsxs)("div",{className:"ai-media-library-bulk-actions",children:[o.length>0?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(we.Button,{variant:"primary",onClick:function(){return a("selected")},disabled:i,isBusy:i,children:i?"Processing...":"Analyze Selected (".concat(o.length,")")}),(0,ne.jsxs)(we.Button,{variant:"secondary",onClick:l,disabled:i,style:{color:"#b32d2e",borderColor:"#b32d2e",marginLeft:"8px"},children:["Bulk Delete (",o.length,")"]}),(0,ne.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",marginLeft:"16px",padding:"0 16px",borderLeft:"1px solid #dcdcde"},children:[(0,ne.jsx)("label",{htmlFor:"bulk-status-select",style:{fontSize:"13px",fontWeight:"500",color:"#50575e"},children:"Change Status:"}),(0,ne.jsxs)("select",{id:"bulk-status-select",value:y,onChange:function(t){return g(t.target.value)},disabled:i,style:{padding:"6px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px",minWidth:"120px"},children:[(0,ne.jsx)("option",{value:"",children:"-- Select Status --"}),(0,ne.jsx)("option",{value:"pending",children:"Pending (Delete all meta data)"}),(0,ne.jsx)("option",{value:"processed",children:"Processed"}),(0,ne.jsx)("option",{value:"approved",children:"Approved"})]}),(0,ne.jsxs)(we.Button,{variant:y?"primary":"secondary",onClick:function(){return s(y)},disabled:i||!y,style:{fontSize:"13px"},children:["Apply (",o.length,")"]})]})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(we.Button,{variant:"secondary",onClick:function(){return a("missing_metadata")},disabled:i,children:"Analyze Missing Metadata"}),(0,ne.jsx)(we.Button,{variant:"secondary",onClick:function(){return a("all")},disabled:i,children:"Analyze All Images"})]}),(0,ne.jsx)("button",{type:"button",onClick:h,style:{marginLeft:"auto",padding:"10px 12px",background:"#f0f6fc",border:"1px solid #2271b1",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:function(t){t.currentTarget.style.background="#e5f2fa",t.currentTarget.style.borderColor="#135e96"},onMouseLeave:function(t){t.currentTarget.style.background="#f0f6fc",t.currentTarget.style.borderColor="#2271b1"},title:"Clear OPCache",children:(0,ne.jsx)("span",{className:"dashicons dashicons-update",style:{color:"#2271b1",fontSize:"30px",width:"30px",height:"30px"}})}),(0,ne.jsx)("button",{type:"button",onClick:f,style:{marginLeft:"8px",padding:"10px 12px",background:"#f0f6fc",border:"1px solid #2271b1",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:function(t){t.currentTarget.style.background="#e5f2fa",t.currentTarget.style.borderColor="#135e96"},onMouseLeave:function(t){t.currentTarget.style.background="#f0f6fc",t.currentTarget.style.borderColor="#2271b1"},title:"Settings",children:(0,ne.jsx)("span",{className:"dashicons dashicons-admin-generic",style:{color:"#2271b1",fontSize:"30px",width:"30px",height:"30px"}})}),(0,ne.jsxs)("button",{type:"button",onClick:function(){p(),d()},style:{marginLeft:"8px",padding:"8px 16px",background:"#f0f6fc",border:"1px solid #2271b1",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:function(t){t.currentTarget.style.background="#e5f2fa",t.currentTarget.style.borderColor="#135e96"},onMouseLeave:function(t){t.currentTarget.style.background="#f0f6fc",t.currentTarget.style.borderColor="#2271b1"},children:[(0,ne.jsx)("span",{className:"dashicons dashicons-money-alt",style:{color:"#2271b1",fontSize:"18px",width:"18px",height:"18px"}}),(0,ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[(0,ne.jsx)("span",{style:{fontSize:"11px",color:"#646970",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",lineHeight:"1.2"},children:"Total Cost"}),(0,ne.jsx)("span",{style:{fontSize:"16px",fontWeight:"600",color:"#1d2327",lineHeight:"1.2"},children:u?"...":"$".concat(c.toFixed(4))})]})]})]})};function Ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Wr=function(t){var e,n,o,i,a=t.attachment,l=t.onMouseEnter,s=t.onMouseLeave,c=(null===(e=a.media_details)||void 0===e||null===(e=e.sizes)||void 0===e||null===(e=e.thumbnail)||void 0===e?void 0:e.source_url)||a.source_url,u=(o=(0,r.useState)(!1),i=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(o,i)||function(t,e){if(t){if("string"==typeof t)return Ur(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ur(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=u[0],p=u[1];return(0,ne.jsx)("td",{className:"thumbnail-column",onMouseEnter:l,onMouseLeave:s,children:(0,ne.jsx)("a",{href:"".concat((null===(n=window.aiMediaSEO)||void 0===n?void 0:n.adminUrl)||"/wp-admin/","post.php?post=").concat(a.id,"&action=edit"),target:"_blank",rel:"noopener noreferrer",style:{display:"block",cursor:"pointer"},children:c&&!d?(0,ne.jsx)("img",{src:c,alt:a.alt_text||"",style:{width:"60px",height:"60px",objectFit:"cover"},onError:function(){p(!0)}}):(0,ne.jsx)("div",{className:"placeholder-image",style:{width:"60px",height:"60px",background:"#ddd",display:"flex",alignItems:"center",justifyContent:"center",color:"#999",fontSize:"10px",textAlign:"center"},children:"No Image"})})})};function Hr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return qr(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(qr(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,qr(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,qr(d,"constructor",c),qr(c,"constructor",s),s.displayName="GeneratorFunction",qr(c,o,"GeneratorFunction"),qr(d),qr(d,o,"Generator"),qr(d,r,function(){return this}),qr(d,"toString",function(){return"[object Generator]"}),(Hr=function(){return{w:i,m:p}})()}function qr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qr=function(t,e,n,r){function i(e,n){qr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},qr(t,e,n,r)}function $r(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}const Kr=function(t){var e,n,r,o,a,l,s,u,d,p,f,h=t.attachment,m=t.editingTitle,y=t.savingTitle,g=t.queueStatus,v=t.onTitleClick,x=t.onTitleChange,b=t.onTitleKeyDown,j=t.onTitleSave,S=t.onLoadAllAttachments,w="processed"===(null===(e=h.meta)||void 0===e?void 0:e._ai_media_status),O=(null===(n=h.meta)||void 0===n?void 0:n._ai_media_draft_title)||"",k=c(null===(r=h.title)||void 0===r?void 0:r.rendered)||"",C=w&&O?O:k,A=ee(h,g),T=function(){var t,e=(t=Hr().m(function t(e){var n,r;return Hr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e.preventDefault(),e.stopPropagation(),confirm('Are you sure you want to delete "'.concat(c(null===(n=h.title)||void 0===n?void 0:n.rendered)||"Untitled",'" permanently?'))){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,i()({path:"/wp/v2/media/".concat(h.id,"?force=true"),method:"DELETE"});case 2:S(),t.n=4;break;case 3:t.p=3,r=t.v,alert("Error deleting image: "+r.message);case 4:return t.a(2)}},t,null,[[1,3]])}),function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){$r(i,r,o,a,l,"next",t)}function l(t){$r(i,r,o,a,l,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}();return(0,ne.jsx)("td",{children:m&&m.id===h.id?(0,ne.jsx)("input",{type:"text",value:m.value,onChange:function(t){return x(t.target.value)},onKeyDown:b,onBlur:j,disabled:y,autoFocus:!0,onClick:function(t){return t.stopPropagation()},style:{width:"100%",padding:"4px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px",fontWeight:"normal"}}):(0,ne.jsxs)("div",{children:[(0,ne.jsxs)("strong",{style:{cursor:A?"not-allowed":"pointer"},onClick:function(){return!A&&v(h)},children:[(null===(o=h.language_info)||void 0===o?void 0:o.flag)&&(0,ne.jsx)("span",{title:"".concat(h.language_info.name||h.language_info.code," (").concat(h.language_info.code,")"),style:{fontSize:"16px",marginRight:"6px",verticalAlign:"middle",display:"inline-block",lineHeight:"1"},children:h.language_info.flag}),C?w&&O?(0,ne.jsxs)("span",{style:{backgroundColor:"#fff3cd",padding:"2px 4px",borderRadius:"2px",display:"inline-block"},children:[(0,ne.jsx)("strong",{style:{color:"#856404",fontSize:"11px",marginRight:"4px"},children:"DRAFT:"}),C]}):C||"Untitled":(0,ne.jsx)("em",{style:{color:"#999",fontWeight:"normal"},children:"Click to add title"})]}),(0,ne.jsx)("br",{}),(0,ne.jsx)("small",{children:(null===(a=h.source_url)||void 0===a?void 0:a.split("/").pop())||""}),(0,ne.jsxs)("div",{className:"row-actions",children:[(0,ne.jsxs)("span",{className:"edit",children:[(0,ne.jsx)("a",{href:"".concat((null===(l=window.aiMediaSEO)||void 0===l?void 0:l.adminUrl)||"/wp-admin/","post.php?post=").concat(h.id,"&action=edit"),"aria-label":'Edit "'.concat(c(null===(s=h.title)||void 0===s?void 0:s.rendered)||"Untitled",'"'),children:"Edit"})," |"]}),(0,ne.jsxs)("span",{className:"delete",children:[(0,ne.jsx)("button",{type:"button",className:"button-link submitdelete",onClick:T,"aria-label":'Delete "'.concat(c(null===(u=h.title)||void 0===u?void 0:u.rendered)||"Untitled",'" permanently'),children:"Delete"})," |"]}),(0,ne.jsxs)("span",{className:"view",children:[(0,ne.jsx)("a",{href:h.source_url,target:"_blank",rel:"noopener noreferrer","aria-label":'View "'.concat(c(null===(d=h.title)||void 0===d?void 0:d.rendered)||"Untitled",'"'),children:"View"})," |"]}),(0,ne.jsxs)("span",{className:"copy",children:[(0,ne.jsx)("button",{type:"button",className:"button-link copy-attachment-url",onClick:function(t){t.stopPropagation(),navigator.clipboard.writeText(h.source_url);var e=t.target.nextElementSibling;e&&(e.classList.remove("hidden"),setTimeout(function(){return e.classList.add("hidden")},2e3))},"aria-label":'Copy "'.concat(c(null===(p=h.title)||void 0===p?void 0:p.rendered)||"Untitled",'" URL to clipboard'),children:"Copy URL"}),(0,ne.jsx)("span",{className:"success hidden","aria-hidden":"true",children:"Copied!"})," |"]}),(0,ne.jsx)("span",{className:"download",children:(0,ne.jsx)("a",{href:h.source_url,"aria-label":'Download "'.concat(c(null===(f=h.title)||void 0===f?void 0:f.rendered)||"Untitled",'"'),download:!0,children:"Download"})})]})]})})},Vr=function(t){var e,n,r=t.attachment,o=t.editingAlt,i=t.savingAlt,a=t.queueStatus,l=t.onAltClick,s=t.onAltChange,c=t.onAltKeyDown,u=t.onAltSave,d="processed"===(null===(e=r.meta)||void 0===e?void 0:e._ai_media_status),p=(null===(n=r.meta)||void 0===n?void 0:n._ai_media_draft_alt)||"",f=r.alt_text||"",h=d&&p?p:f,m=ee(r,a),y=h&&!m;return(0,ne.jsx)("td",{style:{cursor:o&&o.id===r.id?"default":"pointer",minWidth:y?"150px":"100px",maxWidth:"300px",width:y?"auto":"120px"},children:o&&o.id===r.id?(0,ne.jsx)("textarea",{value:o.value,onChange:function(t){return s(t.target.value)},onKeyDown:c,onBlur:u,disabled:i,autoFocus:!0,rows:3,onClick:function(t){return t.stopPropagation()},style:{width:"100%",padding:"4px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px",resize:"vertical",fontFamily:"inherit"}}):(0,ne.jsx)("span",{onClick:function(){return l(r)},style:{display:"block",padding:"4px 0",cursor:m?"not-allowed":"pointer",opacity:m?.6:1},children:m?(0,ne.jsx)("em",{style:{color:"#0071a1"},children:"Processing..."}):h?d&&p?(0,ne.jsxs)("span",{style:{backgroundColor:"#fff3cd",padding:"2px 4px",borderRadius:"2px",display:"inline-block"},children:[(0,ne.jsx)("strong",{style:{color:"#856404",fontSize:"11px",marginRight:"4px"},children:"DRAFT:"}),h]}):h:(0,ne.jsx)("em",{style:{color:"#999"},children:"Click to add ALT text"})})})},Yr=function(t){var e,n,r,o=t.attachment,i=t.editingCaption,a=t.savingCaption,l=t.queueStatus,s=t.onCaptionClick,u=t.onCaptionChange,d=t.onCaptionKeyDown,p=t.onCaptionSave,f="processed"===(null===(e=o.meta)||void 0===e?void 0:e._ai_media_status),h=(null===(n=o.meta)||void 0===n?void 0:n._ai_media_draft_caption)||"",m=c(null===(r=o.caption)||void 0===r?void 0:r.rendered)||"",y=f&&h?h:m,g=ee(o,l),v=y&&!g;return(0,ne.jsx)("td",{style:{cursor:i&&i.id===o.id?"default":"pointer",minWidth:v?"150px":"100px",maxWidth:"280px",width:v?"auto":"120px"},children:i&&i.id===o.id?(0,ne.jsx)("textarea",{value:i.value,onChange:function(t){return u(t.target.value)},onKeyDown:d,onBlur:p,disabled:a,autoFocus:!0,rows:3,onClick:function(t){return t.stopPropagation()},style:{width:"100%",padding:"4px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px",resize:"vertical",fontFamily:"inherit"}}):(0,ne.jsx)("span",{onClick:function(){return s(o)},style:{display:"block",padding:"4px 0",cursor:g?"not-allowed":"pointer",opacity:g?.6:1,color:"#666",fontSize:"13px"},children:g?(0,ne.jsx)("em",{style:{color:"#0071a1"},children:"Processing..."}):y?f&&h?(0,ne.jsxs)("span",{style:{backgroundColor:"#fff3cd",padding:"2px 4px",borderRadius:"2px",display:"inline-block"},children:[(0,ne.jsx)("strong",{style:{color:"#856404",fontSize:"11px",marginRight:"4px"},children:"DRAFT:"}),y]}):y:(0,ne.jsx)("em",{style:{color:"#999"},children:"Click to add caption"})})})},Qr=function(t){var e,n,r,o,i,a,l=t.attachment,s=t.editingStatus,c=t.savingStatus,u=t.queueStatus,d=t.onStatusClick,p=t.onStatusChange,f=t.onStatusSave,h=t.onApprove,m=ee(l,u);return(0,ne.jsx)("td",{children:s&&s.id===l.id?(0,ne.jsxs)("select",{value:s.value,onChange:function(t){return p(t.target.value)},onBlur:f,disabled:c,autoFocus:!0,onClick:function(t){return t.stopPropagation()},style:{padding:"4px 8px",border:"1px solid #8c8f94",borderRadius:"2px",fontSize:"13px"},children:[(0,ne.jsx)("option",{value:"pending",children:"Pending"}),(0,ne.jsx)("option",{value:"processed",children:"Processed"}),(0,ne.jsx)("option",{value:"approved",children:"Approved"})]}):(0,ne.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,ne.jsx)("span",{className:"ai-media-status ai-media-status-".concat(null!==(e=u[l.id])&&void 0!==e&&e.in_queue?"processing":(null===(n=l.meta)||void 0===n?void 0:n._ai_media_status)||"pending"),onClick:function(){return d(l)},style:{cursor:m?"not-allowed":"pointer",opacity:m?.8:1},children:(a=null!==(o=u[l.id])&&void 0!==o&&o.in_queue?"processing":(null===(i=l.meta)||void 0===i?void 0:i._ai_media_status)||"pending",a.charAt(0).toUpperCase()+a.slice(1))}),"processed"===(null===(r=l.meta)||void 0===r?void 0:r._ai_media_status)&&(0,ne.jsx)("input",{type:"checkbox",onChange:function(){return h(l)},disabled:c||m,title:"Approve"})]})})},Xr=function(t){var e,n=t.attachment,r=t.attachingTo,o=t.onAttachToPost,i=t.onDetach,a=n.post||n.parent||0,l=n.parent_info;if(r===n.id)return(0,ne.jsx)("td",{children:(0,ne.jsx)("span",{style:{color:"#999",fontSize:"13px"},children:"Attaching..."})});if(!a||0===a)return(0,ne.jsx)("td",{children:(0,ne.jsx)("button",{type:"button",className:"button-link",onClick:function(){return o(n.id)},style:{color:"#2271b1",textDecoration:"none",background:"none",border:"none",padding:0,cursor:"pointer",fontSize:"13px",fontFamily:"inherit"},children:"Attach to post/page"})});if(l){var s,c=(null===(s=window.aiMediaSEO)||void 0===s?void 0:s.adminUrl)||"/wp-admin/";return(0,ne.jsx)("td",{children:(0,ne.jsxs)("div",{style:{fontSize:"13px"},children:[(0,ne.jsx)("a",{href:"".concat(c,"post.php?post=").concat(l.id,"&action=edit"),target:"_blank",rel:"noopener noreferrer",style:{color:"#2271b1",textDecoration:"none"},children:l.title}),l.type&&(0,ne.jsxs)("span",{style:{color:"#646970",fontSize:"12px",marginLeft:"6px"},children:["(",(e=l.type,{post:"Post",page:"Page"}[e]||e.replace(/_/g," ").replace(/\b\w/g,function(t){return t.toUpperCase()})),")"]}),(0,ne.jsx)("br",{}),(0,ne.jsx)("button",{type:"button",className:"button-link",onClick:function(){return i(n.id)},style:{color:"#b32d2e",textDecoration:"none",background:"none",border:"none",padding:0,cursor:"pointer",fontSize:"12px",marginTop:"4px",fontFamily:"inherit"},children:"Detach"})]})})}return(0,ne.jsx)("td",{children:(0,ne.jsxs)("div",{style:{fontSize:"13px",color:"#666"},children:["Post #",a,(0,ne.jsx)("br",{}),(0,ne.jsx)("button",{type:"button",className:"button-link",onClick:function(){return i(n.id)},style:{color:"#b32d2e",textDecoration:"none",background:"none",border:"none",padding:0,cursor:"pointer",fontSize:"12px",marginTop:"4px",fontFamily:"inherit"},children:"Detach"})]})})},Jr=function(t){var e=t.attachment;return(0,ne.jsx)("td",{children:e.model?(0,ne.jsx)("div",{style:{fontSize:"11px",color:"#666"},children:e.model}):(0,ne.jsx)("span",{style:{color:"#999"},children:""})})},Zr=function(t){var e,n,r=t.attachment,o=(null===(e=window.aiMediaSEO)||void 0===e||null===(e=e.settings)||void 0===e?void 0:e.auto_approve_threshold)||.85;return(0,ne.jsx)("td",{children:null!==r.score&&void 0!==r.score?(n=function(t){return t>=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:.85)?{className:"score-high",bgColor:"#d4edda",textColor:"#155724"}:t>=.7?{className:"score-medium",bgColor:"#fff3cd",textColor:"#856404"}:{className:"score-low",bgColor:"#f8d7da",textColor:"#721c24"}}(r.score,o),(0,ne.jsxs)("span",{className:n.className,style:{display:"inline-block",padding:"4px 8px",borderRadius:"3px",fontSize:"13px",fontWeight:"600",backgroundColor:n.bgColor,color:n.textColor},children:[(100*r.score).toFixed(0),"%"]})):(0,ne.jsx)("span",{style:{color:"#999"},children:""})})},to=function(t){var e,n,r=t.attachment,o=t.queueStatus,i=t.processingIds,a=t.onAnalyze,l=(null===(e=r.meta)||void 0===e||e._ai_media_status,(null===(n=o[r.id])||void 0===n?void 0:n.in_queue)||!1),s=i.includes(r.id),c=l||s;return(0,ne.jsx)("td",{children:(0,ne.jsx)(we.Button,{variant:"secondary",size:"small",onClick:function(){return a(r.id)},disabled:c,className:c?"analyze-button-processing":"",children:"Analyze"})})},eo=function(t){var e=t.attachment,n=t.isSelected,r=t.onToggleSelection,o=t.isColumnVisible,i=t.editingTitle,a=t.savingTitle,l=t.editingAlt,s=t.savingAlt,c=t.editingCaption,u=t.savingCaption,d=t.editingStatus,p=t.savingStatus,f=t.queueStatus,h=t.processingIds,m=t.attachingTo,y=t.onTitleClick,g=t.onTitleChange,v=t.onTitleKeyDown,x=t.onTitleSave,b=t.onLoadAllAttachments,j=t.onAltClick,S=t.onAltChange,w=t.onAltKeyDown,O=t.onAltSave,k=t.onCaptionClick,C=t.onCaptionChange,A=t.onCaptionKeyDown,T=t.onCaptionSave,P=t.onStatusClick,_=t.onStatusChange,I=t.onStatusSave,N=t.onApprove,E=t.onAttachToPost,z=t.onDetach,D=t.onAnalyze,M=t.onThumbnailEnter,B=t.onThumbnailLeave;return(0,ne.jsxs)("tr",{children:[(0,ne.jsx)("th",{className:"check-column",onClick:function(){return r(e.id)},style:{cursor:"pointer"},children:(0,ne.jsx)("input",{type:"checkbox",checked:n,onChange:function(t){return t.stopPropagation()},onClick:function(){return r(e.id)}})}),(0,ne.jsx)(Wr,{attachment:e,onMouseEnter:function(t){return M(t,e)},onMouseLeave:B}),o("file")&&(0,ne.jsx)(Kr,{attachment:e,editingTitle:i,savingTitle:a,queueStatus:f,onTitleClick:y,onTitleChange:g,onTitleKeyDown:v,onTitleSave:x,onLoadAllAttachments:b}),o("alt")&&(0,ne.jsx)(Vr,{attachment:e,editingAlt:l,savingAlt:s,queueStatus:f,onAltClick:j,onAltChange:S,onAltKeyDown:w,onAltSave:O}),o("caption")&&(0,ne.jsx)(Yr,{attachment:e,editingCaption:c,savingCaption:u,queueStatus:f,onCaptionClick:k,onCaptionChange:C,onCaptionKeyDown:A,onCaptionSave:T}),o("status")&&(0,ne.jsx)(Qr,{attachment:e,editingStatus:d,savingStatus:p,queueStatus:f,onStatusClick:P,onStatusChange:_,onStatusSave:I,onApprove:N}),o("attached_to")&&(0,ne.jsx)(Xr,{attachment:e,attachingTo:m,onAttachToPost:E,onDetach:z}),o("provider")&&(0,ne.jsx)(Jr,{attachment:e}),o("score")&&(0,ne.jsx)(Zr,{attachment:e}),(0,ne.jsx)(to,{attachment:e,queueStatus:f,processingIds:h,onAnalyze:D})]},e.id)};function no(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ro(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ro(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const oo=function(t){var e=t.currentPage,n=t.totalPages,o=t.totalItems,i=t.countLoading,a=t.onPageChange,l=no((0,r.useState)(!1),2),s=l[0],c=l[1],u=no((0,r.useState)(e.toString()),2),d=u[0],p=u[1],f=(0,r.useRef)(null);(0,r.useEffect)(function(){s&&f.current&&(f.current.focus(),f.current.select())},[s]);var h=function(){i||(p(e.toString()),c(!0))};if(null===o||null===n)return(0,ne.jsxs)("div",{className:"tablenav-pages pagination-loading",children:[(0,ne.jsx)(we.Spinner,{}),(0,ne.jsx)("span",{className:"pagination-loading-text",children:i?"Counting images...":"Loading count..."}),(0,ne.jsx)("span",{className:"pagination-hint",children:"You can browse and edit images while counting"})]});if(n<=1)return null;var m=i;return(0,ne.jsxs)("div",{className:"tablenav-pages",children:[(0,ne.jsxs)("span",{className:"displaying-num",children:[o," ",1===o?"item":"items"]}),(0,ne.jsxs)("span",{className:"pagination-links",children:[(0,ne.jsx)(we.Button,{className:"first-page button",disabled:1===e||m,onClick:function(){return a(1)},"aria-label":"First page",title:m?"Please wait while counting...":"",children:""}),(0,ne.jsx)(we.Button,{className:"prev-page button",disabled:1===e||m,onClick:function(){return a(e-1)},"aria-label":"Previous page",title:m?"Please wait while counting...":"",children:""}),(0,ne.jsx)("span",{className:"paging-input",children:s?(0,ne.jsxs)("span",{className:"tablenav-paging-text",children:[(0,ne.jsx)("input",{ref:f,type:"text",className:"current-page",value:d,onChange:function(t){var e=t.target.value;(""===e||/^\d+$/.test(e))&&p(e)},onKeyDown:function(t){"Enter"===t.key?function(){var t=parseInt(d,10);if(isNaN(t)||t<1||t>n)return c(!1),void p(e.toString());c(!1),t!==e&&a(t)}():"Escape"===t.key&&(c(!1),p(e.toString()))},onBlur:function(){c(!1),p(e.toString())},size:"3","aria-label":"Current page","aria-describedby":"table-paging",disabled:i})," of ",(0,ne.jsx)("span",{className:"total-pages",children:n})]}):(0,ne.jsxs)("span",{className:"tablenav-paging-text",onClick:h,style:{cursor:i?"default":"pointer",userSelect:"none"},title:i?"":"Click to jump to page",role:"button",tabIndex:i?-1:0,onKeyDown:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),h())},children:[e," of ",(0,ne.jsx)("span",{className:"total-pages",children:n})]})}),(0,ne.jsx)(we.Button,{className:"next-page button",disabled:e===n||m,onClick:function(){return a(e+1)},"aria-label":"Next page",title:m?"Please wait while counting...":"",children:""}),(0,ne.jsx)(we.Button,{className:"last-page button",disabled:e===n||m,onClick:function(){return a(n)},"aria-label":"Last page",title:m?"Please wait while counting...":"",children:""})]})]})},io=function(t){var e=t.paginatedAttachments,n=t.selectedIds,r=t.onSelectAll,o=t.onToggleSelection,i=t.isColumnVisible,a=t.currentPage,l=t.totalPages,s=t.totalItems,c=t.countLoading,u=t.onPageChange,d=t.editingTitle,p=t.savingTitle,f=t.editingAlt,h=t.savingAlt,m=t.editingCaption,y=t.savingCaption,g=t.editingStatus,v=t.savingStatus,x=t.queueStatus,b=t.processingIds,j=t.attachingTo,S=t.onTitleClick,w=t.onTitleChange,O=t.onTitleKeyDown,k=t.onTitleSave,C=t.onLoadAllAttachments,A=t.onAltClick,T=t.onAltChange,P=t.onAltKeyDown,_=t.onAltSave,I=t.onCaptionClick,N=t.onCaptionChange,E=t.onCaptionKeyDown,z=t.onCaptionSave,D=t.onStatusClick,M=t.onStatusChange,B=t.onStatusSave,F=t.onApprove,R=t.onAttachToPost,L=t.onDetach,G=t.onAnalyze,U=t.onThumbnailEnter,W=t.onThumbnailLeave,H=3+(i("file")?1:0)+(i("alt")?1:0)+(i("caption")?1:0)+(i("status")?1:0)+(i("attached_to")?1:0)+(i("provider")?1:0)+(i("score")?1:0);return(0,ne.jsxs)("div",{className:"ai-media-library-table",children:[(null===l||l>1)&&(0,ne.jsx)("div",{className:"tablenav top",children:(0,ne.jsx)(oo,{currentPage:a,totalPages:l,totalItems:s,countLoading:c,onPageChange:u})}),(0,ne.jsxs)("table",{className:"wp-list-table widefat fixed striped",children:[(0,ne.jsx)("thead",{children:(0,ne.jsxs)("tr",{children:[(0,ne.jsx)("th",{className:"check-column",onClick:r,style:{cursor:"pointer"},children:(0,ne.jsx)("input",{type:"checkbox",checked:e.length>0&&e.every(function(t){return n.includes(t.id)}),onChange:function(t){return t.stopPropagation()},onClick:r})}),(0,ne.jsx)("th",{className:"thumbnail-column",children:"Image"}),i("file")&&(0,ne.jsx)("th",{children:"File"}),i("alt")&&(0,ne.jsx)("th",{children:"ALT text"}),i("caption")&&(0,ne.jsx)("th",{children:"Caption"}),i("status")&&(0,ne.jsx)("th",{children:"Status"}),i("attached_to")&&(0,ne.jsx)("th",{children:"Attached to"}),i("provider")&&(0,ne.jsx)("th",{children:"Model"}),i("score")&&(0,ne.jsx)("th",{children:"Score"}),(0,ne.jsx)("th",{children:"Actions"})]})}),(0,ne.jsx)("tbody",{children:0===e.length?(0,ne.jsx)("tr",{children:(0,ne.jsx)("td",{colSpan:H,style:{textAlign:"center",padding:"2em"},children:"No images found. Upload some images to get started."})}):e.map(function(t){return(0,ne.jsx)(eo,{attachment:t,isSelected:n.includes(t.id),onToggleSelection:o,isColumnVisible:i,editingTitle:d,savingTitle:p,editingAlt:f,savingAlt:h,editingCaption:m,savingCaption:y,editingStatus:g,savingStatus:v,queueStatus:x,processingIds:b,attachingTo:j,onTitleClick:S,onTitleChange:w,onTitleKeyDown:O,onTitleSave:k,onLoadAllAttachments:C,onAltClick:A,onAltChange:T,onAltKeyDown:P,onAltSave:_,onCaptionClick:I,onCaptionChange:N,onCaptionKeyDown:E,onCaptionSave:z,onStatusClick:D,onStatusChange:M,onStatusSave:B,onApprove:F,onAttachToPost:R,onDetach:L,onAnalyze:G,onThumbnailEnter:U,onThumbnailLeave:W},t.id)})})]}),(null===l||l>1)&&(0,ne.jsx)("div",{className:"tablenav bottom",children:(0,ne.jsx)(oo,{currentPage:a,totalPages:l,totalItems:s,countLoading:c,onPageChange:u})})]})};function ao(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var s=r&&r.prototype instanceof l?r:l,c=Object.create(s.prototype);return lo(c,"_invoke",function(n,r,o){var i,l,s,c=0,u=o||[],d=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,n){return i=e,l=0,s=t,p.n=n,a}};function f(n,r){for(l=n,s=r,e=0;!d&&c&&!o&&e<u.length;e++){var o,i=u[e],f=p.p,h=i[2];n>3?(o=h===r)&&(s=i[(l=i[4])?5:(l=3,3)],i[4]=i[5]=t):i[0]<=f&&((o=n<2&&f<i[1])?(l=0,p.v=r,p.n=i[1]):f<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,p.n=h,l=0))}if(o||n>1)return a;throw d=!0,r}return function(o,u,h){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),l=u,s=h;(e=l<2?t:s)||!d;){i||(l?l<3?(l>1&&(p.n=-1),f(l,s)):p.n=s:p.v=s);try{if(c=2,i){if(l||(o="next"),e=i[o]){if(!(e=e.call(i,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,l<2&&(l=0)}else 1===l&&(e=i.return)&&e.call(i),l<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),l=1);i=t}else if((e=(d=p.n<0)?s:n.call(r,p))!==a)break}catch(e){i=t,l=1,s=e}finally{c=1}}return{value:e,done:d}}}(n,o,i),!0),c}var a={};function l(){}function s(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(lo(e={},r,function(){return this}),e),d=c.prototype=l.prototype=Object.create(u);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,lo(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=c,lo(d,"constructor",c),lo(c,"constructor",s),s.displayName="GeneratorFunction",lo(c,o,"GeneratorFunction"),lo(d),lo(d,o,"Generator"),lo(d,r,function(){return this}),lo(d,"toString",function(){return"[object Generator]"}),(ao=function(){return{w:i,m:p}})()}function lo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}lo=function(t,e,n,r){function i(e,n){lo(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},lo(t,e,n,r)}function so(t,e,n,r,o,i,a){try{var l=t[i](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(r,o)}function co(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){so(i,r,o,a,l,"next",t)}function l(t){so(i,r,o,a,l,"throw",t)}a(void 0)})}}function uo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return po(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?po(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const fo=function(){var t=function(){var t=v((0,r.useState)([]),2),e=t[0],n=t[1],o=v((0,r.useState)(null),2),l=o[0],u=o[1],d=v((0,r.useState)(null),2),f=d[0],m=d[1],y=v((0,r.useState)(!0),2),x=y[0],b=y[1],j=v((0,r.useState)(!1),2),S=j[0],w=j[1],O=v((0,r.useState)(null),2),k=O[0],C=O[1],A=function(){var t=(0,r.useRef)(new Map),e=(0,r.useRef)(null),n=(0,r.useRef)(null),o=(0,r.useCallback)(function(){var t=new URLSearchParams(window.location.search).get("lang");return"all"===t?null:t&&"all"!==t?t:null},[]),l=(0,r.useCallback)(function(t,e,n){var r=new URLSearchParams({page:t,per_page:e,status:n.status||"all",attachment_filter:n.attachmentFilter||"all",search:n.search||""}),i=o();return i?r.append("lang",i):r.append("lang","all"),!0===n.skip_count?r.append("skip_count","1"):!1===n.skip_count&&r.append("skip_count","0"),"/ai-media/v1/library?".concat(r.toString())},[o]),c=(0,r.useCallback)(function(t,e,n){var r=n.skip_count?"skip":"count",i=o()||"all";return"page_".concat(t,"_").concat(e,"_").concat(n.status,"_").concat(n.attachmentFilter,"_").concat(n.search,"_").concat(r,"_").concat(i)},[o]),u=(0,r.useCallback)(function(){var e,n=(e=a().m(function e(n,r,o){var s,u,d,p;return a().w(function(e){for(;;)switch(e.n){case 0:if(s=c(n,r,o),!t.current.has(s)){e.n=1;break}return e.a(2,t.current.get(s));case 1:return u=l(n,r,o),e.n=2,i()({path:u,method:"GET"});case 2:return d=e.v,t.current.set(s,d),t.current.size>20&&(p=t.current.keys().next().value,t.current.delete(p)),e.a(2,d)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(t){s(i,r,o,a,l,"next",t)}function l(t){s(i,r,o,a,l,"throw",t)}a(void 0)})});return function(t,e,r){return n.apply(this,arguments)}}(),[l,c]),d=(0,r.useCallback)(function(r,o,i,a){n.current&&(clearTimeout(n.current),n.current=null),e.current&&(e.current.abort(),e.current=null),n.current=setTimeout(function(){if(r<o){var n=c(r+1,i,a);t.current.has(n)||(e.current=new AbortController,u(r+1,i,a).then(function(){e.current=null}).catch(function(){e.current=null}))}},1500)},[c,u]),p=(0,r.useCallback)(function(){t.current.clear()},[]),f=(0,r.useCallback)(function(){return t.current.size},[]);return{loadPage:u,prefetchAdjacentPages:d,clearCache:p,getCacheSize:f}}(),T=A.loadPage,P=A.prefetchAdjacentPages,_=A.clearCache,I=(0,r.useRef)(null),N=(0,r.useCallback)(function(){var t=g(h().m(function t(e,n,r){var o,a;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!(r.search||r.status&&"all"!==r.status||r.attachmentFilter&&"all"!==r.attachmentFilter)){t.n=1;break}return console.log("Skipping background count - filters active, count already loaded"),w(!1),t.a(2);case 1:return I.current&&I.current.abort(),I.current=new AbortController,t.p=2,w(!0),o=new URLSearchParams({page:e,per_page:n,status:r.status||"all",attachment_filter:r.attachmentFilter||"all",search:r.search||""}),t.n=3,i()({path:"/ai-media/v1/library/count?".concat(o),method:"GET",signal:I.current.signal});case 3:a=t.v,console.group(" Background COUNT loaded"),console.log("Search:",r.search||"(none)"),console.log("Status:",r.status||"all"),console.log("Attachment filter:",r.attachmentFilter||"all"),console.log("Total items:",a.total),console.log("Total pages:",a.total_pages),console.groupEnd(),u(a.total),m(a.total_pages),w(!1),I.current=null,P(e,a.total_pages,n,r),t.n=6;break;case 4:if(t.p=4,"AbortError"!==t.v.name){t.n=5;break}return t.a(2);case 5:w(!1),I.current=null;case 6:return t.a(2)}},t,null,[[2,4]])}));return function(e,n,r){return t.apply(this,arguments)}}(),[P]),E=(0,r.useCallback)(function(){var t=g(h().m(function t(e,r,o){var i,a,l,s,c,d;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:if(console.group(" loadLibrary called"),console.log("Page:",e),console.log("Per page:",r),console.log("Filters:",o),i=o.search||o.status&&"all"!==o.status||o.attachmentFilter&&"all"!==o.attachmentFilter,a=!1!==o.skip_count&&!i,console.log("Has active filters:",i),console.log("Should skip count:",a),console.log("Mode:",a?"PROGRESSIVE":"TRADITIONAL"),console.groupEnd(),!a){t.n=5;break}if(!(o.search||o.status&&"all"!==o.status||o.attachmentFilter&&"all"!==o.attachmentFilter)){t.n=1;break}return console.warn("Active filters detected in PROGRESSIVE MODE, switching to TRADITIONAL MODE"),t.a(2,E(e,r,p(p({},o),{},{skip_count:!1})));case 1:return t.p=1,b(!0),C(null),t.n=2,T(e,r,p(p({},o),{},{skip_count:!0}));case 2:l=t.v,n(l.items),u(null),m(null),b(!1),N(e,r,o),t.n=4;break;case 3:t.p=3,c=t.v,C(c.message),b(!1);case 4:t.n=8;break;case 5:return t.p=5,b(!0),C(null),t.n=6,T(e,r,p(p({},o),{},{skip_count:!1}));case 6:s=t.v,n(s.items),u(s.total),m(s.total_pages),s.total_pages&&P(e,s.total_pages,r,o),b(!1),t.n=8;break;case 7:t.p=7,d=t.v,C(d.message),b(!1);case 8:return t.a(2)}},t,null,[[5,7],[1,3]])}));return function(e,n,r){return t.apply(this,arguments)}}(),[T,N,P]),z=(0,r.useCallback)(function(){var t=g(h().m(function t(e){var r,o,a,l,s,c=arguments;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:null,t.p=1,t.n=2,i()({path:"/wp/v2/media/".concat(e),method:"GET"});case 2:if(o=t.v,r){t.n=6;break}return r={provider:null,model:null,score:null},t.p=3,t.n=4,i()({path:"/ai-media/v1/jobs?attachment_ids=".concat(e),method:"GET"});case 4:l=t.v,(s=null===(a=l.jobs)||void 0===a?void 0:a.filter(function(t){return t.attachment_id==e}).sort(function(t,e){return new Date(e.created_at)-new Date(t.created_at)})[0])&&(r={provider:s.provider||null,model:s.model||null,score:null!==s.score?parseFloat(s.score):null}),t.n=6;break;case 5:t.p=5,t.v;case 6:n(function(t){return t.map(function(t){return t.id===e?p(p({},o),{},{provider:r.provider,model:r.model,score:r.score,parent_info:t.parent_info,parent:t.parent,post:t.post,language_info:t.language_info}):t})}),t.n=8;break;case 7:t.p=7,t.v;case 8:return t.a(2)}},t,null,[[3,5],[1,7]])}));return function(e){return t.apply(this,arguments)}}(),[]),D=(0,r.useCallback)(function(){var t=g(h().m(function t(e,r){var o,a,l,s,u;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.n=1,i()({path:"/wp/v2/media/".concat(e),method:"POST",data:{post:r}});case 1:return o=null,t.p=2,t.n=3,i()({path:"/wp/v2/posts/".concat(r),method:"GET"});case 3:l=t.v,o={id:l.id,title:c(null===(a=l.title)||void 0===a?void 0:a.rendered)||"Untitled",type:l.type||"post"},t.n=8;break;case 4:return t.p=4,t.v,t.p=5,t.n=6,i()({path:"/wp/v2/pages/".concat(r),method:"GET"});case 6:u=t.v,o={id:u.id,title:c(null===(s=u.title)||void 0===s?void 0:s.rendered)||"Untitled",type:u.type||"page"},t.n=8;break;case 7:t.p=7,t.v,o={id:r,title:"(Unknown)",type:"unknown"};case 8:n(function(t){return t.map(function(t){return t.id===e?p(p({},t),{},{post:r,parent:r,parent_info:o}):t})});case 9:return t.a(2)}},t,null,[[5,7],[2,4]])}));return function(e,n){return t.apply(this,arguments)}}(),[]),M=(0,r.useCallback)(function(){var t=g(h().m(function t(e){var r;return h().w(function(t){for(;;)switch(t.p=t.n){case 0:if(confirm("Detach this image from its post/page?")){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,i()({path:"/wp/v2/media/".concat(e),method:"POST",data:{post:0}});case 2:n(function(t){return t.map(function(t){return t.id===e?p(p({},t),{},{post:0,parent:0,parent_info:null}):t})}),t.n=4;break;case 3:t.p=3,r=t.v,alert("Error detaching image: "+r.message);case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),[]),B=(0,r.useCallback)(function(){_()},[_]);return{items:e,totalItems:l,totalPages:f,loading:x,countLoading:S,error:k,loadLibrary:E,refreshAttachment:z,attachToParent:D,handleDetach:M,invalidateCache:B,setItems:n,setLoading:b,setError:C}}(),e=function(){var t=_((0,r.useState)("all"),2),e=t[0],n=t[1],o=_((0,r.useState)("all"),2),i=o[0],a=o[1],l=_((0,r.useState)(""),2),s=l[0],c=l[1],u=_((0,r.useState)(""),2),d=u[0],p=u[1],f=function(){c(d)};return{statusFilter:e,setStatusFilter:n,attachmentFilter:i,setAttachmentFilter:a,searchQuery:s,setSearchQuery:c,searchInput:d,setSearchInput:p,handleSearch:f,handleSearchKeyDown:function(t){"Enter"===t.key&&f()}}}(),n=function(){var t,e=N((0,r.useState)(1),2),n=e[0],o=e[1],i=N((0,r.useState)((null===(t=window.aiMediaSEO)||void 0===t||null===(t=t.screenOptions)||void 0===t?void 0:t.perPage)||20),2),a=i[0],l=i[1];return{currentPage:n,perPage:a,goToPage:function(t){var e;o(t),null===(e=document.querySelector(".ai-media-library-table"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},resetPage:function(){o(1)},setCurrentPage:o,setPerPage:l}}(),o=function(){t.invalidateCache(),n.setCurrentPage(1),setTimeout(function(){var r={status:e.statusFilter,attachmentFilter:e.attachmentFilter,search:e.searchQuery,skip_count:!1};t.loadLibrary(1,n.perPage,r)},100)},l=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=(t=(0,r.useState)([]),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||L(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=o[0],l=o[1],s=function(){l([])},c=function(){var t=F(z().m(function t(){var e,r,o,l,c;return z().w(function(t){for(;;)switch(t.p=t.n){case 0:if(0!==a.length){t.n=1;break}return alert("Please select images to delete."),t.a(2);case 1:if(confirm("Delete ".concat(a.length," selected images? This cannot be undone."))){t.n=2;break}return t.a(2);case 2:t.p=2,e=M(a),t.p=3,e.s();case 4:if((r=e.n()).done){t.n=6;break}return o=r.value,t.n=5,i()({path:"/wp/v2/media/".concat(o),method:"DELETE",data:{force:!0}});case 5:t.n=4;break;case 6:t.n=8;break;case 7:t.p=7,l=t.v,e.e(l);case 8:return t.p=8,e.f(),t.f(8);case 9:if(s(),!n){t.n=10;break}return t.n=10,n();case 10:t.n=12;break;case 11:t.p=11,c=t.v,alert("Error deleting images: "+c.message);case 12:return t.a(2)}},t,null,[[3,7,8,9],[2,11]])}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=F(z().m(function t(e){var n,r,o;return z().w(function(t){for(;;)switch(t.p=t.n){case 0:if(0!==a.length){t.n=1;break}return alert("Please select images to change status."),t.a(2);case 1:if(n={pending:"Pending",processed:"Processed",approved:"Approved"},confirm("Change status of ".concat(a.length,' selected images to "').concat(n[e],'"?'))){t.n=2;break}return t.a(2);case 2:return t.p=2,t.n=3,i()({path:"/ai-media/v1/bulk-status",method:"POST",data:{attachment_ids:a,status:e}});case 3:(r=t.v).success?(s(),window.location.reload()):alert("Error changing status: "+(r.message||"Unknown error")),t.n=5;break;case 4:t.p=4,o=t.v,alert("Error changing status: "+o.message);case 5:return t.a(2)}},t,null,[[2,4]])}));return function(e){return t.apply(this,arguments)}}();return{selectedIds:a,toggleSelection:function(t){l(function(e){return e.includes(t)?e.filter(function(e){return e!==t}):[].concat(R(e),[t])})},selectAll:function(t){var e=t.map(function(t){return t.id}),n=e.every(function(t){return a.includes(t)});l(n?function(t){return t.filter(function(t){return!e.includes(t)})}:function(t){var n=e.filter(function(e){return!t.includes(e)});return[].concat(R(t),R(n))})},clearSelection:s,isSelected:function(t){return a.includes(t)},handleBulkDelete:c,handleBulkStatusChange:u}}(o),u=Y(t.items,t.refreshAttachment),d=ft(),f=function(){var t,e,n,o=(e=(0,r.useState)((null===(t=window.aiMediaSEO)||void 0===t||null===(t=t.screenOptions)||void 0===t?void 0:t.hiddenColumns)||[]),n=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,n)||function(t,e){if(t){if("string"==typeof t)return ht(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return(0,r.useEffect)(function(){var t=function(t){a(t.detail.hiddenColumns)};return window.addEventListener("aiMediaColumnVisibilityChanged",t),function(){window.removeEventListener("aiMediaColumnVisibilityChanged",t)}},[]),{hiddenColumns:i,isColumnVisible:function(t){return!i.includes(t)}}}(),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=kt((0,r.useState)(!1),2),n=e[0],o=e[1],i=kt((0,r.useState)([]),2),a=i[0],l=i[1],s=kt((0,r.useState)(!1),2),c=s[0],u=s[1],d=kt((0,r.useState)({}),2),p=d[0],f=d[1],h=kt((0,r.useState)(!1),2),m=h[0],y=h[1],g=(0,r.useRef)(null),v=function(t){var e=t.filter(function(t){return t.type.startsWith("image/")});if(0!==e.length){l(function(t){return[].concat(Ot(t),Ot(e))});var n={};e.forEach(function(t){n[t.name]={status:"pending",progress:0,id:null}}),f(function(t){return St(St({},t),n)})}else alert("Please select image files only.")},x=function(){var e,n=(e=gt().m(function e(){var n,r,i,s;return gt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(0!==a.length&&!c){e.n=1;break}return e.a(2);case 1:u(!0),n=xt(a),e.p=2,i=gt().m(function t(){var e,n,o,i,a,l;return gt().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=r.value,t.p=1,f(function(t){return St(St({},t),{},wt({},e.name,St(St({},t[e.name]),{},{status:"uploading",progress:0})))}),(n=new FormData).append("file",e),n.append("title",e.name.replace(/\.[^/.]+$/,"")),t.n=2,fetch(window.aiMediaSEO.wpApiUrl+"wp/v2/media",{method:"POST",headers:{"X-WP-Nonce":window.aiMediaSEO.nonce},body:n});case 2:if((o=t.v).ok){t.n=4;break}return t.n=3,o.json();case 3:throw i=t.v,new Error(i.message||"Upload failed: ".concat(o.statusText));case 4:return t.n=5,o.json();case 5:a=t.v,f(function(t){return St(St({},t),{},wt({},e.name,{status:"completed",progress:100,id:a.id}))}),t.n=7;break;case 6:t.p=6,l=t.v,f(function(t){return St(St({},t),{},wt({},e.name,{status:"failed",progress:0,id:null,error:l.message}))});case 7:return t.a(2)}},t,null,[[1,6]])}),n.s();case 3:if((r=n.n()).done){e.n=5;break}return e.d(yt(i()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,s=e.v,n.e(s);case 7:return e.p=7,n.f(),e.f(7);case 8:u(!1),setTimeout(function(){f(function(e){return Object.values(e).every(function(t){return"completed"===t.status})&&Object.keys(e).length>0&&setTimeout(function(){o(!1),l([]),f({}),t&&t()},800),e})},100);case 9:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(t){bt(i,r,o,a,l,"next",t)}function l(t){bt(i,r,o,a,l,"throw",t)}a(void 0)})});return function(){return n.apply(this,arguments)}}();return{uploadModalOpen:n,uploadFiles:a,uploading:c,uploadProgress:p,isDragging:m,fileInputRef:g,openUploadModal:function(){o(!0)},closeUploadModal:function(){c&&!confirm("Upload is in progress. Are you sure you want to cancel?")||(o(!1),l([]),f({}))},handleFileSelect:function(t){var e=Array.from(t.target.files);v(e)},handleFilesAdded:v,handleStartUpload:x,handleRemoveFile:function(t){l(function(e){return e.filter(function(e){return e.name!==t})}),f(function(e){var n=St({},e);return delete n[t],n})},handleDragEnter:function(t){t.preventDefault(),t.stopPropagation(),y(!0)},handleDragLeave:function(t){t.preventDefault(),t.stopPropagation(),t.currentTarget===t.target&&y(!1)},handleDragOver:function(t){t.preventDefault(),t.stopPropagation()},handleDrop:function(t){t.preventDefault(),t.stopPropagation(),y(!1);var e=Array.from(t.dataTransfer.files);v(e)}}}(function(){o()}),y=uo((0,r.useState)(null),2),x=y[0],b=y[1],j=uo((0,r.useState)(!1),2),S=j[0],w=j[1],O=uo((0,r.useState)(!1),2),k=O[0],C=O[1],I=uo((0,r.useState)(null),2),E=I[0],D=I[1],B=uo((0,r.useState)(0),2),G=B[0],U=B[1],W=(0,r.useMemo)(function(){return{status:e.statusFilter,attachmentFilter:e.attachmentFilter,search:e.searchQuery}},[e.statusFilter,e.attachmentFilter,e.searchQuery]);(0,r.useEffect)(function(){t.loadLibrary(n.currentPage,n.perPage,W)},[n.currentPage,n.perPage,W,t.loadLibrary]),(0,r.useEffect)(function(){i()({path:"/ai-media/v1/settings/detect-tiers",method:"POST",data:{force_refresh:!1}}).catch(function(){})},[]);var H=function(){t.invalidateCache(),e.setSearchQuery(e.searchInput),n.resetPage()},q=function(){var t=co(ao().m(function t(e){var n,r;return ao().w(function(t){for(;;)switch(t.p=t.n){case 0:return D(e),U(0),C(!0),t.p=1,t.n=2,i()({path:"/ai-media/v1/batch-analyze",method:"POST",data:{mode:e,attachment_ids:"selected"===e?l.selectedIds:[]}});case 2:(n=t.v).success&&n.attachment_ids.length>0?U(n.attachment_ids.length):(C(!1),D(null),b({type:"warning",message:n.message||"No images found to process."})),t.n=4;break;case 3:t.p=3,r=t.v,C(!1),D(null),b({type:"error",message:r.message||"Failed to prepare batch processing."});case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}(),$=function(){var t=co(ao().m(function t(){var e,n;return ao().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,i()({path:"/ai-media/v1/clear-opcache",method:"POST"});case 1:e=t.v,b({type:e.success?"success":"warning",message:e.message}),e.success?setTimeout(function(){window.location.reload()},1500):setTimeout(function(){b(null)},5e3),t.n=3;break;case 2:t.p=2,n=t.v,b({type:"error",message:"Failed to clear OPCache: "+n.message}),setTimeout(function(){b(null)},5e3);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),K=function(t){return ee(t,u.queueStatus)},V=function(t){var e=t.addProcessingId,n=t.removeProcessingId,o=t.refreshAttachment,a=t.addCost,l=t.processingIds,s=t.setAllAttachments,c=t.selectedIds,u=t.clearSelection,d=t.setAdminNotice,p=Bt((0,r.useState)(!1),2),f=p[0],h=p[1],m=Bt((0,r.useState)(null),2),y=m[0],g=m[1],v=(0,r.useRef)(!1),x=Bt((0,r.useState)(""),2),b=x[0],j=x[1],S=Bt((0,r.useState)("optimal"),2),w=S[0],O=S[1],k=Bt((0,r.useState)(8),2),C=k[0],A=k[1],T=(0,r.useRef)(0),_=function(){var t=Mt(Et().m(function t(e,n){var r,o,a,l,s,c,u;return Et().w(function(t){for(;;)switch(t.p=t.n){case 0:r=Lt(n),a=0;case 1:if(!(a<=r.maxRetries)){t.n=9;break}if(!v.current){t.n=2;break}throw new Error("Batch processing cancelled");case 2:return t.p=2,t.n=3,i()({path:"/ai-media/v1/process-single",method:"POST",data:{attachment_id:e,auto_apply:!0,force_reprocess:!0}});case 3:return l=t.v,t.a(2,{success:!0,result:l,attachmentId:e});case 4:if(t.p=4,u=t.v,o=u,!v.current){t.n=5;break}throw new Error("Batch processing cancelled");case 5:if(!("rate_limit_exceeded"!==u.code&&"timeout"!==u.code&&429!==u.status&&503!==u.status||a>=r.maxRetries)){t.n=6;break}throw u;case 6:return s=r.baseDelay*Math.pow(2,a),c=Math.random()*r.jitterMs,t.n=7,Ut(s+c);case 7:T.current++,console.log("Retrying image ".concat(e,", attempt ").concat(a+1,"/").concat(r.maxRetries));case 8:a++,t.n=1;break;case 9:throw o;case 10:return t.a(2)}},t,null,[[2,4]])}));return function(e,n){return t.apply(this,arguments)}}(),I=function(){var t=Mt(Et().m(function t(e,n,r){var i,l,s,c,u;return Et().w(function(t){for(;;)switch(t.n){case 0:i={processed:0,success:0,failed:0,errors:{},retried:0},T.current=0,l=0;case 1:if(!(l<e.length)){t.n=6;break}if(!v.current){t.n=2;break}return t.a(3,6);case 2:return s=e.slice(l,l+r),c=s.map(function(t){return _(t,n).then(function(e){var n=e.result,r=e.attachmentId;i.processed++,i.success++,n.costs&&n.costs.total_cost&&a(n.costs.total_cost);var l=n.thumbnail_url||n.source_url||"",s=n.alt_text||"Processing...",c=n.provider||"unknown";return g(function(e){var o;return It(It({},e),{},{current:i.processed,success:[].concat(Pt(e.success),[t]),retried:T.current,recentlyProcessed:[{id:r,thumbnail:l,alt:s,timestamp:Date.now(),provider:c}].concat(Pt(e.recentlyProcessed.slice(0,14))),totalCost:e.totalCost+((null===(o=n.costs)||void 0===o?void 0:o.total_cost)||0),providerStats:It(It({},e.providerStats),{},Nt({},(null==c?void 0:c.toLowerCase())||"unknown",(e.providerStats[(null==c?void 0:c.toLowerCase())||"unknown"]||0)+1))})}),o(t),{imageId:t,success:!0,result:n}}).catch(function(e){return i.processed++,i.failed++,i.errors[t]=[e.message||"Unknown error"],g(function(n){return It(It({},n),{},{current:i.processed,failed:[].concat(Pt(n.failed),[t]),errors:It(It({},n.errors),{},Nt({},t,[e.message||"Unknown error"])),retried:T.current})}),o(t),{imageId:t,success:!1,error:e}})}),t.n=3,Promise.allSettled(c);case 3:if(u=Gt(n),!(l+r<e.length&&u>0)){t.n=4;break}return t.n=4,Ut(u);case 4:j(P());case 5:l+=r,t.n=1;break;case 6:return t.a(2,i)}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),N=function(){var t=Mt(Et().m(function t(r){var c,u,d,p,f,h;return Et().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!l.includes(r)){t.n=1;break}return t.a(2);case 1:return e(r),s(function(t){return t.map(function(t){return t.id===r?It(It({},t),{},{meta:It(It({},t.meta),{},{_ai_media_status:"processing"}),alt_text:"Processing...",title:{rendered:"Processing..."},caption:{rendered:"Processing..."},parent_info:t.parent_info,parent:t.parent,post:t.post}):t})}),t.p=2,t.n=3,i()({path:"/ai-media/v1/analyze",method:"POST",data:{attachment_ids:[r]}});case 3:if(u=t.v,d=null===(c=u.results)||void 0===c?void 0:c[0],!(u.errors&&u.errors.length>0)){t.n=5;break}return p=u.errors[0],f=p.errors||["Unknown error"],alert("Failed to analyze image:\n"+f.join("\n")),t.n=4,o(r);case 4:case 6:t.n=8;break;case 5:if(!d){t.n=7;break}return d.costs&&d.costs.total_cost&&a(d.costs.total_cost),t.n=6,o(r,{provider:d.provider||null,model:d.model||null,score:null!==d.score&&void 0!==d.score?parseFloat(d.score):null});case 7:return t.n=8,o(r);case 8:t.n=10;break;case 9:return t.p=9,h=t.v,alert("Error: "+h.message),t.n=10,o(r);case 10:return t.p=10,n(r),t.f(10);case 11:return t.a(2)}},t,null,[[2,9,10,11]])}));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Mt(Et().m(function t(e){var n,r,o,a,l,s=arguments;return Et().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=s.length>1&&void 0!==s[1]?s[1]:"optimal",r=s.length>2&&void 0!==s[2]?s[2]:8,!f){t.n=1;break}return t.a(2);case 1:return t.p=1,h(!0),v.current=!1,d(null),O(n),A(r),t.n=2,i()({path:"/ai-media/v1/batch-analyze",method:"POST",data:{mode:e,attachment_ids:"selected"===e?c:[]}});case 2:if((o=t.v).success&&0!==o.attachment_ids.length){t.n=3;break}return h(!1),d({type:"warning",message:o.message||"No images found to process."}),t.a(2);case 3:return a=o.attachment_ids,g({active:!0,current:0,total:a.length,success:[],failed:[],errors:{},retried:0,speedMode:n,concurrency:r,startTime:Date.now(),recentlyProcessed:[],totalCost:0,messages:[],achievements:[],providerStats:{openai:0,google:0}}),t.n=4,I(a,n,r);case 4:g(function(t){var e=t.success.length,n=t.failed.length,r=v.current;return d(r?{type:"warning",message:"Batch processing cancelled. Processed ".concat(t.current," of ").concat(t.total," images (").concat(e," successful, ").concat(n," failed, ").concat(t.retried," retried). Refreshing page...")}:0===n?{type:"success",message:"Batch processing completed successfully! ".concat(e," images processed").concat(t.retried>0?" (".concat(t.retried," retried)"):"",". Refreshing page...")}:e>0?{type:"warning",message:"Batch processing completed with some errors. ".concat(e," successful, ").concat(n," failed").concat(t.retried>0?" (".concat(t.retried," retried)"):"",". Refreshing page...")}:{type:"error",message:"Batch processing failed. All ".concat(n," images failed to process.")}),t}),g({active:!1}),h(!1),u(),setTimeout(function(){window.location.reload()},2e3),t.n=6;break;case 5:t.p=5,l=t.v,d({type:"error",message:l.message||"An error occurred during batch processing."}),g({active:!1});case 6:return t.p=6,h(!1),t.f(6);case 7:return t.a(2)}},t,null,[[1,5,6,7]])}));return function(e){return t.apply(this,arguments)}}();return{batchProcessing:f,batchProgress:y,setBatchProgress:g,cancelledRef:v,processingStatus:b,speedMode:w,concurrency:C,handleAnalyze:N,handleBatchAnalyze:E}}({addProcessingId:u.addProcessingId,removeProcessingId:u.removeProcessingId,refreshAttachment:t.refreshAttachment,addCost:d.addCost,processingIds:u.processingIds,setAllAttachments:t.setItems,selectedIds:l.selectedIds,clearSelection:l.clearSelection,setAdminNotice:b}),Q=at("alt",{refreshAttachment:t.refreshAttachment,isAttachmentProcessing:K}),J=at("caption",{refreshAttachment:t.refreshAttachment,isAttachmentProcessing:K}),Z=at("title",{refreshAttachment:t.refreshAttachment,isAttachmentProcessing:K}),et=at("status",{refreshAttachment:t.refreshAttachment,isAttachmentProcessing:K}),nt=function(t){var e=t.refreshAttachment,n=t.isAttachmentProcessing,r=function(){var t=tt(X().m(function t(r){var o,a,l,s,c;return X().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!n||!n(r)){t.n=1;break}return t.a(2);case 1:return t.p=1,s={meta:{}},null!==(o=r.meta)&&void 0!==o&&o._ai_media_draft_alt&&(s.alt_text=r.meta._ai_media_draft_alt,s.meta._ai_media_draft_alt=""),null!==(a=r.meta)&&void 0!==a&&a._ai_media_draft_title&&(s.title=r.meta._ai_media_draft_title,s.meta._ai_media_draft_title=""),null!==(l=r.meta)&&void 0!==l&&l._ai_media_draft_caption&&(s.caption=r.meta._ai_media_draft_caption,s.meta._ai_media_draft_caption=""),s.meta._ai_media_status="approved",t.n=2,i()({path:"/wp/v2/media/".concat(r.id),method:"POST",data:s});case 2:if(!e){t.n=3;break}return t.n=3,e(r.id);case 3:t.n=5;break;case 4:t.p=4,c=t.v,alert("Error approving metadata: "+c.message);case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}();return{handleApprove:r}}({refreshAttachment:t.refreshAttachment,isAttachmentProcessing:K}),rt=nt.handleApprove,ot=function(t){var e=Xt((0,r.useState)(!1),2),n=e[0],o=e[1],a=Xt((0,r.useState)(""),2),l=a[0],s=a[1],u=Xt((0,r.useState)([]),2),d=u[0],p=u[1],f=Xt((0,r.useState)(null),2),h=f[0],m=f[1],y=Xt((0,r.useState)(!1),2),g=y[0],v=y[1],x=Xt((0,r.useState)(null),2),b=x[0],j=x[1],S=function(){var t=Qt(qt().m(function t(){var e,n,r,o,a,l,s,u,d,f;return qt().w(function(t){for(;;)switch(t.p=t.n){case 0:return v(!0),e=[],t.p=1,t.n=2,i()({path:"/wp/v2/posts?per_page=100&orderby=date&order=desc",method:"GET"});case 2:n=t.v,e.push.apply(e,Vt(n.map(function(t){var e;return{id:t.id,type:"post",typeName:"Posts",title:c(null===(e=t.title)||void 0===e?void 0:e.rendered)||"Untitled",date:t.date,status:t.status}}))),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.p=4,t.n=5,i()({path:"/wp/v2/pages?per_page=100&orderby=date&order=desc",method:"GET"});case 5:r=t.v,e.push.apply(e,Vt(r.map(function(t){var e;return{id:t.id,type:"page",typeName:"Pages",title:c(null===(e=t.title)||void 0===e?void 0:e.rendered)||"Untitled",date:t.date,status:t.status}}))),t.n=7;break;case 6:t.p=6,t.v;case 7:return t.p=7,t.n=8,i()({path:"/wp/v2/types",method:"GET"});case 8:o=t.v,a=Object.entries(o).filter(function(t){var e=Xt(t,2),n=e[0],r=e[1];return!["post","page","attachment","wp_block","wp_template","wp_template_part","wp_navigation","nav_menu_item"].includes(n)&&r.rest_base}),l=Kt(a),t.p=9,u=qt().m(function t(){var n,r,o,a;return qt().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=Xt(s.value,2),r=n[0],o=n[1],t.p=1,t.n=2,i()({path:"/wp/v2/".concat(o.rest_base,"?per_page=100&orderby=date&order=desc"),method:"GET"});case 2:a=t.v,e.push.apply(e,Vt(a.map(function(t){var e;return{id:t.id,type:r,typeName:o.name||r,title:c(null===(e=t.title)||void 0===e?void 0:e.rendered)||"Untitled",date:t.date,status:t.status}}))),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}),l.s();case 10:if((s=l.n()).done){t.n=12;break}return t.d(Ht(u()),11);case 11:t.n=10;break;case 12:t.n=14;break;case 13:t.p=13,f=t.v,l.e(f);case 14:return t.p=14,l.f(),t.f(14);case 15:t.n=17;break;case 16:t.p=16,t.v;case 17:d=e.sort(function(t,e){return new Date(e.date)-new Date(t.date)}),p(d),v(!1);case 18:return t.a(2)}},t,null,[[9,13,14,15],[7,16],[4,6],[1,3]])}));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Qt(qt().m(function t(e){return qt().w(function(t){for(;;)switch(t.n){case 0:return j(e),o(!0),s(""),p([]),m(null),t.n=1,S();case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),O=function(){o(!1),m(null),j(null)},k=function(){var t=Qt(qt().m(function t(){var e,n,r,o,a,s,u,d,f,h;return qt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(l.trim()){t.n=2;break}return t.n=1,S();case 1:return t.a(2);case 2:return v(!0),e=[],t.p=3,t.n=4,i()({path:"/wp/v2/posts?search=".concat(encodeURIComponent(l),"&per_page=100"),method:"GET"});case 4:n=t.v,e.push.apply(e,Vt(n.map(function(t){var e;return{id:t.id,type:"post",typeName:"Posts",title:c(null===(e=t.title)||void 0===e?void 0:e.rendered)||"Untitled",date:t.date,status:t.status}}))),t.n=6;break;case 5:t.p=5,t.v;case 6:return t.p=6,t.n=7,i()({path:"/wp/v2/pages?search=".concat(encodeURIComponent(l),"&per_page=100"),method:"GET"});case 7:r=t.v,e.push.apply(e,Vt(r.map(function(t){var e;return{id:t.id,type:"page",typeName:"Pages",title:c(null===(e=t.title)||void 0===e?void 0:e.rendered)||"Untitled",date:t.date,status:t.status}}))),t.n=9;break;case 8:t.p=8,t.v;case 9:return t.p=9,t.n=10,i()({path:"/wp/v2/types",method:"GET"});case 10:o=t.v,a=Object.entries(o).filter(function(t){var e=Xt(t,2),n=e[0],r=e[1];return!["post","page","attachment","wp_block","wp_template","wp_template_part","wp_navigation","nav_menu_item"].includes(n)&&r.rest_base}),s=Kt(a),t.p=11,d=qt().m(function t(){var n,r,o,a;return qt().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=Xt(u.value,2),r=n[0],o=n[1],t.p=1,t.n=2,i()({path:"/wp/v2/".concat(o.rest_base,"?search=").concat(encodeURIComponent(l),"&per_page=100"),method:"GET"});case 2:a=t.v,e.push.apply(e,Vt(a.map(function(t){var e;return{id:t.id,type:r,typeName:o.name||r,title:c(null===(e=t.title)||void 0===e?void 0:e.rendered)||"Untitled",date:t.date,status:t.status}}))),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}),s.s();case 12:if((u=s.n()).done){t.n=14;break}return t.d(Ht(d()),13);case 13:t.n=12;break;case 14:t.n=16;break;case 15:t.p=15,h=t.v,s.e(h);case 16:return t.p=16,s.f(),t.f(16);case 17:t.n=19;break;case 18:t.p=18,t.v;case 19:f=e.sort(function(t,e){return new Date(e.date)-new Date(t.date)}),p(f),v(!1);case 20:return t.a(2)}},t,null,[[11,15,16,17],[9,18],[6,8],[3,5]])}));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Qt(qt().m(function t(){return qt().w(function(t){for(;;)switch(t.n){case 0:return s(""),t.n=1,S();case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),A=function(){var e=Qt(qt().m(function e(){var n;return qt().w(function(e){for(;;)switch(e.p=e.n){case 0:if(h&&b){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,t(b,h.id);case 2:O(),e.n=4;break;case 3:e.p=3,n=e.v,alert("Error attaching image: "+n.message);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return{isOpen:n,search:l,setSearch:s,results:d,selected:h,setSelected:m,searching:g,attachmentId:b,handleOpen:w,handleClose:O,handleSearch:k,handleClearSearch:C,handleConfirm:A}}(t.attachToParent),it=function(){var t,e,n=(t=(0,r.useState)(null),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return te(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return{hoveredImage:o,handleThumbnailEnter:function(t,e){var n=t.currentTarget.getBoundingClientRect();i({id:e.id,imageUrl:e.source_url,x:n.right+10,y:n.top})},handleThumbnailLeave:function(){i(null)}}}();return t.loading?(0,ne.jsxs)("div",{className:"wrap ai-media-library",children:[(0,ne.jsx)(Ir,{onAddImage:m.openUploadModal}),(0,ne.jsx)(se,{message:"Loading your media library",showTips:!0})]}):t.error?(0,ne.jsx)("div",{className:"ai-media-library",children:(0,ne.jsx)("div",{className:"notice notice-error",children:(0,ne.jsxs)("p",{children:["Error loading attachments: ",t.error]})})}):(0,ne.jsxs)("div",{className:"wrap ai-media-library",children:[(0,ne.jsx)(re,{notice:x,onDismiss:function(){return b(null)}}),(0,ne.jsx)(Ir,{onAddImage:m.openUploadModal}),(0,ne.jsx)(Rr,{searchInput:e.searchInput,onSearchChange:e.setSearchInput,onSearch:H,onSearchKeyDown:function(t){"Enter"===t.key&&H()},onClearSearch:function(){t.invalidateCache(),e.setSearchInput(""),e.setSearchQuery(""),n.resetPage()},statusFilter:e.statusFilter,onStatusFilterChange:function(r){t.invalidateCache(),e.setStatusFilter(r),n.resetPage()},statusFilterOptions:A,attachmentFilter:e.attachmentFilter,onAttachmentFilterChange:function(r){t.invalidateCache(),e.setAttachmentFilter(r),n.resetPage()},attachmentFilterOptions:T}),(0,ne.jsx)(Gr,{selectedIds:l.selectedIds,batchProcessing:V.batchProcessing,onBatchAnalyze:q,onBulkDelete:l.handleBulkDelete,onBulkStatusChange:l.handleBulkStatusChange,totalCost:d.totalCost,loadingCosts:d.loadingCosts,onShowCostModal:function(){d.setShowCostModal(!0),d.loadTotalCost()},onLoadCostStats:function(){d.loadCostStats(),d.loadTotalCost()},onShowSettingsModal:function(){return w(!0)},onClearOpcache:$}),(0,ne.jsx)(io,{paginatedAttachments:t.items,selectedIds:l.selectedIds,onSelectAll:function(){return l.selectAll(t.items)},onToggleSelection:l.toggleSelection,isColumnVisible:f.isColumnVisible,currentPage:n.currentPage,totalPages:t.totalPages,totalItems:t.totalItems,countLoading:t.countLoading,onPageChange:n.goToPage,editingTitle:Z.editing,savingTitle:Z.saving,editingAlt:Q.editing,savingAlt:Q.saving,editingCaption:J.editing,savingCaption:J.saving,editingStatus:et.editing,savingStatus:et.saving,queueStatus:u.queueStatus,processingIds:u.processingIds,onTitleClick:Z.handleClick,onTitleChange:Z.updateValue,onTitleKeyDown:Z.handleKeyDown,onTitleSave:Z.handleSave,onLoadAllAttachments:o,onAltClick:Q.handleClick,onAltChange:Q.updateValue,onAltKeyDown:Q.handleKeyDown,onAltSave:Q.handleSave,onCaptionClick:J.handleClick,onCaptionChange:J.updateValue,onCaptionKeyDown:J.handleKeyDown,onCaptionSave:J.handleSave,onStatusClick:et.handleClick,onStatusChange:et.updateValue,onStatusSave:et.handleSave,onApprove:rt,onAttachToPost:ot.handleOpen,onDetach:t.handleDetach,onAnalyze:V.handleAnalyze,onThumbnailEnter:it.handleThumbnailEnter,onThumbnailLeave:it.handleThumbnailLeave}),(0,ne.jsx)(ie,{hoveredImage:it.hoveredImage}),(0,ne.jsx)(Se,{batchProgress:V.batchProgress,processingStatus:V.processingStatus,onCancel:function(){V.cancelledRef.current=!0},onClose:function(){},cancelledRef:V.cancelledRef}),(0,ne.jsx)(Oe,{isOpen:ot.isOpen,onClose:ot.handleClose,search:ot.search,onSearchChange:ot.setSearch,onSearch:ot.handleSearch,onClearSearch:ot.handleClearSearch,searching:ot.searching,results:ot.results,selected:ot.selected,onSelect:ot.setSelected,onConfirm:ot.handleConfirm}),(0,ne.jsx)(ke,{isOpen:m.uploadModalOpen,onClose:m.closeUploadModal,uploadFiles:m.uploadFiles,uploadProgress:m.uploadProgress,uploading:m.uploading,onFileSelect:m.handleFileSelect,onStartUpload:m.handleStartUpload,onRemoveFile:m.handleRemoveFile,fileInputRef:m.fileInputRef,onDragEnter:m.handleDragEnter,onDragLeave:m.handleDragLeave,onDragOver:m.handleDragOver,onDrop:m.handleDrop,isDragging:m.isDragging}),(0,ne.jsx)(Ae,{isOpen:d.showCostModal,onClose:function(){return d.setShowCostModal(!1)},costStats:d.costStats,costBreakdown:d.costBreakdown,liveTotalCost:d.totalCost}),(0,ne.jsx)(gr,{isOpen:S,onClose:function(){return w(!1)},preselectedImageId:l.selectedIds.length>0?l.selectedIds[0]:null}),(0,ne.jsx)(_r,{isOpen:k,imageCount:G,onConfirm:function(t,e){C(!1),E&&V.handleBatchAnalyze(E,t,e),D(null),U(0)},onCancel:function(){C(!1),D(null),U(0)}})]})};document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("ai-media-library-root");t&&(0,r.render)((0,ne.jsx)(fo,{}),t)})})();
//# sourceMappingURL=media-library.js.map